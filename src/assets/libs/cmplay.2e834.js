(function(){(function(){(function(){var L,p;(function(t){console.log("Hello CMPlaySDK 2e834.072403 - POKI");var c=function(){function s(){}return s.LOADING_BEGIN="loading_begin",s.LOADING_END="loading_end",s}();t.STATE=c;var n=function(){function s(){}return s.GAME_ACTIVE=220,s.LOADING_PAGE=221,s.MAIN_PAGE=222,s.GUIDE_PAGE=223,s.LOGIN_SUCCESS=228,s.LOGIN_FAILED=229,s.STAGE_START=231,s.STAGE_PASS=232,s.STAGE_FAIL=233,s.BANNER_SHOW=241,s.REWARDED_VIDEO_SHOW=242,s.REWARDED_VIDEO_SUCCESS=243,s.REWARDED_VIDEO_FAILED=248,s.OPEN_GAME_AD_SHOW=245,s.SHARE_DIALOG=246,s.SHARE_DIALOG_SUCCESS=247,s.INTERSTITIAL_AD_SHOW=244,s.INTERSTITIAL_AD_REQUEST=255,s.INTERSTITIAL_AD_ERROR=253,s.INTERSTITIAL_AD_DONE=250,s.GAME_LEVEL_PASS=249,s.UNUSED_251=251,s.UNUSED_252=252,s}();t.ACTION=n,t.SDK_VER=1;var e=!(t.Global={debugInfoc:!1,debugService:!1,initTime:0,public:{game_page:0,game_ver:"0",game_id:0,game_name:"",xaid:"0",accountid:"0",cn:"default",brand:"",model:"",app_id:void 0},data:{mCMPlayerId:void 0,mCMToken:void 0,mRewardVideoCallback:void 0,mShareCallback:void 0,mOnShowCBList:[],mOnHideCBList:[],mSystemInfo:void 0},isOversea:!1,isOutputDebug:!1}),o=!1,i=void 0,a=void 0,r=void 0;function d(){if(t.Global.data.mSystemInfo!=null)return t.Global.data.mSystemInfo;var s=function(){try{if(window.GameJs&&window.GameJs.getDisplayWidth)return window.GameJs.getDisplayWidth()}catch(g){t.Log.error("CMPlay::getDisplayWidth ERROR => "+g.message)}return 0},l=function(){try{if(window.GameJs&&window.GameJs.getDisplayHeight)return window.GameJs.getDisplayHeight()}catch(g){t.Log.error("CMPlay::getDisplayHeight ERROR => "+g.message)}return 0};return t.Global.data.mSystemInfo={brand:"Unknow",model:"Unknow",pixelRatio:1,screenWidth:s(),screenHeight:l(),windowWidth:s(),windowHeight:l(),statusBarHeight:0,language:h("lang","en"),version:"",system:"",platform:"",fontSizeSetting:1,SDKVersion:"1.0",benchmarkLevel:-1,gameId:t.Global.public.game_id,packageName:function(){try{if(window.GameJs&&window.GameJs.getAppPackageName)return window.GameJs.getAppPackageName()}catch(g){t.Log.error("CMPlay::getAppPackageName ERROR => "+g.message)}return""}(),packageVersion:function(){try{if(window.GameJs&&window.GameJs.getAppVersion)return window.GameJs.getAppVersion()}catch(g){t.Log.error("CMPlay::getAppVersion ERROR => "+g.message)}return"0"}(),gameToken:function(){try{return a.getGameToken()}catch(g){t.Log.error("CMPlay::getGameToken ERROR => "+g.message)}return""}(),appId:function(){try{return a.getAppID()}catch(g){t.Log.error("CMPlay::getAppID ERROR => "+g.message)}}(),userId:function(){try{return a.getUID()}catch(g){t.Log.error("CMPlay::getUID ERROR => "+g.message)}}(),isTestMode:function(){try{if(window.GameJs&&window.GameJs.isTestMode)return window.GameJs.isTestMode()}catch(g){t.Log.error("CMPlay::isTestMode ERROR => "+g.message),t.Log.error(JSON.stringify(g.stack))}return!1}(),channelId:function(){try{if(window.GameJs&&window.GameJs.getChannelId)return window.GameJs.getChannelId()}catch(g){t.Log.error("CMPlay::getChannelId ERROR => "+g.message)}return"0"}()},t.Global.data.mSystemInfo}t.init=function(s){if(t.Log.warn("init => "),s.pageId<=0||999<s.pageId)throw new Error("init => ERROR: Invalid pageId "+s.pageId);if(s.gameId<=6e3||99999<s.gameId)throw new Error("init => ERROR: Invalid gameId "+s.gameId);if(!s.gameName||s.gameName.length<1)throw new Error("init => ERROR: Invalid gameName "+s.gameName);t.Log.log("init => pageId:"+s.pageId+" gameId:"+s.gameId+" gameName:"+s.gameName);var l="oversea";if(t.Global.isOversea=!0,t.Log.warn("init => region: "+l),window.GameJs&&window.GameJs.getGameToken==null)throw new Error("init => ERROR: Please support GameJs.getGameToken API");t.Global.public.game_page=s.pageId,t.getQueryString("_svr_debug_","0")=="1"?(t.Global.isOutputDebug=!0,t.Global.debugService=!0,t.Log.warn(">>>>> CMPLAYSDK DEBUG MODE <<<<<")):(t.Global.isOutputDebug=!0,t.Global.debugService=!1);try{console.warn("init POKI"),(a=new t.POKI).init(s)}catch(g){t.Log.error("CMPlay::init ERROR => "+g.message),t.Log.error(JSON.stringify(g.stack))}i=new t.AudioImpl,o=e=!1,t.Global.debugInfoc=!1,t.Global.initTime=t.SysUtil.getTimeSeconds(),t.Global.public.brand="",t.Global.public.model="",t.Global.public.game_ver=m(),t.Global.public.game_id=s.gameId,t.Global.public.game_name=s.gameName,t.Global.data.mCMPlayerId=void 0,t.Global.data.mCMToken=void 0,t.Global.public.cn=d().appId,t.Global.public.xaid=d().userId,t.Global.isOutputDebug=!0,u.reportAction(n.GAME_ACTIVE)},t.setInfocDebug=function(s){t.Global.debugInfoc=s},t.setServiceDebug=function(s){t.Global.debugService=s},t.isCMPlay=function(){return!0},window.onAdShowFailed=function(){try{t.Global.data.mRewardVideoCallback!=null&&(t.Global.data.mRewardVideoCallback(!1),t.Global.data.mRewardVideoCallback=void 0)}catch(s){t.Log.error("CMPlay::onAdShowSuccess ERROR => "+s.message),t.Log.error(JSON.stringify(s.stack))}},window.onAdShowSuccess=function(){try{t.Global.data.mRewardVideoCallback!=null&&(t.Global.data.mRewardVideoCallback(!0),t.Global.data.mRewardVideoCallback=void 0)}catch(s){t.Log.error("CMPlay::onAdShowSuccess ERROR => "+s.message),t.Log.error(JSON.stringify(s.stack))}},window.onShareSuccess=function(){try{t.Global.data.mShareCallback!=null&&(t.Global.data.mShareCallback(),t.Global.data.mShareCallback=void 0,u.reportAction(n.SHARE_DIALOG_SUCCESS))}catch(s){t.Log.error("CMPlay::onShareSuccess ERROR => "+s.message),t.Log.error(JSON.stringify(s.stack))}},window.mute=function(){t.Audio.mute()},window.unmute=function(){t.Audio.unmute()},window.onActivityShow=function(){t.Log.warn("onActivityShow => ");for(var s=0;s<t.Global.data.mOnShowCBList.length;s++)try{t.Global.data.mOnShowCBList[s]()}catch(l){t.Log.error("CMPlay::onActivityShow ERROR => "+l.message),t.Log.error(JSON.stringify(l.stack))}e=!1,o||i.resumeBGM()},window.onActivityHide=function(){t.Log.warn("onActivityHide => ");for(var s=0;s<t.Global.data.mOnHideCBList.length;s++)try{t.Global.data.mOnHideCBList[s]()}catch(l){t.Log.error("CMPlay::onActivityHide ERROR => "+l.message),t.Log.error(JSON.stringify(l.stack))}e=!0,o||i.pauseBGM()},window.adShowCallback=function(s){try{var l=JSON.parse(s);if(t.Log.log("adShowCallback => result_message::"+l.result_message),l&&l.adAction=="onAdClosed"){if(l.unitId=="gti")r.mShareItAd.loadInerstitialAd();else if(l.unitId=="bqr"&&(r.mShareItAd.loadRewardAd(),!l.hasRewarded))return;t.Global.data.mRewardVideoCallback!=null&&(t.Global.data.mRewardVideoCallback(!0),t.Global.data.mRewardVideoCallback=void 0)}}catch(g){t.Log.error("adShowCallback ERROR => "+g.message),t.Log.error(JSON.stringify(g.stack))}},window.adLoadCallback=function(s){try{var l=JSON.parse(s);t.Log.log("adLoadCallback => result_message::"+l.result_message+"responseCode = "+l.responseCode)}catch(g){t.Log.error("adLoadCallback ERROR => "+g.message),t.Log.error(JSON.stringify(g.stack))}},t.hasNeededPermissions=function(){return window.RewardVideo&&window.RewardVideo.hasNeededPermissions&&window.RewardVideo.hasNeededPermissions()},t.hasTTAd=function(){return window.RewardVideo&&window.RewardVideo.hasTTAd&&window.RewardVideo.hasTTAd()},t.isSupportShareDialog=function(){return window.GameJs&&window.GameJs.onShareDialog},t.shareDialog=function(s){if(window.GameJs&&window.GameJs.onShareDialog){try{t.Global.data.mShareCallback=s;var l=window.GameJs.onShareDialog();return u.reportAction(n.SHARE_DIALOG),l}catch(g){t.Log.error("CMPlay::shareDialog ERROR => "+g.message),t.Log.error(JSON.stringify(g.stack))}return!1}},t.startRewardVideo=function(s){try{a.startRewardVideo(function(l){u.reportAction(l?n.REWARDED_VIDEO_SUCCESS:n.REWARDED_VIDEO_FAILED),s&&s(l)})&&u.reportAction(n.REWARDED_VIDEO_SHOW)}catch(l){t.Log.error("CMPlay::startRewardVideo ERROR => "+l.message),t.Log.error(JSON.stringify(l.stack)),s&&s(!1)}},t.showInterstitialAd=function(s){try{a.showInterstitialAd(s)&&u.reportAction(n.INTERSTITIAL_AD_SHOW)}catch(l){t.Log.error("CMPlay::showInterstitialAd ERROR =>"+l.message),t.Log.error(JSON.stringify(l.stack))}},t.refreshBanner=function(){t.hideBanner(),t.showBanner()},t.showBanner=function(){try{a.showBanner()&&u.reportAction(n.BANNER_SHOW)}catch(s){t.Log.error("CMPlay::showBanner ERROR => "+s.message),t.Log.error(JSON.stringify(s.stack))}},t.hideBanner=function(){try{a.hideBanner()}catch(s){t.Log.error("CMPlay::hideBanner ERROR => "+s.message),t.Log.error(JSON.stringify(s.stack))}},t.showToast=function(s,l){try{window.GameJs&&window.GameJs.showToast&&window.GameJs.showToast(s,l)}catch(g){t.Log.error("CMPlay::showToast ERROR => "+g.message),t.Log.error(JSON.stringify(g.stack))}},t.onShow=function(s){for(var l=0;l<t.Global.data.mOnShowCBList.length;l++)if(t.Global.data.mOnShowCBList[l]==s)return;t.Global.data.mOnShowCBList.push(s)},t.offShow=function(s){for(var l=0;l<t.Global.data.mOnShowCBList.length;l++)t.Global.data.mOnShowCBList[l]==s&&delete t.Global.data.mOnShowCBList[l]},t.onHide=function(s){for(var l=0;l<t.Global.data.mOnHideCBList.length;l++)if(t.Global.data.mOnHideCBList[l]==s)return;t.Global.data.mOnHideCBList.push(s)},t.offHide=function(s){for(var l=0;l<t.Global.data.mOnHideCBList.length;l++)t.Global.data.mOnHideCBList[l]==s&&delete t.Global.data.mOnHideCBList[l]},t.getStorageSync=function(s,l){try{if(window.GameJs&&window.GameJs.getLocalStringValue)return window.GameJs.getLocalStringValue(s,l)}catch(g){t.Log.error("CMPlay::getStorageSync ERROR => "+g.message),t.Log.error(JSON.stringify(g.stack))}},t.setStorageSync=function(s,l){try{if(window.GameJs&&window.GameJs.setLocalStringValue)return window.GameJs.setLocalStringValue(s,l)}catch(g){t.Log.error("CMPlay::setStorageSync ERROR => "+g.message),t.Log.error(JSON.stringify(g.stack))}},t.getSystemInfo=function(s){var l=t.getSystemInfoSync();s.success&&s.success(l),s.complete&&s.complete()},t.getSystemInfoSync=d;var u=function(){function s(){}return s.report=function(l,g){try{window.RewardVideo&&window.RewardVideo.reportData&&window.RewardVideo.reportData(l,g)}catch(y){t.Log.error("CMPlay::report ERROR => "+y.message),t.Log.error(JSON.stringify(y.stack))}},s.reportAction=function(l){if(l==n.GAME_ACTIVE||l==n.LOADING_PAGE||l==n.MAIN_PAGE||l==n.GUIDE_PAGE||l==n.LOGIN_SUCCESS||l==n.LOGIN_FAILED){if(0<=s.UNIQE_EVENT_LIST.indexOf(l))return void t.Log.log("reportAction => skip action["+l+"] for duplicate");s.UNIQE_EVENT_LIST.unshift(l)}if(t.Log.log("reportAction => "+l),window.RewardVideo&&window.RewardVideo.reportData){var g="page="+t.Global.public.game_page+"&game_ver="+t.Global.public.game_ver+"&action="+l;s.report("gamemaster_game_h5_wujin",g)}else t.cmplay_action.report(l);l==n.MAIN_PAGE&&s.showOpenGameAd()},s.reportErrMsg=function(l,g,y){window.RewardVideo&&window.RewardVideo.reportData?s.report("gamemaster_business_h5game_errmsg","url="+l+"&errcode="+g+"&errmsg="+y):t.cmplay_error.report(l,g,y)},s.showOpenGameAd=function(){setTimeout(function(){var l=a&&a.showOpenGameAd();t.Log.log("CMPlay::showOpenGameAd => "+(l?"TRUE":"FALSE")),l&&s.reportAction(n.OPEN_GAME_AD_SHOW)},0)},s.UNIQE_EVENT_LIST=[],s}();function m(){return window.getPathVersion()}function h(s,l){return window.getQueryString(s,l)}t.Infoc=u,t.login=function(s){try{a.login(function(l,g,y,_,G){u.reportAction(l?n.LOGIN_SUCCESS:n.LOGIN_FAILED),s&&s(l,g,y,_,G)})}catch(l){t.Log.error("CMPlay::login ERROR => "+l.message),t.Log.error(JSON.stringify(l.stack)),u.reportAction(n.LOGIN_FAILED),s&&s(!1,void 0,void 0,0,0)}},t.setStorageList=function(s,l){try{a.setStorageList(s,l)}catch(g){t.Log.error("CMPlay::setStorageList ERROR => "+g.message),t.Log.error(JSON.stringify(g.stack)),l&&l(!1)}},t.getStroageList=function(s,l){try{a.getStroageList(s,l)}catch(g){t.Log.error("CMPlay::getStroageList ERROR => "+g.message),t.Log.error(JSON.stringify(g.stack)),l&&l(void 0)}},t.delStroageList=function(s,l){try{a.delStroageList(s,l)}catch(g){t.Log.error("CMPlay::delStroageList ERROR => "+g.message),t.Log.error(JSON.stringify(g.stack)),l&&l(!1)}},t.getServerTime=function(s){t.CMService.getServerTime({success:function(l){s&&s(l)},fail:function(l){s&&s(void 0)}})},t.getPayload=function(){if(a)return a.getPayload()},t.getPathVersion=m,t.getQueryString=h,t.setState=function(s){if(t.Log.log("setState => "+s),window.GameJs&&window.GameJs.setState)try{window.GameJs.setState(s)}catch(l){t.Log.error("CMPlay::setState ERROR => "+l.message),t.Log.error(JSON.stringify(l.stack))}};var f=function(){function s(){}return s.onGameLoadStart=function(){t.Log.warn("===> onGameLoadStart"),t.setState(c.LOADING_BEGIN),t.Infoc.reportAction(n.LOADING_PAGE),a&&a.onGameLoadStart()},s.onGameLoadFinished=function(){t.Log.warn("===> onGameLoadFinished"),t.setState(c.LOADING_END),a&&a.onGameLoadFinished()},s.onGameMainStart=function(){t.Log.warn("===> onGameMainStart"),t.Infoc.reportAction(n.MAIN_PAGE),a&&a.onGameMainStart()},s.onGameStart=function(){t.Log.warn("===> onGameStart"),a&&a.onGameStart()},s.onGameStop=function(){t.Log.warn("===> onGameStop"),a&&a.onGameStop()},s.onGameLevelPass=function(l){t.Log.warn("===> onGameLevelPass: level="+l),u.reportAction(n.GAME_LEVEL_PASS),a&&a.onGameLevelPass(l)},s}();t.GameState=f;var w=function(){function s(){}return s.playBGM=function(l,g,y){if(g===void 0&&(g=!0),y===void 0&&(y=1),o)t.Log.warn("===> playBGM[mute]: "+l);else{if(!e)return t.Log.warn("===> playBGM: "+l),i.playBGM(l,g,y);t.Log.warn("===> playBGM[hide]: "+l)}},s.stopBGM=function(){t.Log.warn("===> stopBGM"),i.stopBGM()},s.playEffect=function(l,g){if(g===void 0&&(g=1),o)t.Log.warn("===> playEffect[mute]: "+l);else{if(!e)return t.Log.warn("===> playEffect: "+l),i.playEffect(l,g);t.Log.warn("===> playEffect[hide]: "+l)}},s.mute=function(){o||(t.Log.warn("===> mute"),o=!0,i.pauseBGM())},s.unmute=function(){o&&(t.Log.warn("===> unmute"),o=!1,i.resumeBGM())},s}();t.Audio=w})(p||(p={})),window.CMPlay=p,function(t){var c=void 0;t.showBanner=function(){c==null&&(c=setTimeout(this._refreshBanner,3e4),p.showBanner())},t.hideBanner=function(){t._clearTimeHandler(),p.hideBanner()},t.startRewardVideo=function(n){p.startRewardVideo(n)},t.showInterstitialAd=function(){p.showInterstitialAd()},t._clearTimeHandler=function(){c!=null&&(clearTimeout(c),c=void 0)},t._refreshBanner=function(){t._clearTimeHandler(),c=setTimeout(this._refreshBanner,3e4),p.hideBanner(),p.showBanner()}}(L||(L={})),window.CMPlayAd=L,function(t){var c=function(){function n(){}return n.getServerURL=function(){return t.Global.isOversea?"https://h5game_oversea.cmcm.com/":t.Global.debugService?"https://pianotiles-minigame.cmcm.com/":"https://minigame.cmcm.com/"},n.loginCMPlay=function(e){var o,i=t.getSystemInfoSync(),a=n.getServerURL();t.Log.warn("loginCMPlay =>"),a+="warty/auth/h5_login",o={gameid:i.gameId,cm_token:i.gameToken},t.Log.warn("url => "+a),t.NetworkUtil.request({url:a,data:o,header:{"content-type":"application/json"},method:"POST",dataType:"json",checkAuthorization:!1,success:function(r){var d;if((d=typeof r=="string"?JSON.parse(r):r)&&d.status==0&&d.result){var u=d.result.playerid,m=d.result.token,h=d.result.is_new_user,f=d.timestamp,w=0;h!=null&&h!=null&&0<(""+h).length&&(isNaN(+(""+h))||(w=+(""+h))),t.Global.isOutputDebug&&(t.Log.warn("req => "+JSON.stringify(o)),t.Log.warn("resp => "+JSON.stringify(d))),t.Log.log("loginCMPlay => SUCCESS"),t.Log.log("playerId: "+u),t.Log.log("token: "+m),t.Log.log("isNewUser: "+w),t.Log.log("timestamp: "+f),e.callback&&e.callback(!0,u,m,w,f)}else t.Log.error("loginCMPlay => FAILED A"),t.Log.error("req => "+JSON.stringify(o)),t.Log.error("resp => "+JSON.stringify(d)),e.callback&&e.callback(!1)},fail:function(r){t.Log.error("loginCMPlay => FAILED B"),t.Log.error("req => "+JSON.stringify(o)),t.Log.error(r),e.callback&&e.callback(!1)}})},n.setStorage=function(e){if(!t.Global.data.mCMPlayerId||!t.Global.data.mCMToken)return t.Log.error("setStorage:: Missing playerId/token"),void(e.fail&&e.fail(null));var o=n.getServerURL()+"warty/storage/set";n.postRequest(o,e.kvDatas,e.success,e.fail)},n.getStorage=function(e){if(!t.Global.data.mCMPlayerId||!t.Global.data.mCMToken)return t.Log.error("getStorage:: Missing playerId/token"),void(e.fail&&e.fail(null));var o=n.getServerURL()+"warty/storage/get";n.postRequest(o,e.keys,e.success,e.fail)},n.delStorage=function(e){if(!t.Global.data.mCMPlayerId||!t.Global.data.mCMToken)return t.Log.error("delStorage:: Missing playerId/token"),void(e.fail&&e.fail(null));var o=n.getServerURL()+"warty/storage/del";n.postRequest(o,e.keys,e.success,e.fail)},n.getServerTime=function(e){if(!t.Global.data.mCMPlayerId||!t.Global.data.mCMToken)return t.Log.error("delStorage:: Missing playerId/token"),void(e.fail&&e.fail(null));var o=n.getServerURL()+"warty/storage/get";n.postRequest(o,["_timestamp_"],function(i){i&&i.timestamp!==void 0?e.success&&e.success(i.timestamp):e.fail&&e.fail(null)},e.fail)},n.createAuthorization=function(e,o){return"CMCM "+t.hex_hmac_sha1(o,JSON.stringify(e))},n.getBody=function(e,o){var i;return o?i=e:(i={}).data=e,i.gameid=t.Global.public.game_id,i.playerid=t.Global.data.mCMPlayerId,i.timestamp=t.SysUtil.getTimeSeconds(),i},n.postRequest=function(e,o,i,a,r,d){r===void 0&&(r=!1),d===void 0&&(d=!0);var u=n.getBody(o,r),m=n.createAuthorization(u,t.Global.data.mCMToken);t.NetworkUtil.request({url:e,data:u,header:{Authorization:m},method:"POST",dataType:"string",token:t.Global.data.mCMToken,checkAuthorization:d,success:function(h){var f=JSON.parse(h);f&&f.status==0?i&&i(f):a&&a(f)},fail:function(h){a&&a(h)}})},n}();t.CMService=c}(p||(p={})),function(t){var c=function(){function n(){}return n.prototype.init=function(e){e.bannerAdId||(e.bannerAdId="908427599"),e.videoAdId||(e.videoAdId="908427310"),e.gdtVideoAdId||(e.gdtVideoAdId="3060856285839507"),window.RewardVideo&&(e.bannerAdId!=null&&window.RewardVideo.setBannerAdId&&(t.Log.warn("init setBannerAdId => "+e.bannerAdId),window.RewardVideo.setBannerAdId(e.bannerAdId)),e.videoAdId!=null&&window.RewardVideo.setRewardVideoADId&&(t.Log.warn("init setRewardVideoADId => "+e.videoAdId),window.RewardVideo.setRewardVideoADId(e.videoAdId)),e.interstitalAdId!=null&&window.RewardVideo.setInteractionPosId&&(t.Log.warn("init setInteractionPosId => "+e.interstitalAdId),window.RewardVideo.setInteractionPosId(e.interstitalAdId)),e.gdtVideoAdId!=null&&window.RewardVideo.setGDTRewardVideoAdId&&(t.Log.warn("init setGDTRewardVideoAdId => "+e.gdtVideoAdId),window.RewardVideo.setGDTRewardVideoAdId(e.gdtVideoAdId)))},n.prototype.startRewardVideo=function(e){return window.RewardVideo&&window.RewardVideo.startRewardVideo?(t.Global.data.mRewardVideoCallback=e,window.RewardVideo.startRewardVideo(),!0):(e&&e(!1),!1)},n.prototype.showBanner=function(){return!(!window.RewardVideo||!window.RewardVideo.showBanner||(window.RewardVideo.showBanner(),0))},n.prototype.hideBanner=function(){return!(!window.RewardVideo||!window.RewardVideo.hideBanner||(window.RewardVideo.hideBanner(),0))},n.prototype.showInterstitialAd=function(e){return window.RewardVideo&&window.RewardVideo.showInteractionAd?(window.RewardVideo.showInteractionAd(),e&&e(!0),!0):(e&&e(!1),!1)},n.prototype.showOpenGameAd=function(){return!(!window.RewardVideo||!window.RewardVideo.showOpenGameAd||(window.RewardVideo.showOpenGameAd(),0))},n}();t.CMAd=c}(p||(p={})),function(t){var c=function(){function n(){this.mVideoNative=void 0,this.mVideoCallback=void 0,this.mIsOnReward=!1}return n.prototype.init=function(e){var o,i,a=this,r=window.TencentGDT||[];(window.TencentGDT=r).push({placement_id:"5040452748174201",app_id:"40307385928989",type:"rewardVideo",onComplete:function(d){if(d.code==0){var u=new r.NATIVE.rewardVideoAd(function(m){var h=typeof m=="string"?JSON.parse(m):m;h&&h.data&&(h.data.action==="onADClose"?(a.mVideoCallback&&a.mVideoCallback(a.mIsOnReward),u.loadAd()):h.data.action==="onReward"&&(a.mIsOnReward=!0))});u.loadAd(),a.mVideoNative=u}}}),o=document.getElementsByTagName("head")[0],(i=document.createElement("script")).async=!0,i.src="https://qzs.qq.com/qzone/biz/res/i.js",o&&o.insertBefore(i,o.firstChild)},n.prototype.startRewardVideo=function(e){return this.mVideoNative?(this.mIsOnReward=!1,this.mVideoCallback=e,this.mVideoNative.showAd(),!0):(e&&e(!1),!1)},n.prototype.showBanner=function(){return!1},n.prototype.hideBanner=function(){return!1},n.prototype.showInterstitialAd=function(e){return e&&e(!1),!1},n.prototype.showOpenGameAd=function(){return!1},n}();t.GDTAd=c}(p||(p={})),function(t){var c=function(){function n(){this.isRewardVideoComplete=!1}return n.prototype.init=function(){window.addEventListener("message",function(e){if(e&&e.source==window.parent)try{var o=JSON.parse(e.data);if(o&&o.back_adpos){var i=o.back_adpos;i=="onRewardADShow"?this.isRewardVideoComplete=!1:i=="onRewardVideoComplete"?this.isRewardVideoComplete=!0:i=="onRewardADClose"&&t.Global.data.mRewardVideoCallback&&(t.Global.data.mRewardVideoCallback(this.isRewardVideoComplete),t.Global.data.mRewardVideoCallback=void 0)}}catch(a){}}.bind(this),!1)},n.prototype.startRewardVideo=function(e){return t.Global.data.mRewardVideoCallback=e,window.parent.postMessage(JSON.stringify({adpos:"apiVideoAd"}),"*"),!0},n.prototype.showBanner=function(){return window.parent.postMessage(JSON.stringify({adpos:"apiBannerAd",bAdType:"show"}),"*"),!1},n.prototype.hideBanner=function(){return window.parent.postMessage(JSON.stringify({adpos:"apiBannerAd",bAdType:"dismiss"}),"*"),!1},n.prototype.showInterstitialAd=function(e){return e&&e(!1),!1},n.prototype.showOpenGameAd=function(){return!1},n}();t.IQIYIAd=c}(p||(p={})),function(t){var c=function(){function n(){this.mEventList=void 0,this.mEventList=new Array}return n.prototype.init=function(e){var o=this;t.SysUtil.loadSDKScript("https://game-cdn.poki.com/scripts/v2/poki-sdk.js",!1,function(){t.Log.warn("POKIAd::loadSDKScript => PokiSDK is Ready"),PokiSDK.init().then(function(){t.Log.log("POKI initialized"),o.processEventList()}).catch(function(){t.Log.log("Adblock enabled"),o.processEventList()})})},n.prototype.startRewardVideo=function(e){var o=this;return window.PokiSDK?(t.Log.warn("POKIAd::startRewardVideo => invoke"),this.onActivityHide(),PokiSDK.rewardedBreak().then(function(i){i?(t.Log.log("POKIAd::startRewardVideo => reward"),e&&e(!0)):(t.Log.log("POKIAd::startRewardVideo => unrewarded"),e&&e(!1)),o.onActivityShow()}),!0):(t.Log.error("POKIAd::startRewardVideo => Missing PokiSDK env"),e&&e(!1),!1)},n.prototype.showBanner=function(){return window.PokiSDK?(t.Log.warn("POKIAd::showBanner => invoke"),!0):(t.Log.error("POKIAd::showBanner => Missing PokiSDK env"),!1)},n.prototype.hideBanner=function(){return window.PokiSDK?(t.Log.warn("POKIAd::hideBanner => invoke"),!0):(t.Log.error("POKIAd::hideBanner => Missing PokiSDK env"),!1)},n.prototype.showInterstitialAd=function(e){var o=this;return window.PokiSDK?(this.onActivityHide(),PokiSDK.commercialBreak().then(function(){t.Log.log("POKIAd::showInterstitialAd => commercialBreak finish"),e&&e(!0),o.onActivityShow()}).catch(function(){t.Log.log("POKIAd::showInterstitialAd => commercialBreak catch"),e&&e(!1),o.onActivityShow()})):(t.Log.error("POKIAd::showInterstitialAd => Missing PokiSDK env"),e&&e(!1)),!1},n.prototype.gameLoadingStart=function(){this.mEventList.unshift("loading_start"),this.processEventList()},n.prototype.gameLoadingFinished=function(){this.mEventList.unshift("loading_finished"),this.processEventList()},n.prototype.gamePlayStart=function(){window.PokiSDK&&PokiSDK.gameplayStart()},n.prototype.gamePlayStop=function(){window.PokiSDK&&PokiSDK.gameplayStop()},n.prototype.happyTime=function(e){window.PokiSDK&&(e<=0||(1<e&&(e=1),PokiSDK.happyTime(e)))},n.prototype.processEventList=function(){if(window.PokiSDK)for(;0<this.mEventList.length;){var e=this.mEventList.pop();e=="loading_start"?PokiSDK.gameLoadingStart():e=="loading_finished"&&PokiSDK.gameLoadingFinished()}},n.prototype.onActivityHide=function(){window.onActivityHide&&window.onActivityHide()},n.prototype.onActivityShow=function(){window.onActivityShow&&window.onActivityShow()},n.prototype.showOpenGameAd=function(){return!1},n}();t.POKIAd=c}(p||(p={})),function(t){var c=function(){function n(){}return n.prototype.init=function(e){t.SysUtil.loadSDKScript("https://newidea4-gamecenter-frontend.1sapp.com/game/gamesdk/prod/qtt_help.js",!1,function(){t.Log.warn("QTT::loadSDKScript => qtt_help is Ready")}),this.createContainer()},n.prototype.createContainer=function(){var e=document.createElement("style");e.setAttribute("type","text/css"),e.innerText=".titleBox{ display:none !important; };",document.body.appendChild(e)},n.prototype.startRewardVideo=function(e){return window.qtt_help?(t.Log.warn("QTTAd::startRewardVideo => invoke"),window.onActivityHide&&window.onActivityHide(),window.qtt_help.ad.showVideo(function(o){o==1?(t.Log.log("QTTAd::startRewardVideo => endedCallback rewarded"),e&&e(!0)):(t.Log.log("QTTAd::startRewardVideo => endedCallback unrewarded for "+o),e&&e(!1)),window.onActivityShow&&window.onActivityShow()},{gametype:1,rewardtype:1,data:{title:"\u9053\u5177",url:"//h5game.zhhainiao.com/cmplaysdk/qtt/gift.png"}}),!0):(t.Log.error("QTTAd::startRewardVideo => Missing qtt_help env"),e&&e(!1),!1)},n.prototype.showBanner=function(){return window.qtt_help?(t.Log.warn("QTTAd::showBanner => invoke"),window.qtt_help.ad.showBanner(),!0):(t.Log.error("QTTAd::showBanner => Missing qtt_help env"),!1)},n.prototype.hideBanner=function(){return window.qtt_help?(t.Log.warn("QTTAd::hideBanner => invoke"),window.qtt_help.ad.hideBanner(),!0):(t.Log.error("QTTAd::hideBanner => Missing qtt_help env"),!1)},n.prototype.showInterstitialAd=function(e){return this.showInteractAd(e)},n.prototype.showInteractAd=function(e){return window.qtt_help?(t.Log.warn("QTTAd::showInteractAd => invoke"),window.qtt_help.ad.showHDReward({gametype:1,rewardtype:1,data:{title:"\u9053\u5177",url:"//h5game.zhhainiao.com/cmplaysdk/qtt/gift.png"}}),e&&e(!0),!0):(t.Log.error("QTTAd::showInteractAd => Missing qtt_help env"),e&&e(!1),!1)},n.prototype.showOpenGameAd=function(){return!1},n}();t.QTTAd=c}(p||(p={})),function(t){var c=function(){function n(){}return n.prototype.init=function(e){t.SysUtil.loadSDKScript("https://newidea4-gamecenter-frontend.1sapp.com/sdk/prod/h5.v1.0.0.js?spread=required",!1,function(){t.Log.warn("QTT::loadSDKScript => qttGame is Ready")}),this.createContainer()},n.prototype.createContainer=function(){var e=document.createElement("style");e.setAttribute("type","text/css"),e.innerText=".titleBox{ display:none !important; };",document.body.appendChild(e)},n.prototype.startRewardVideo=function(e){return window.qttGame?(t.Log.warn("QTTAd::startRewardVideo => invoke"),window.onActivityHide&&window.onActivityHide(),window.qttGame.showVideo(function(o){o==1?(t.Log.log("QTTAd::startRewardVideo => endedCallback rewarded"),e&&e(!0)):(t.Log.log("QTTAd::startRewardVideo => endedCallback unrewarded for "+o),e&&e(!1)),window.onActivityShow&&window.onActivityShow()},{gametype:1,rewardtype:1,data:{title:"\u9053\u5177",url:"https://h5game.zhhainiao.com/cmplaysdk/qtt/gift.png"}}),!0):(t.Log.error("QTTAd::startRewardVideo => Missing qttGame env"),e&&e(!1),!1)},n.prototype.showBanner=function(){return window.qttGame?(t.Log.warn("QTTAd::showBanner => invoke"),window.qttGame.showBanner(),!0):(t.Log.error("QTTAd::showBanner => Missing qttGame env"),!1)},n.prototype.hideBanner=function(){return window.qttGame?(t.Log.warn("QTTAd::hideBanner => invoke"),window.qttGame.hideBanner(),!0):(t.Log.error("QTTAd::hideBanner => Missing qttGame env"),!1)},n.prototype.showInterstitialAd=function(e){return this.showInteractAd(e)},n.prototype.showInteractAd=function(e){return window.qttGame?(t.Log.warn("QTTAd::showInteractAd => invoke"),window.qttGame.showHDReward({gametype:1,rewardtype:1,data:{title:"\u9053\u5177",url:"https://h5game.zhhainiao.com/cmplaysdk/qtt/gift.png"}}),e&&e(!0),!0):(t.Log.error("QTTAd::showInteractAd => Missing qttGame env"),e&&e(!1),!1)},n.prototype.showOpenGameAd=function(){return!1},n}();t.QTTV2Ad=c}(p||(p={})),function(t){var c=function(){function n(){this.mSIAOld=void 0}return n.prototype.init=function(e){this.mSIAOld=this.createSIAOld(),this.mSIAOld.init(e)},n.prototype.createSIAOld=function(){return t.Global.public.game_page==t.PAGE.BRICK_BALL?new t.SIAdOld:new t.SIAdOld_ima},n.prototype.loadInerstitialAd=function(){},n.prototype.loadRewardAd=function(){},n.prototype.startRewardVideo=function(e){return this.mSIAOld&&this.mSIAOld.startRewardVideo(e)},n.prototype.showBanner=function(){return this.mSIAOld&&this.mSIAOld.showBanner()},n.prototype.hideBanner=function(){return this.mSIAOld&&this.mSIAOld.hideBanner()},n.prototype.showOpenGameAd=function(){return this.mSIAOld&&this.mSIAOld.showOpenGameAd()},n.prototype.showInterstitialAd=function(e){return this.mSIAOld&&this.mSIAOld.showInterstitialAd(e)},n.prototype.isSIVerNew=function(){var e=window.shareitBridge.syncInvoke("PayPhoneFare","getDeviceInfo","");return 4040797<JSON.parse(e).app_ver},n}();t.SIAd=c}(p||(p={})),function(t){var c=function(){function n(){this.inerstitialJson={},this.rewardJson={}}return n.prototype.showOpenGameAd=function(){return!1},n.prototype.init=function(e){this.inerstitialJson={gameId:e.gameName,unitId:"gti"},this.rewardJson={gameId:e.gameName,unitId:"bqr"},this.loadRewardAd()},n.prototype.loadInerstitialAd=function(){},n.prototype.loadRewardAd=function(){try{if(this.canShowAd(this.rewardJson))return;window.shareitBridge.asyncInvoke("GameAd","loadRewardAd","adLoadCallback",JSON.stringify(this.rewardJson)),console.log("GameAd::loadRewardAd => ")}catch(e){console.error("loadRewardAd error")}},n.prototype.startRewardVideo=function(e){if(!window.shareitBridge||!this.canShowAd(this.rewardJson))return t.Log.error("ShareIt::startRewardVideo => show Reward error"),e&&e(!1),window.alert("\u6FC0\u52B1\u89C6\u9891\u5E7F\u544A\u5C55\u793A\u5931\u8D25"),this.loadRewardAd(),!1;t.Log.warn("ShareIt::startRewardVideo => invoke"),this.onActivityHide(),t.Global.data.mRewardVideoCallback=e;var o=window.shareitBridge.asyncInvoke("GameAd","showRewardAd","adShowCallback",JSON.stringify(this.rewardJson));return console.log("GameAd::startRewardVideo => "+o),this.onActivityShow(),!0},n.prototype.showInterstitialAd=function(e){if(!window.shareitBridge||!this.canShowAd(this.inerstitialJson))return t.Log.error("ShareIt::showInterstitialAd => show Interstitial error"),e&&e(!1),window.alert("\u63D2\u5C4F\u5E7F\u544A\u5C55\u793A\u5931\u8D25"),this.loadInerstitialAd(),!1;this.onActivityHide(),t.Global.data.mRewardVideoCallback=e;var o=window.shareitBridge.asyncInvoke("GameAd","showInterstitialAd","adShowCallback",JSON.stringify(this.inerstitialJson));return console.log("GameAd::showInterstitialAd => "+o),this.onActivityShow(),!1},n.prototype.canShowAd=function(e){var o=window.shareitBridge.syncInvoke("GameAd","canShowAd",JSON.stringify(e));return console.log("GameAd::canShowAd => "+o),o=="true"},n.prototype.onActivityHide=function(){window.onActivityHide&&window.onActivityHide()},n.prototype.onActivityShow=function(){window.onActivityShow&&window.onActivityShow()},n.prototype.showBanner=function(){return!1},n.prototype.hideBanner=function(){return!1},n}();t.SIAdNew=c}(p||(p={})),function(t){var c=function(){function n(){this.BigadContainer=void 0,this.adTagUrl=void 0,this.googleVideoAd=void 0,this.adCallback=void 0,this.current=void 0}return n.prototype.init=function(e){t.SysUtil.loadSDKScript("https://imasdk.googleapis.com/js/sdkloader/ima3.js",!1,function(){t.Log.error("SIAdOld_ima::loadSDKScript => ima3 is Ready")}),this.createContainer()},n.prototype.createContainer=function(){var e=document.createElement("script");e.src="https://imasdk.googleapis.com/js/sdkloader/outstream.js",document.getElementsByTagName("html")[0].appendChild(e);var o=window.innerHeight,i=window.innerWidth;this.BigadContainer=document.createElement("DIV"),this.BigadContainer.id="BigadContainer",this.BigadContainer.style.width=i+"px",this.BigadContainer.style.height=o+"px",this.BigadContainer.style.position="absolute",this.BigadContainer.style.top="0",this.BigadContainer.style.left="100%",this.BigadContainer.style.zIndex="99999999999",this.BigadContainer.style.backgroundColor="#000",document.getElementsByTagName("body")[0].appendChild(this.BigadContainer);var a=document.createElement("DIV");a.style.width=i+"px",a.style.height=o+"px",a.id="adContainer",this.BigadContainer.appendChild(a),a.style.position="absolute",a.style.top="0",a.style.left="0",a.style.zIndex="9999999999"},n.prototype.startRewardVideo=function(e){var o=this;console.log("SIAdOld::onload => "+t.Global.public.game_page),this.adTagUrl=n.getAdTagUrlByPage();var i=document.getElementById("adContainer");return i||((i=document.createElement("DIV")).id="adContainer"),this.adCallback=e,this.googleVideoAd=new google.outstream.AdsController(i,this.onAdLoaded.bind(this),this.onDone.bind(this)),setTimeout(function(){o.dp_share()},1e3),t.Infoc.reportAction(t.ACTION.INTERSTITIAL_AD_REQUEST),!1},n.prototype.requestAds=function(){this.current=Date.now(),this.googleVideoAd.initialize(),console.log("SIAdOld::requestAds => "),this.googleVideoAd.requestAds(this.adTagUrl)},n.prototype.onAdLoaded=function(){console.log("SIAdOld::onAdLoaded => "),this.googleVideoAd.showAd()},n.prototype.onDone=function(){this.BigadContainer.style.left="100%",this.BigadContainer.style.transition="left 0.8s",this.BigadContainer.style.webkitTransition="left 0.8s",this.adCallback&&this.adCallback(!0),Date.now()-this.current<=3e3?t.Infoc.reportAction(t.ACTION.INTERSTITIAL_AD_ERROR):t.Infoc.reportAction(t.ACTION.INTERSTITIAL_AD_SHOW),console.log("SIAdOld::onDone => ")},n.prototype.dp_share=function(){this.requestAds(),this.BigadContainer.style.display="block",this.BigadContainer.style.left="0",this.BigadContainer.style.transition="left 0.8s",this.BigadContainer.style.webkitTransition="left 0.8s"},n.prototype.showOpenGameAd=function(){return this.startRewardVideo(void 0)},n.prototype.showBanner=function(){return!1},n.prototype.hideBanner=function(){return!1},n.prototype.showInterstitialAd=function(e){return this.startRewardVideo(e)},n.getAdTagUrlByPage=function(){var e=void 0;switch(t.Global.public.game_page){case t.PAGE.ROLL_SKY:e="https://googleads.g.doubleclick.net/pagead/ads?ad_type=video_image&client=ca-games-pub-8908317842209223&description_url=http%3A%2F%2Frolling+sky&channel=2600299995&videoad_start_delay=0&hl=en&max_ad_duration=30000";break;case t.PAGE.BRICK_BALL:e="https://googleads.g.doubleclick.net/pagead/ads?ad_type=video_image&client=ca-games-pub-8908317842209223&description_url=http%3A%2F%2Fcmcm.com&channel=6320167124&videoad_start_delay=0&hl=en&max_ad_duration=30000";break;case t.PAGE.DANC_LINE:e="https://googleads.g.doubleclick.net/pagead/ads?ad_type=video_image&client=ca-games-pub-8908317842209223&description_url=http%3A%2F%2Fh5game.zhhainiao.com&channel=9743706114&videoad_start_delay=0&hl=en&max_ad_duration=30000";break;case t.PAGE.PIANO_TILES:e="https://googleads.g.doubleclick.net/pagead/ads?ad_type=video_image&client=ca-games-pub-8908317842209223&description_url=http%3A%2F%2Fh5game.zhhainiao.com&channel=8789663194&videoad_start_delay=0&hl=en&max_ad_duration=30000";break;case t.PAGE.FARM:e="https://googleads.g.doubleclick.net/pagead/ads?ad_type=video_image&client=ca-games-pub-8908317842209223&description_url=http%3A%2F%2Fh5game.zhhainiao.com&channel=6466752186&videoad_start_delay=0&hl=en&max_ad_duration=30000";break;case t.PAGE.GAME_2048:e="https://googleads.g.doubleclick.net/pagead/ads?ad_type=video_image&client=ca-games-pub-8908317842209223&description_url=http%3A%2F%2Fh5game.zhhainiao.com&channel=5973241248&videoad_start_delay=0&hl=en&max_ad_duration=30000";break;case t.PAGE.DEEP_FISH:e="https://googleads.g.doubleclick.net/pagead/ads?ad_type=video_image&client=ca-games-pub-8908317842209223&description_url=http%3A%2F%2Fh5game.zhhainiao.com&channel=8214948128&videoad_start_delay=0&hl=en&max_ad_duration=30000";break;case t.PAGE.FRUIT_NINJA:e="https://googleads.g.doubleclick.net/pagead/ads?ad_type=video_image&client=ca-games-pub-8908317842209223&description_url=http%3A%2F%2Fh5game.zhhainiao.com&channel=6348645762&videoad_start_delay=0&hl=en&max_ad_duration=30000";break;case t.PAGE.FOOTBALL:e="https://googleads.g.doubleclick.net/pagead/ads?ad_type=video_image&client=ca-games-pub-8908317842209223&description_url=http%3A%2F%2Fh5game.zhhainiao.com&channel=3912794931&videoad_start_delay=0&hl=en&max_ad_duration=30000";break;case t.PAGE.SAIL_LEGEND:e="https://googleads.g.doubleclick.net/pagead/ads?ad_type=video_image&client=ca-games-pub-8908317842209223&description_url=http%3A%2F%2Fh5game.zhhainiao.com&channel=3074302084&videoad_start_delay=0&hl=en&max_ad_duration=30000";break;case t.PAGE.STARS_2:e="https://googleads.g.doubleclick.net/pagead/ads?ad_type=video_image&client=ca-games-pub-8908317842209223&description_url=http%3A%2F%2Fh5game.zhhainiao.com&channel=9552134428&videoad_start_delay=0&hl=en&max_ad_duration=30000";break;case t.PAGE.SNAKE_BLOCK:e="https://googleads.g.doubleclick.net/pagead/ads?ad_type=video_image&client=ca-games-pub-8908317842209223&description_url=http%3A%2F%2Fh5game.zhhainiao.com&channel=7432349494&videoad_start_delay=0&hl=en&max_ad_duration=30000";break;default:e="https://googleads.g.doubleclick.net/pagead/ads?ad_type=video_image&client=ca-games-pub-8908317842209223&description_url=http%3A%2F%2Fcmcm.com&channel=6320167124&videoad_start_delay=0&hl=en&max_ad_duration=30000"}return e},n}();t.SIAdOld=c}(p||(p={})),function(t){var c=function(){function n(){this.BigadContainer=void 0,this.adContainer=void 0,this.adHeight=document.body.clientHeight||640,this.adWidth=document.body.clientWidth||360}return n.prototype.init=function(e){t.SysUtil.loadSDKScript("https://imasdk.googleapis.com/js/sdkloader/ima3.js",!1,function(){t.Log.error("SIAdOld_ima::loadSDKScript => ima3 is Ready")}),this.createContainer()},n.prototype.createContainer=function(){this.BigadContainer=document.createElement("DIV"),this.BigadContainer.id="mainContainer",this.BigadContainer.style.display="none",this.BigadContainer.style.position="relative",this.BigadContainer.style.width="1px",this.BigadContainer.style.height="1px",document.getElementsByTagName("body")[0].appendChild(this.BigadContainer);var e=document.createElement("DIV");e.id="content",e.style.position="absolute",e.style.top="0",e.style.left="0",e.style.width="100%",e.style.height="100%",this.videoContent=document.createElement("video"),this.videoContent.id="contentElement",this.videoContent.style.width="100%",this.videoContent.style.height="100%",this.videoContent.style.overflow="hidden",e.appendChild(this.videoContent),this.BigadContainer.appendChild(e),this.adContainer=document.createElement("DIV"),this.adContainer.id="adContainer",this.adContainer.style.position="absolute",this.adContainer.style.top="0",this.adContainer.style.left="0",this.adContainer.style.width="100%",this.adContainer.style.height="100%",this.adContainer.style.zIndex="9999999999",this.adContainer.style.background="#000",this.BigadContainer.appendChild(this.adContainer)},n.prototype.createGoogle=function(){this.adDisplayContainer=new google.ima.AdDisplayContainer(document.getElementById("adContainer"),this.videoContent),this.adsLoader=new google.ima.AdsLoader(this.adDisplayContainer),this.adsLoader.getSettings().setDisableCustomPlaybackForIOS10Plus(!0),this.adsLoader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.onAdsManagerLoaded.bind(this),!1),this.adsLoader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdError.bind(this),!1),this.videoContent.onended=function(){this.adsLoader.contentComplete()};var e=new google.ima.AdsRequest;e.adTagUrl=t.SIAdOld.getAdTagUrlByPage(),e.linearAdSlotWidth=this.adWidth,e.linearAdSlotHeight=this.adHeight,e.nonLinearAdSlotWidth=this.adWidth,e.nonLinearAdSlotHeight=this.adHeight,this.adsLoader.requestAds(e),t.Log.error("SIAdOld_ima::createGoogle =>")},n.prototype.startRewardVideo=function(e){return t.Log.error("SIAdOld_ima::startRewardVideo 1=> "),this.createGoogle(),this.mADCallback=e,!1},n.prototype.playAds=function(){if(this.adsManager){this.videoContent.load(),this.adDisplayContainer.initialize(),t.Infoc.reportAction(t.ACTION.INTERSTITIAL_AD_REQUEST);try{var e=document.body.clientWidth||360,o=document.body.clientHeight||640;this.adsManager.init(e,o,google.ima.ViewMode.NORMAL),this.adsManager.start()}catch(i){t.Log.error("SIAdOld_ima::startRewardVideo 2=> "+i),t.Infoc.reportAction(t.ACTION.INTERSTITIAL_AD_ERROR),this.videoContent.play()}}else t.Log.error("SIAdOld_ima::startRewardVideo 3=> ")},n.prototype.onAdsManagerLoaded=function(e){t.Log.error("SIAdOld_ima::onAdsManagerLoaded 1=> ");var o=new google.ima.AdsRenderingSettings;o.restoreCustomPlaybackStateOnAdBreakComplete=!0,this.adsManager=e.getAdsManager(this.videoContent,o),t.Log.error("SIAdOld_ima::onAdsManagerLoaded 2=> "),this.adsManager.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdError.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,this.onContentPauseRequested.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,this.onContentResumeRequested.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.ALL_ADS_COMPLETED,this.onAdEvent.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.LOADED,this.onAdEvent.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.STARTED,this.onAdEvent.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.COMPLETE,this.onAdEvent.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.SKIPPED,this.onAdEvent.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.USER_CLOSE,this.onAdEvent.bind(this)),this.playAds()},n.prototype.onAdEvent=function(e){t.Log.error("SIAdOld_ima::onAdEvent 1=> "+e.type);var o=e.getAd(),i=this;switch(e.type){case google.ima.AdEvent.Type.LOADED:o.isLinear()||i.videoContent.play();break;case google.ima.AdEvent.Type.STARTED:o.isLinear()&&(i.intervalTimer=setInterval(function(){var a=i.adsManager.getRemainingTime();console.log("remainingTime",a),a<=0&&(clearInterval(i.intervalTimer),i.intervalTimer=null,i.BigadContainer.style.display="none")},300)),i.BigadContainer.style.display="block",t.Infoc.reportAction(t.ACTION.INTERSTITIAL_AD_SHOW);break;case google.ima.AdEvent.Type.COMPLETE:case google.ima.AdEvent.Type.ALL_ADS_COMPLETED:i.BigadContainer.style.display="none",t.Infoc.reportAction(t.ACTION.INTERSTITIAL_AD_DONE),i.mADCallback&&i.mADCallback(!0);break;case google.ima.AdEvent.Type.SKIPPED:case google.ima.AdEvent.Type.USER_CLOSE:i.intervalTimer&&(clearInterval(i.intervalTimer),i.intervalTimer=null),i.BigadContainer.style.display="none"}},n.prototype.onAdError=function(e){var o=e.getError();t.Infoc.reportErrMsg("",o.getErrorCode(),""),t.Log.error("SIAdOld_ima::onAdError => "+e.getError()),this.adsManager&&this.adsManager.destroy()},n.prototype.onContentPauseRequested=function(){this.videoContent.pause(),t.Log.error("SIAdOld_ima::onContentPauseRequested=> ")},n.prototype.onContentResumeRequested=function(){this.videoContent.play(),t.Log.error("SIAdOld_ima::onContentResumeRequested=> ")},n.prototype.showBanner=function(){return!1},n.prototype.hideBanner=function(){return!1},n.prototype.showOpenGameAd=function(){return this.startRewardVideo(void 0)},n.prototype.showInterstitialAd=function(e){return this.startRewardVideo(e)},n}();t.SIAdOld_ima=c}(p||(p={})),function(t){var c;(c=t.LoginType||(t.LoginType={}))[c.LIEBAO=1]="LIEBAO",c[c.QQ=2]="QQ",c[c.WEIXIN=3]="WEIXIN",c[c.PHONE_NUM=4]="PHONE_NUM",c[c.QTT=5]="QTT"}(p||(p={})),function(t){var c=function(){function n(){}return n.getPlatform=function(){return n.POKI},n.detect=function(){var e=t.getQueryString("platform","default");return e!="qtt"||t.getQueryString("ticket","default")=="default"&&!/qukan/i.test(navigator.userAgent)?t.getQueryString("agent","default")=="pps"&&t.getQueryString("user_id","default")!="default"?n.IQIYI:e=="gdt"?n.GDT:e=="poki"?n.POKI:e=="shareit"?n.SHAREIT:n.CMPLAY:n.QTT},n.getXAID=function(){var e=window.localStorage.getItem("cmplay_xaid");return e||(e=t.SysUtil.generateXAID(),t.Log.warn("Generate XAID => "+e),window.localStorage.setItem("cmplay_xaid",e+"")),e},n.CMPLAY=0,n.QTT=1,n.GDT=2,n.POKI=3,n.IQIYI=4,n.SHAREIT=5,n.mPlatform=void 0,n}();t.Platform=c}(p||(p={})),function(t){var c=void 0,n=function(){function o(){}return o.getHost=function(){return c!=null?c:c=t.Global.debugInfoc?"http://111.230.84.242/g/v1":t.Global.isOversea?"https://helpgamemoneysdkov1.cheetahfun.net/g/v1":"https://helpgamemoneysdk1.ksmobile.com/g/v1"},o.parseData=function(i){if(!i)return-1;var a=i.indexOf("result=");if(a<0)return-2;if(a+7>=i.length)return-3;var r=i.charAt(a+7);return parseInt(r)},o.getCommonData=function(){return t.Global.isOversea?"product_no=416&public_index=1&gm_id="+t.Global.public.xaid+"&ver=0&cn="+t.Global.public.cn+"&brand="+t.Global.public.brand+"&model="+t.Global.public.model+"&api_level=0&rom=0&rom_ver=0&cube_ver=0&uptime="+t.SysUtil.getTimeSeconds()+"&build_time=0":"product_no=394&public_index=1&xaid="+t.Global.public.xaid+"&ver=0&cn="+t.Global.public.cn+"&mcc=0&mnc=0&brand="+t.Global.public.brand+"&model="+t.Global.public.model+"&api_level=0&rom=0&rom_ver=0&uptime="+t.SysUtil.getTimeSeconds()+"&accountid="+t.Global.public.accountid+"&cube_ver=0&iid=0&imei=0&mac=0"},o.report=function(i,a,r){var d=o.getCommonData(),u=o.getHost()+"/?"+d+"&"+a,m=encodeURI(u),h=Date.now(),f=t.Global.debugInfoc?a:"";o.httpRequest({url:m,method:"GET",success:function(w,s){var l=Date.now();s?o.parseData(s)==1?(t.Log.log("InfocImpl::["+i+"] "+f+" "+(l-h)+"ms => SUCCESS"),setTimeout(function(){var g=t.CMInfocCache.pop();g&&0<g.retry&&o.report(g.id,g.info,g.retry-1)},0)):(t.Log.warn(s),0<r?(t.Log.log("InfocImpl::["+i+"] "+f+" "+(l-h)+"ms "+r+" => FAILED1"),t.CMInfocCache.push(i,a,r-1)):t.Log.log("InfocImpl::["+i+"] "+f+" "+(l-h)+"ms "+r+" => FAILED1 DROP")):0<r?(t.Log.log("InfocImpl::["+i+"] "+f+" "+(l-h)+"ms "+r+" => FAILED2"),t.CMInfocCache.push(i,a,r-1)):t.Log.log("InfocImpl::["+i+"] "+f+" "+(l-h)+"ms "+r+" => FAILED2 DROP")},fail:function(w,s){0<r?(t.Log.error("InfocImpl::table:"+i+" code:"+w+" => FAILED3"),t.CMInfocCache.push(i,a,r-1)):t.Log.error("InfocImpl::table:"+i+" code:"+w+" => FAILED3 DROP")}})},o.httpRequest=function(i,a){a===void 0&&(a=3);var r=new XMLHttpRequest;for(var d in r.open(i.method,i.url),i.header)r.setRequestHeader(d,i.header[d]);r.onreadystatechange=function(){if(r.readyState==4)if(r.status==200){if(i.success)if(i.dataType=="json")try{i.success(r.status,JSON.parse(r.responseText),r.getAllResponseHeaders())}catch(u){i.success(r.status,r.responseText,r.getAllResponseHeaders())}else i.success(r.status,r.responseText,r.getAllResponseHeaders())}else 1<a?o.httpRequest(i,a-1):i.fail&&i.fail(r.status,r.responseText)},r.send(JSON.stringify(i.data))},o}();t.CMInfocImpl=n;var e=function(){function o(){this.mMap=new t.Dictionary}return o.prototype.set=function(i,a){if(i==null||i==null)throw new Error("ERROR: key cannot be null or undefined!");if(a==null||a==null)throw new Error("ERROR: value cannot be null or undefined!");return this.mMap.put(i,a),this},o.prototype.buildDataString=function(i){for(var a="business_index="+i+"&",r=this.mMap.size(),d=this.mMap.getPairs(),u=0;u<r;u++){var m=d[u];a+=m.key+"="+m.value+"&"}return 1<a.length&&(a=a.slice(0,a.length-1)),a},o.prototype.report=function(i){var a=this.buildDataString(i),r=t.SysUtil.getTimeSeconds();Math.abs(r-t.Global.initTime)<3?t.CMInfocCache.push(i,a,10):setTimeout(function(){n.report(i,a,10)},0)},o}();t.CMInfoc=e}(p||(p={})),function(t){var c=[],n=void 0,e=function(){function o(){}return o.push=function(i,a,r){o.resetWakeupTimer();var d={id:i,info:a,retry:r};c.push(d),1e3<c.length&&c.pop()},o.pop=function(){return c.shift()},o.resetWakeupTimer=function(){n&&(clearTimeout(n),n=void 0),n=setTimeout(function(){var i=o.pop();i&&t.CMInfocImpl.report(i.id,i.info,i.retry)},5e3)},o}();t.CMInfocCache=e}(p||(p={})),function(t){var c=function(){function n(){}return n.report=function(e){t.Global.public.game_page<1&&t.Log.error("###### ERROR: Invoke CMPlay.init before reportAction !!! ######");var o=new t.CMInfoc;o.set("uptime2",t.SysUtil.getTimeSeconds()),o.set("page",t.Global.public.game_page),o.set("action",e),o.set("x5",0),o.set("game_ver",t.Global.public.game_ver),o.set("sdk_ver",t.SDK_VER),o.set("game_type",""),o.set("network","0"),t.Global.isOversea?o.report(104):(o.set("gamename",t.Global.public.game_name),o.report(121))},n}();t.cmplay_action=c}(p||(p={})),function(t){var c=function(){function n(){}return n.report=function(e,o,i){t.Global.public.game_page<1&&t.Log.error("###### ERROR: Invoke CMPlay.init before reportAction !!! ######");var a=new t.CMInfoc;a.set("uptime2",t.SysUtil.getTimeSeconds()),a.set("url",e),a.set("errcode",o),a.set("errmsg",i),a.set("network","0"),t.Global.isOversea,a.report(103)},n}();t.cmplay_error=c}(p||(p={})),function(t){var c=function(){function n(){this.mAd=void 0}return n.prototype.init=function(e){this.mAd=new t.CMAd,this.mAd.init(e),window.RewardVideo&&window.RewardVideo.setGameName&&(t.Log.warn("init setGameName => "+e.gameName),window.RewardVideo.setGameName(e.gameName))},n.prototype.login=function(e){var o=t.getSystemInfoSync();!o.gameToken||o.gameToken.length<10?(t.Log.error("CMPlay::Missing gameToken!!!"),e&&e(!1,void 0,void 0,0,0)):t.CMService.loginCMPlay({callback:function(i,a,r,d,u){a&&(t.Global.data.mCMPlayerId=a),r&&(t.Global.data.mCMToken=r),e&&e(i,a,r,d,u)}})},n.prototype.startRewardVideo=function(e){return this.mAd.startRewardVideo(e)},n.prototype.showOpenGameAd=function(){return this.mAd.showOpenGameAd()},n.prototype.showBanner=function(){return this.mAd.showBanner()},n.prototype.hideBanner=function(){return this.mAd.hideBanner()},n.prototype.showInterstitialAd=function(e){return this.mAd.showInterstitialAd()},n.prototype.getAppID=function(){if(window.GameJs&&window.GameJs.getAppID)return window.GameJs.getAppID()},n.prototype.getUID=function(){return window.GameJs&&window.GameJs.getUID?window.GameJs.getUID():t.Platform.getXAID()},n.prototype.getGameToken=function(){return window.GameJs&&window.GameJs.getGameToken?window.GameJs.getGameToken():""},n.prototype.getPayload=function(){return""},n.prototype.setStorageList=function(e,o){t.CMService.setStorage({kvDatas:e,success:function(i){o&&o(!0)},fail:function(i){t.Log.error("setStorageList => failed"),o&&o(!1)}})},n.prototype.getStroageList=function(e,o){t.CMService.getStorage({keys:e,success:function(i){i&&i.result&&i.result.data?o&&o(i.result.data):o&&o(void 0)},fail:function(i){t.Log.error("getStroageList => failed"),o&&o(void 0)}})},n.prototype.delStroageList=function(e,o){t.CMService.delStorage({keys:e,success:function(i){o&&o(!0)},fail:function(i){t.Log.error("delStroageList => failed"),o&&o(!1)}})},n.prototype.onGameLoadStart=function(){},n.prototype.onGameLoadFinished=function(){},n.prototype.onGameMainStart=function(){},n.prototype.onGameStart=function(){},n.prototype.onGameStop=function(){},n.prototype.onGameLevelPass=function(e){},n}();t.CM=c}(p||(p={})),function(t){var c=function(){function n(){this.mCMAPI=void 0,this.mAd=void 0,this.mGameToken=void 0}return n.prototype.init=function(){var e=this,o=this.getUID();this.mAd=new t.GDTAd,this.mAd.init(),this.mCMAPI=new t.CMAPI({vmframe:"https://superman.cmcm.com/cmplaysdk/gdt/gdt.js",appid:"guangdiantong_gamecenter",appkey:"201903046679381196927",host:"gdt-gc-gateway-svc.beike.cn",uuid:o}),this.mCMAPI.getGameToken(function(i){t.Log.warn("GDT::init => gameToken: "+i),e.mGameToken=i})},n.prototype.login=function(e){var o=this,i=this.mCMAPI.getTokenState();i==t.TokenState.TOKEN_READY?(t.Global.data.mSystemInfo.gameToken=this.getGameToken(),t.Log.log("GDT::login => gameToken:"+t.Global.data.mSystemInfo.gameToken),t.CMService.loginCMPlay({callback:function(a,r,d,u,m){r&&(t.Global.data.mCMPlayerId=r),d&&(t.Global.data.mCMToken=d),e&&e(a,r,d,u,m)}})):i==t.TokenState.TOKEN_FAILD?(t.Log.error("GDT::login => failed"),e&&e(!1,void 0,void 0,0,0)):(t.Log.warn("GDT::login => delay, tokenState:"+i),setTimeout(function(){o.login(e)},100))},n.prototype.startRewardVideo=function(e){return this.mAd.startRewardVideo(e)},n.prototype.showOpenGameAd=function(){return this.mAd.showOpenGameAd()},n.prototype.showBanner=function(){return this.mAd.showBanner()},n.prototype.hideBanner=function(){return this.mAd.hideBanner()},n.prototype.showInterstitialAd=function(e){var o=this.getInterstitalAdCount();return this.plusInterstitalAdCount(),t.Log.warn("GDT::showInterstitialAd refCount="+o),o%3==2?this.mAd.showInterstitialAd(e):(e&&e(!1),!1)},n.prototype.getAppID=function(){return"gdt"},n.prototype.getUID=function(){var e=t.getQueryString("uuid","");return e!=""&&10<e.length?e:t.Platform.getXAID()},n.prototype.getGameToken=function(){return this.mGameToken},n.prototype.getPayload=function(){return this.mCMAPI.getPayload()},n.prototype.setStorageList=function(e,o){t.CMService.setStorage({kvDatas:e,success:function(i){o&&o(!0)},fail:function(i){t.Log.error("GDT::setStorageList => failed"),o&&o(!1)}})},n.prototype.getStroageList=function(e,o){t.CMService.getStorage({keys:e,success:function(i){i&&i.result&&i.result.data?o&&o(i.result.data):o&&o(void 0)},fail:function(i){t.Log.error("GDT::getStroageList => failed"),o&&o(void 0)}})},n.prototype.delStroageList=function(e,o){t.CMService.delStorage({keys:e,success:function(i){o&&o(!0)},fail:function(i){t.Log.error("GDT::delStroageList => failed"),o&&o(!1)}})},n.prototype.getInterstitalAdCount=function(){return Number(window.localStorage.getItem("gdt_interstital_ad_pref")||"0")},n.prototype.plusInterstitalAdCount=function(){var e=this.getInterstitalAdCount()+1;window.localStorage.setItem("gdt_interstital_ad_pref",e+"")},n.prototype.onGameLoadStart=function(){},n.prototype.onGameLoadFinished=function(){},n.prototype.onGameMainStart=function(){},n.prototype.onGameStart=function(){},n.prototype.onGameStop=function(){},n.prototype.onGameLevelPass=function(e){},n}();t.GDT=c}(p||(p={})),function(t){var c=function(){return"iqiyi_gamecenter_create_role_"+t.Global.public.game_page},n=function(){function e(){this.mCMAPI=void 0,this.mAd=void 0,this.mGameToken=void 0}return e.prototype.init=function(){var o=this,i=this.getUID();this.mAd=new t.IQIYIAd,this.mAd.init(),this.mCMAPI=new t.CMAPI({vmframe:"https://superman.cmcm.com/cmplaysdk/api/iqiyi.js",appid:"iqiyi_gamecenter",appkey:"201903046679381196927",host:"iqiyigame-gateway-svc.beike.cn",uuid:i}),this.mCMAPI.getGameToken(function(a){t.Log.warn("IQIYI::init => gameToken: "+a),o.mGameToken=a})},e.prototype.login=function(o){var i=this,a=this.mCMAPI.getTokenState();a==t.TokenState.TOKEN_READY?(t.Global.data.mSystemInfo.gameToken=this.getGameToken(),t.Log.log("IQIYI::login => gameToken:"+t.Global.data.mSystemInfo.gameToken),t.CMService.loginCMPlay({callback:function(r,d,u,m,h){d&&(t.Global.data.mCMPlayerId=d),u&&(t.Global.data.mCMToken=u),o&&o(r,d,u,m,h)}})):a==t.TokenState.TOKEN_FAILD?(t.Log.error("IQIYI::login => failed"),o&&o(!1,void 0,void 0,0,0)):(t.Log.warn("IQIYI::login => delay"),setTimeout(function(){i.login(o)},100))},e.prototype.startRewardVideo=function(o){return this.mAd.startRewardVideo(o)},e.prototype.showOpenGameAd=function(){return this.mAd.showOpenGameAd()},e.prototype.showBanner=function(){return this.mAd.showBanner()},e.prototype.hideBanner=function(){return this.mAd.hideBanner()},e.prototype.showInterstitialAd=function(o){var i=this.getInterstitalAdCount();return this.plusInterstitalAdCount(),t.Log.warn("IQIYI::showInterstitialAd refCount="+i),i%3==2?this.mAd.showInterstitialAd(o):(o&&o(!1),!1)},e.prototype.getAppID=function(){return"iqiyi"},e.prototype.getUID=function(){var o=t.getQueryString("user_id","");return o!=""&&10<o.length?o:t.Platform.getXAID()},e.prototype.getGameToken=function(){return this.mGameToken},e.prototype.getPayload=function(){return this.mCMAPI.getPayload()},e.prototype.setStorageList=function(o,i){t.CMService.setStorage({kvDatas:o,success:function(a){i&&i(!0)},fail:function(a){t.Log.error("IQIYI::setStorageList => failed"),i&&i(!1)}})},e.prototype.getStroageList=function(o,i){t.CMService.getStorage({keys:o,success:function(a){a&&a.result&&a.result.data?i&&i(a.result.data):i&&i(void 0)},fail:function(a){t.Log.error("IQIYI::getStroageList => failed"),i&&i(void 0)}})},e.prototype.delStroageList=function(o,i){t.CMService.delStorage({keys:o,success:function(a){i&&i(!0)},fail:function(a){t.Log.error("IQIYI::delStroageList => failed"),i&&i(!1)}})},e.prototype.getInterstitalAdCount=function(){return Number(window.localStorage.getItem("iqiyi_interstital_ad_pref")||"0")},e.prototype.plusInterstitalAdCount=function(){var o=this.getInterstitalAdCount()+1;window.localStorage.setItem("iqiyi_interstital_ad_pref",o+"")},e.prototype.onGameLoadStart=function(){},e.prototype.onGameLoadFinished=function(){},e.prototype.onGameMainStart=function(){try{window.top.postMessage({type:"dataCount",msg:"server"},"*"),console.warn("IQIYI::onGameMainStart => post msg['server']")}catch(o){}if(this.isRoleCreated())console.warn("IQIYI::onGameMainStart => skip post msg['role'] for created before");else try{window.top.postMessage({type:"dataCount",msg:"role"},"*"),this.setRoleCreated(),console.warn("IQIYI::onGameMainStart => post msg['role']")}catch(o){}},e.prototype.onGameStart=function(){try{window.top.postMessage({type:"dataCount",msg:"start"},"*"),console.warn("IQIYI::onGameStart => post msg['start']")}catch(o){console.error("IQIYI::onGameMainStart => ERROR:"+JSON.stringify(o.stack))}},e.prototype.onGameStop=function(){},e.prototype.onGameLevelPass=function(o){},e.prototype.isRoleCreated=function(){return(window.localStorage.getItem(c())||"0")!="0"},e.prototype.setRoleCreated=function(){window.localStorage.setItem(c(),"1")},e}();t.IQIYI=n}(p||(p={})),function(t){var c=function(){function n(){this.mCMAPI=void 0,this.mAd=void 0,this.mPokiAd=void 0,this.mGameToken=void 0}return n.prototype.init=function(){var e=this,o=this.getUID();this.mAd=this.mPokiAd=new t.POKIAd,this.mAd.init(),this.mCMAPI=new t.CMAPI({vmframe:"https://h5game.zhhainiao.com/cmplaysdk/poki/poki.js",appid:"poki_game_center",appkey:"201903046679381196927",host:"poki-gateway.xyx-svc.zhhainiao.com",uuid:o}),this.mCMAPI.getGameToken(function(i){t.Log.warn("POKI::init => gameToken: "+i),e.mGameToken=i})},n.prototype.login=function(e){var o=this,i=this.mCMAPI.getTokenState();i==t.TokenState.TOKEN_READY?(t.Global.data.mSystemInfo.gameToken=this.getGameToken(),t.Log.log("POKI::login => gameToken:"+t.Global.data.mSystemInfo.gameToken),t.CMService.loginCMPlay({callback:function(a,r,d,u,m){r&&(t.Global.data.mCMPlayerId=r),d&&(t.Global.data.mCMToken=d),e&&e(a,r,d,u,m)}})):i==t.TokenState.TOKEN_FAILD?(t.Log.error("POKI::login => failed"),e&&e(!1,void 0,void 0,0,0)):(t.Log.warn("POKI::login => delay"),setTimeout(function(){o.login(e)},100))},n.prototype.startRewardVideo=function(e){return this.mAd.startRewardVideo(e)},n.prototype.showOpenGameAd=function(){return this.mAd.showOpenGameAd()},n.prototype.showBanner=function(){return this.mAd.showBanner()},n.prototype.hideBanner=function(){return this.mAd.hideBanner()},n.prototype.showInterstitialAd=function(e){var o=this.getInterstitalAdCount();return this.plusInterstitalAdCount(),t.Log.warn("POKI::showInterstitialAd refCount="+o),o%2==2?this.mAd.showInterstitialAd(e):(e&&e(!1),!1)},n.prototype.getAppID=function(){return"poki"},n.prototype.getUID=function(){return t.Platform.getXAID()},n.prototype.getGameToken=function(){return this.mGameToken},n.prototype.getPayload=function(){return this.mCMAPI.getPayload()},n.prototype.setStorageList=function(e,o){t.CMService.setStorage({kvDatas:e,success:function(i){o&&o(!0)},fail:function(i){t.Log.error("POKI::setStorageList => failed"),o&&o(!1)}})},n.prototype.getStroageList=function(e,o){t.CMService.getStorage({keys:e,success:function(i){i&&i.result&&i.result.data?o&&o(i.result.data):o&&o(void 0)},fail:function(i){t.Log.error("POKI::getStroageList => failed"),o&&o(void 0)}})},n.prototype.delStroageList=function(e,o){t.CMService.delStorage({keys:e,success:function(i){o&&o(!0)},fail:function(i){t.Log.error("POKI::delStroageList => failed"),o&&o(!1)}})},n.prototype.getInterstitalAdCount=function(){return Number(window.localStorage.getItem("poki_interstital_ad_pref")||"0")},n.prototype.plusInterstitalAdCount=function(){var e=this.getInterstitalAdCount()+1;window.localStorage.setItem("poki_interstital_ad_pref",e+"")},n.prototype.onGameLoadStart=function(){this.mPokiAd.gameLoadingStart()},n.prototype.onGameLoadFinished=function(){this.mPokiAd.gameLoadingFinished()},n.prototype.onGameMainStart=function(){},n.prototype.onGameStart=function(){this.mPokiAd.gamePlayStart()},n.prototype.onGameStop=function(){this.mPokiAd.gamePlayStop()},n.prototype.onGameLevelPass=function(e){var o=this.getHappyIntensity(e);t.Log.warn("POKI::onGameLevelPass => happyIntensity:"+o),0<o&&this.mPokiAd.happyTime(o)},n.prototype.getHappyIntensity=function(e){var o="_"+e,i=window.localStorage.getItem("poki_level_pass")||"";if(i.indexOf(o)<0){var a=o+","+i;window.localStorage.setItem("poki_level_pass",a);var r=.1+.1*e;return .6<r&&(r=.6),r}return 0},n}();t.POKI=c}(p||(p={})),function(t){var c=["a3BWxTMAGrA9","a3BWxSuGte5d","a3BWxX98eGXS","a3BWxY9DwmEm","a3CScC7gcqEu"],n=function(){function e(){this.mCMAPI=void 0,this.mAd=void 0,this.mGameToken=void 0,this.mOpenID="0",this.mAppID="",this.mGameName="",this.loadComplete=!1,this.loadingFinished=!1}return e.prototype.init=function(){var o=this,i=this.getUID();this.mAppID=t.getQueryString("appid",""),this.mGameName=t.getQueryString("app_name","");var a=t.getQueryString("ticket","");c.indexOf(this.mAppID)!=-1?this.mAd=new t.QTTV2Ad:this.mAd=new t.QTTAd,this.mAd.init();var r={platform:"qtt",ticket:a,appid:this.mAppID};this.mCMAPI=new t.CMAPI({vmframe:"https://superman.cmcm.com/cmplaysdk/qtt/qutoutiao.js",appid:"qutoutiao",appkey:"201903046679381196927",host:"qtt-xyx-sdk-gateway-svc.beike.cn",uuid:i,loginType:t.LoginType.QTT,loginParams:r}),this.mCMAPI.getGameToken(function(d){t.Log.warn("QTT::init => gameToken: "+d),o.mGameToken=d;try{var u=o.getPayload();if(u){var m=JSON.parse(u);m&&m.union_id&&(t.Global.public.accountid=m.union_id),m&&m.open_id&&(o.mOpenID=m.open_id)}}catch(h){}}),t.Log.warn("appid => "+this.mAppID),t.Log.warn("ticket => "+a)},e.prototype.login=function(o){var i=this,a=this.mCMAPI.getTokenState();a==t.TokenState.TOKEN_READY?(t.Global.data.mSystemInfo.gameToken=this.getGameToken(),t.Log.log("QTT::login => gameToken:"+t.Global.data.mSystemInfo.gameToken),t.CMService.loginCMPlay({callback:function(r,d,u,m,h){d&&(t.Global.data.mCMPlayerId=d),u&&(t.Global.data.mCMToken=u),o&&o(r,d,u,m,h)}})):a==t.TokenState.TOKEN_FAILD?(t.Log.error("QTT::login => failed"),o&&o(!1,void 0,void 0,0,0)):(t.Log.warn("QTT::login => delay"),setTimeout(function(){i.login(o)},100))},e.prototype.startRewardVideo=function(o){return this.mAd.startRewardVideo(o)},e.prototype.showOpenGameAd=function(){return this.mAd.showOpenGameAd()},e.prototype.showBanner=function(){return this.mAd.showBanner()},e.prototype.hideBanner=function(){return this.mAd.hideBanner()},e.prototype.showInterstitialAd=function(o){var i=this.getInterstitalAdCount();return this.plusInterstitalAdCount(),t.Log.warn("QTT::showInterstitialAd refCount="+i),i%3==2?this.mAd.showInterstitialAd(o):(o&&o(!1),!1)},e.prototype.getAppID=function(){return"qtt"},e.prototype.getUID=function(){var o=t.getQueryString("uuid","");return o!=""&&10<o.length?o:t.Platform.getXAID()},e.prototype.getGameToken=function(){return this.mGameToken},e.prototype.getPayload=function(){return this.mCMAPI.getPayload()},e.prototype.setStorageList=function(o,i){t.CMService.setStorage({kvDatas:o,success:function(a){i&&i(!0)},fail:function(a){t.Log.error("QTT::setStorageList => failed"),i&&i(!1)}})},e.prototype.getStroageList=function(o,i){t.CMService.getStorage({keys:o,success:function(a){a&&a.result&&a.result.data?i&&i(a.result.data):i&&i(void 0)},fail:function(a){t.Log.error("QTT::getStroageList => failed"),i&&i(void 0)}})},e.prototype.delStroageList=function(o,i){t.CMService.delStorage({keys:o,success:function(a){i&&i(!0)},fail:function(a){t.Log.error("QTT::delStroageList => failed"),i&&i(!1)}})},e.prototype.getInterstitalAdCount=function(){return Number(window.localStorage.getItem("interstital_ad_pref")||"0")},e.prototype.plusInterstitalAdCount=function(){var o=this.getInterstitalAdCount()+1;window.localStorage.setItem("interstital_ad_pref",o+"")},e.prototype.onGameLoadStart=function(){},e.prototype.onGameLoadFinished=function(){if(!this.loadComplete){this.loadComplete=!0;try{var o={open_id:this.mOpenID,app_id:this.mAppID,game_name:this.mGameName};window.qttGame&&window.qttGame.loadComplete(o)}catch(i){console.error("QTT:onGameLoadFinished => ERROR: "+JSON.stringify(i.stack))}}},e.prototype.onGameMainStart=function(){if(!this.loadingFinished){this.loadingFinished=!0;try{var o={open_id:this.mOpenID,app_id:this.mAppID,game_name:this.mGameName};window.qttGame&&window.qttGame.loadingFinished(o)}catch(i){console.error("QTT:onGameMainStart => ERROR: "+JSON.stringify(i.stack))}}},e.prototype.onGameStart=function(){try{var o={open_id:this.mOpenID,app_id:this.mAppID,game_name:this.mGameName};window.qttGame&&window.qttGame.startPlayGame(o)}catch(i){console.error("QTT:onGameStart => "+JSON.stringify(i.stack))}},e.prototype.onGameStop=function(){},e.prototype.onGameLevelPass=function(o){try{window.qtt_help&&window.qtt_help.task&&window.qtt_help.task.completeTask(),window.qttGame&&window.qttGame.task&&window.qttGame.task.completeTask()}catch(a){t.Log.error("QTT:onGameLevelPass => "+JSON.stringify(a.stack))}try{var i={role:"",region:"",level:o+"",ce:"",round:"1",revenue:""};window.qttGame&&window.qttGame.userInfo(i)}catch(a){console.error("QTT:onGameLevelPass => "+JSON.stringify(a.stack))}},e}();t.QTT=n}(p||(p={})),function(t){var c=function(){function e(){}return e.ROLL_SKY=22,e.BRICK_BALL=30,e.DANC_LINE=29,e.PIANO_TILES=28,e.FARM=41,e.GAME_2048=27,e.DEEP_FISH=23,e.FRUIT_NINJA=54,e.FOOTBALL=36,e.SAIL_LEGEND=31,e.STARS_2=45,e.SNAKE_BLOCK=38,e}();t.PAGE=c;var n=function(){function e(){this.mCMAPI=void 0,this.mAd=void 0,this.mShareItAd=void 0,this.mGameToken=void 0}return e.prototype.init=function(o){var i=this,a=this.getUID();this.mAd=this.mShareItAd=new t.SIAd,this.mAd.init(o),this.mCMAPI=new t.CMAPI({vmframe:"https://h5game.zhhainiao.com/cmplaysdk/api/qiezikuaichuan.js",appid:"qiezikuaichuan_gamecenter",appkey:"201903046679381196927",host:"qzkc-gateway.xyx-svc.zhhainiao.com",uuid:a}),this.mCMAPI.getGameToken(function(r){t.Log.warn("ShareIt::init => gameToken: "+r),i.mGameToken=r})},e.prototype.login=function(o){var i=this,a=this.mCMAPI.getTokenState();a==t.TokenState.TOKEN_READY?(t.Global.data.mSystemInfo.gameToken=this.getGameToken(),t.Log.log("ShareIt::login => gameToken:"+t.Global.data.mSystemInfo.gameToken),t.CMService.loginCMPlay({callback:function(r,d,u,m,h){d&&(t.Global.data.mCMPlayerId=d),u&&(t.Global.data.mCMToken=u),o&&o(r,d,u,m,h)}})):a==t.TokenState.TOKEN_FAILD?(t.Log.error("ShareIt::login => failed"),o&&o(!1,void 0,void 0,0,0)):(t.Log.warn("ShareIt::login => delay"),setTimeout(function(){i.login(o)},100))},e.prototype.startRewardVideo=function(o){return this.mAd.startRewardVideo(o)},e.prototype.showOpenGameAd=function(){return this.mAd.showOpenGameAd()},e.prototype.showBanner=function(){return this.mAd.showBanner()},e.prototype.hideBanner=function(){return this.mAd.hideBanner()},e.prototype.showInterstitialAd=function(o){var i=this.getInterstitalAdCount();return this.plusInterstitalAdCount(),t.Log.warn("ShareIt::showInterstitialAd refCount="+i),this.mAd.showInterstitialAd(o)},e.prototype.getAppID=function(){return"shareit"},e.prototype.getUID=function(){return t.Platform.getXAID()},e.prototype.getGameToken=function(){return this.mGameToken},e.prototype.getPayload=function(){return this.mCMAPI.getPayload()},e.prototype.setStorageList=function(o,i){t.CMService.setStorage({kvDatas:o,success:function(a){i&&i(!0)},fail:function(a){t.Log.error("ShareIt::setStorageList => failed"),i&&i(!1)}})},e.prototype.getStroageList=function(o,i){t.CMService.getStorage({keys:o,success:function(a){a&&a.result&&a.result.data?i&&i(a.result.data):i&&i(void 0)},fail:function(a){t.Log.error("ShareIt::getStroageList => failed"),i&&i(void 0)}})},e.prototype.delStroageList=function(o,i){t.CMService.delStorage({keys:o,success:function(a){i&&i(!0)},fail:function(a){t.Log.error("ShareIt::delStroageList => failed"),i&&i(!1)}})},e.prototype.getInterstitalAdCount=function(){return Number(window.localStorage.getItem("qz_interstital_ad_pref")||"0")},e.prototype.plusInterstitalAdCount=function(){var o=this.getInterstitalAdCount()+1;window.localStorage.setItem("qz_interstital_ad_pref",o+"")},e.prototype.onGameLoadStart=function(){},e.prototype.onGameLoadFinished=function(){},e.prototype.onGameMainStart=function(){},e.prototype.onGameStart=function(){},e.prototype.onGameStop=function(){},e.prototype.onGameLevelPass=function(o){},e}();t.ShareIt=n}(p||(p={})),function(t){var c=function(){function n(){this.mBGM={src:void 0,loop:!0,volume:1,id:void 0,pausePos:-1}}return n.prototype.playBGM=function(e,o,i){var a=this;if(o===void 0&&(o=!0),i===void 0&&(i=1),this.stopBGM(),this.mBGM.src=e,this.mBGM.loop=o,this.mBGM.volume=1,this.mBGM.pausePos=-1,window.Laya){var r=Laya.SoundManager.playMusic(e,o?0:1);r.volume=i,this.mBGM.id=r}else window.cc?this.mBGM.id=cc.audioEngine.play(e,o,i):window.egret?this.getEgretSound(e,function(d){if(d){var u=d.play(0,o?0:1);u.volume=i,a.mBGM.id=u}}):console.warn("AudioImpl::playBGM => unsupported");return this.mBGM.id},n.prototype.stopBGM=function(){window.Laya?Laya.SoundManager.stopMusic():window.cc?this.mBGM.id!=null&&(cc.audioEngine.stop(this.mBGM.id),this.mBGM.id=void 0):window.egret?this.mBGM.id!=null&&(this.mBGM.id.stop(),this.mBGM.id=void 0):console.warn("AudioImpl::stopBGM => unsupported")},n.prototype.pauseBGM=function(){if(window.Laya)this.mBGM.id instanceof Laya.SoundChannel&&(e=this.mBGM.id).pause();else if(window.cc)this.mBGM.id!=null&&cc.audioEngine.pause(this.mBGM.id);else if(window.egret){if(this.mBGM.id!=null){var e=this.mBGM.id;this.mBGM.pausePos=e.position,e.stop(),this.mBGM.id=void 0}}else console.warn("AudioImpl::pauseBGM => unsupported")},n.prototype.resumeBGM=function(){var e=this;window.Laya?this.mBGM.id instanceof Laya.SoundChannel&&this.mBGM.id.resume():window.cc?this.mBGM.id!=null&&cc.audioEngine.resume(this.mBGM.id):window.egret?this.mBGM.src&&this.mBGM.pausePos!=-1&&this.getEgretSound(this.mBGM.src,function(o){if(o){var i=o.play(e.mBGM.pausePos,e.mBGM.loop?0:1);i.volume=e.mBGM.volume,e.mBGM.id=i,e.mBGM.pausePos=-1}}):console.warn("AudioImpl::resumeBGM => unsupported")},n.prototype.playEffect=function(e,o){var i=this;return o===void 0&&(o=1),window.Laya?Laya.SoundManager.playSound(e,1):window.cc?cc.audioEngine.play(e,!1,o):void(window.egret?this.getEgretSound(e,function(a){if(a){var r=a.play(0,1);r.volume=o;var d=function(){r.removeEventListener(egret.Event.SOUND_COMPLETE,d,i),r.stop(),r=void 0};r.addEventListener(egret.Event.SOUND_COMPLETE,d,i)}}):console.warn("AudioImpl::playEffect => unsupported"))},n.prototype.getEgretSound=function(e,o){var i=RES.getRes(e);i?o&&o(i):RES.getResAsync(e,function(a,r){o&&o(a)},this)},n}();t.AudioImpl=c}(p||(p={})),function(t){var c,n;(n=c=t.TokenState||(t.TokenState={}))[n.TOKEN_REQUESTING=0]="TOKEN_REQUESTING",n[n.TOKEN_READY=1]="TOKEN_READY",n[n.TOKEN_FAILD=2]="TOKEN_FAILD";var e=function(){function o(i){var a=this;this.isRequesting=!1,this.tokenState=c.TOKEN_REQUESTING,this.mAppId=void 0,this.mAppKey=void 0,this.mHost=void 0,this.mData=void 0,this.mLoginType=void 0,this.mLoginParams=void 0,this.mReqTokenCBList=[],this.mIsAPILogin=!1,this.mAppId=i.appid,this.mAppKey=i.appkey,this.mHost=i.host,this.mLoginType=i.loginType,this.mLoginParams=i.loginParams,this.tokenState=c.TOKEN_REQUESTING,this.mReqTokenCBList=[],this.mIsAPILogin=this.mLoginType!=null&&this.mLoginParams!=null,this.mData=new t.CMAPIData(this.mAppId,i.uuid),t.SysUtil.loadSDKScript(i.vmframe,!1,function(){0<a.mReqTokenCBList.length?(t.Log.warn("CMAPI::loadSDKScript => vmframe is Ready, process mReqTokenCBList"),a._requestGameToken(void 0)):t.Log.warn("CMAPI::loadSDKScript => vmframe is Ready")})}return o.prototype.getTokenState=function(){return this.tokenState},o.prototype.getPayload=function(){return this.mData.getPayload()},o.prototype.getGameToken=function(i){this.mIsAPILogin?this._getLoginGameToken(i):this._getAnonymousGameToken(i)},o.prototype._sign=function(i){try{return window.sign(i)}catch(a){t.Log.error("CMAPI::sign => ERROR "+a.message),t.Log.error(JSON.stringify(a.stack))}},o.prototype._getLoginGameToken=function(i){t.Log.warn("CMAPI::_getLoginGameToken =>"),this._requestGameToken(i)},o.prototype._getAnonymousGameToken=function(i){var a=this.mData.getGameToken();if(a&&5<a.length){var r=this.mData.getLastUpdateSec(),d=t.SysUtil.getTimeSeconds(),u=Math.abs(d-r);86400<u?(t.Log.warn("CMAPI::_getAnonymousGameToken => gameToken["+a+"] diffSec["+u+"] => OVER 24 HOURS"),this._requestGameToken(i)):(t.Log.warn("CMAPI::_getAnonymousGameToken => gameToken["+a+"] diffSec["+u+"] => IN 24 HOURS B"),i&&i(a),this.tokenState=c.TOKEN_READY)}else t.Log.warn("CMAPI::_getAnonymousGameToken => NOT FOUND gameToken"),this._requestGameToken(i)},o.prototype._requestGameToken=function(i){var a=this;if(i&&this.mReqTokenCBList.indexOf(i)<0&&this.mReqTokenCBList.push(i),window.sign)if(this.isRequesting)t.Log.warn("CMAPI::_requestGameToken => wait for running");else{t.Log.warn("CMAPI::_requestGameToken => execute"),this.isRequesting=!0,this.tokenState=c.TOKEN_REQUESTING;var r=t.Global.debugService?"http://sdkgateway.cmzhtest2.hellocwd.com":"https://"+this.mHost,d={ver:0,channel_id:["cmcp"],common:{uid:this.mData.getUID(),token:this.mData.getToken(),app_id:this.mAppId}};this.mIsAPILogin?(d.login_type=this.mLoginType,d.login_params=this.mLoginParams,r+="/xyx_sdk/gw/partner_login"):r+="/xyx_sdk/gw/get_token";var u=JSON.stringify(d),m=this._sign(u);this._requestToken(r,u,m,function(h,f){var w=void 0;if(h&&f.user_info&&f.user_info.uid!==void 0){w=f.game_tokens&&f.game_tokens.cmcp&&f.game_tokens.cmcp.game_token;var s=f.user_info.uid,l=f.user_info.token,g=f.game_payload||t.EMPTY_STRING;a.mData.setData(s,l,w,g),a.tokenState=c.TOKEN_READY}else a.tokenState=c.TOKEN_FAILD;a.mReqTokenCBList.forEach(function(y){y&&y(w)}),a.isRequesting=!1})}else t.Log.warn("CMAPI::_requestGameToken => wait for vmframe")},o.prototype._requestToken=function(i,a,r,d){var u={"content-type":"application/json","X-CF-Secret":r,"X-CF-Appid":this.mAppId,"X-CF-Appkey":this.mAppKey,"X-CF-Ts":t.SysUtil.getTimeSeconds()};t.Global.isOutputDebug&&(t.Log.log("url => "+i),t.Log.log("header => "+JSON.stringify(u)),t.Log.log("body => "+a)),console.warn("requestToken => url:"+i),t.NetworkUtil.httpRequest({url:i,data:a,header:u,method:"POST",dataType:"json",success:function(m,h,f){t.Global.isOutputDebug&&t.Log.warn("requestToken => SUCCESS "+JSON.stringify(h)),d&&d(!0,h)},fail:function(m,h){t.Log.error("requestToken => FAILED"),d&&d(!1,void 0)}},3)},o}();t.CMAPI=e}(p||(p={})),function(t){t.EMPTY_STRING="";var c="_cmapi_version_",n=function(){function a(r,d){switch(this.mDataAPI=void 0,this.platform=void 0,this.platform=r,this.getDataVersion()){case 3:this.mDataAPI=new i(r,d);break;case 2:this.mDataAPI=new o(r);break;case 1:this.mDataAPI=new e(r);break;default:this.mergeData(r,d),this.mDataAPI=this.detectAndGetDataAPI(r,d)}}return a.prototype.detectAndGetDataAPI=function(r,d){return window.localStorage.getItem(r+"_cmapi_uid_"+d)?new i(r,d):window.localStorage.getItem(r+"_cmapi_uid_")?new o(r):new i(r,d)},a.prototype.mergeData=function(r,d){for(var u=[{newKey:r+"_cmapi_uid_",oldKeys:["_cmapi_uid_"]},{newKey:r+"_cmapi_utoken_",oldKeys:["_cmapi_utoken_"]},{newKey:r+"_cmapi_game_token_",oldKeys:["_cmapi_game_token_"]},{newKey:r+"_cmapi_timestamp_",oldKeys:["_cmapi_timestamp_"]}],m=0;m<u.length;m++){var h=u[m],f=window.localStorage.getItem(h.newKey)||void 0;if(f==null){for(var w=0;h.oldKeys instanceof Array&&w<h.oldKeys.length;w++)if((f=window.localStorage.getItem(h.oldKeys[w])||void 0)!=null){window.localStorage.setItem(h.newKey,f),window.localStorage.removeItem(h.oldKeys[w]),console.error("CMAPIData:: merge["+h.newKey+"] => ["+f+"]");break}}}},a.prototype.setData=function(r,d,u,m){this.mDataAPI.setItem("_cmapi_uid_",r),this.mDataAPI.setItem("_cmapi_utoken_",d),this.mDataAPI.setItem("_cmapi_game_token_",u),this.mDataAPI.setItem("_cmapi_payload_",m),this.setLastUpdateSec(t.SysUtil.getTimeSeconds()),t.Global.isOutputDebug&&(console.warn("CMAPIData::setData => uid:"+r),console.warn("CMAPIData::setData => token:"+d),console.warn("CMAPIData::setData => gameToken:"+u),console.warn("CMAPIData::setData => payload:"+m))},a.prototype.getUID=function(){return this.mDataAPI.getItem("_cmapi_uid_",t.EMPTY_STRING)},a.prototype.getToken=function(){return this.mDataAPI.getItem("_cmapi_utoken_",t.EMPTY_STRING)},a.prototype.getGameToken=function(){return this.mDataAPI.getItem("_cmapi_game_token_",t.EMPTY_STRING)},a.prototype.getPayload=function(){return this.mDataAPI.getItem("_cmapi_payload_",t.EMPTY_STRING)},a.prototype.getLastUpdateSec=function(){return Number(window.localStorage.getItem(this.platform+"_cmapi_timestamp_")||"0")},a.prototype.setLastUpdateSec=function(r){window.localStorage.setItem(this.platform+"_cmapi_timestamp_",r+t.EMPTY_STRING)},a.prototype.getDataVersion=function(){return Number(window.localStorage.getItem(this.platform+c)||"0")},a}();t.CMAPIData=n;var e=function(){function a(r){window.localStorage.setItem(r+c,"1"),t.Global.isOutputDebug&&console.error("DataV1 => ")}return a.prototype.getItem=function(r,d){return window.localStorage.getItem(r)||d},a.prototype.setItem=function(r,d){return window.localStorage.setItem(r,d)},a}(),o=function(){function a(r){this.platform=void 0,this.platform=r,window.localStorage.setItem(r+c,"2"),t.Global.isOutputDebug&&console.error("DataV2 => ")}return a.prototype.getItem=function(r,d){return window.localStorage.getItem(this.platform+r)||d},a.prototype.setItem=function(r,d){return window.localStorage.setItem(this.platform+r,d)},a}(),i=function(){function a(r,d){this.platform=void 0,this.userid=void 0,this.platform=r,this.userid=d,window.localStorage.setItem(r+c,"3"),t.Global.isOutputDebug&&console.error("DataV3 => ")}return a.prototype.getItem=function(r,d){return window.localStorage.getItem(this.platform+r+this.userid)||d},a.prototype.setItem=function(r,d){return window.localStorage.setItem(this.platform+r+this.userid,d)},a}()}(p||(p={})),function(t){var c=function(e,o){this.key=null,this.value=null,this.key=e,this.value=o};t.Pair=c;var n=function(){function e(){this.arr=[]}return e.prototype.put=function(o,i){for(var a=0;a<this.arr.length;a++)if(this.arr[a].key===o)return void(this.arr[a].value=i);this.arr.push(new c(o,i))},e.prototype.get=function(o){for(var i=0;i<this.arr.length;i++)if(this.arr[i].key===o)return this.arr[i].value;return null},e.prototype.getPair=function(o){for(var i=0;i<this.arr.length;i++)if(this.arr[i].key===o)return this.arr[i];return null},e.prototype.remove=function(o){for(var i=0;i<this.arr.length;i++)if(this.arr[i].key===o)return void this.arr.splice(i,1)},e.prototype.clear=function(){this.arr=[]},e.prototype.size=function(){return this.arr.length},e.prototype.getPairs=function(){return this.arr},e}();t.Dictionary=n}(p||(p={})),function(t){function c(a){for(var r,d,u="",m=-1;++m<a.length;)r=a.charCodeAt(m),d=m+1<a.length?a.charCodeAt(m+1):0,55296<=r&&r<=56319&&56320<=d&&d<=57343&&(r=65536+((1023&r)<<10)+(1023&d),m++),r<=127?u+=String.fromCharCode(r):r<=2047?u+=String.fromCharCode(192|r>>>6&31,128|63&r):r<=65535?u+=String.fromCharCode(224|r>>>12&15,128|r>>>6&63,128|63&r):r<=2097151&&(u+=String.fromCharCode(240|r>>>18&7,128|r>>>12&63,128|r>>>6&63,128|63&r));return u}function n(a){for(var r=Array(a.length>>2),d=0;d<r.length;d++)r[d]=0;for(d=0;d<8*a.length;d+=8)r[d>>5]|=(255&a.charCodeAt(d/8))<<24-d%32;return r}function e(a,r){a[r>>5]|=128<<24-r%32,a[15+(r+64>>9<<4)]=r;for(var d=Array(80),u=1732584193,m=-271733879,h=-1732584194,f=271733878,w=-1009589776,s=0;s<a.length;s+=16){for(var l=u,g=m,y=h,_=f,G=w,A=0;A<80;A++){d[A]=A<16?a[s+A]:i(d[A-3]^d[A-8]^d[A-14]^d[A-16],1);var k=o(o(i(u,5),(I=m,S=h,v=f,(C=A)<20?I&S|~I&v:C<40?I^S^v:C<60?I&S|I&v|S&v:I^S^v)),o(o(w,d[A]),(T=A)<20?1518500249:T<40?1859775393:T<60?-1894007588:-899497514));w=f,f=h,h=i(m,30),m=u,u=k}u=o(u,l),m=o(m,g),h=o(h,y),f=o(f,_),w=o(w,G)}var T,C,I,S,v;return Array(u,m,h,f,w)}function o(a,r){var d=(65535&a)+(65535&r);return(a>>16)+(r>>16)+(d>>16)<<16|65535&d}function i(a,r){return a<<r|a>>>32-r}t.hex_hmac_sha1=function(a,r){return function(d){for(var u,m="0123456789abcdef",h="",f=0;f<d.length;f++)u=d.charCodeAt(f),h+=m.charAt(u>>>4&15)+m.charAt(15&u);return h}(function(d,u){var m=n(d);16<m.length&&(m=e(m,8*d.length));for(var h=Array(16),f=Array(16),w=0;w<16;w++)h[w]=909522486^m[w],f[w]=1549556828^m[w];var s=e(h.concat(n(u)),512+8*u.length);return function(l){for(var g="",y=0;y<32*l.length;y+=8)g+=String.fromCharCode(l[y>>5]>>>24-y%32&255);return g}(e(f.concat(s),672))}(c(a),c(r)))}}(p||(p={})),function(t){var c=function(){function n(){}return n.isEnable=function(e){return e>=this.mLevel},n.log=function(e){n.isEnable(n.LEVEL_LOG)&&console.log(typeof e=="string"?"[CMPlay] "+e:e)},n.warn=function(e){n.isEnable(n.LEVEL_WARN)&&console.warn(typeof e=="string"?"[CMPlay] "+e:e)},n.error=function(e){n.isEnable(n.LEVEL_ERROR)&&console.error(typeof e=="string"?"[CMPlay] "+e:e)},n.LEVEL_LOG=0,n.LEVEL_WARN=1,n.LEVEL_ERROR=2,n.mLevel=n.LEVEL_LOG,n}();t.Log=c}(p||(p={})),function(t){var c=function(){function n(){}return n.request=function(e){n.httpRequest({url:e.url,data:e.data,header:e.header,method:e.method,dataType:e.dataType,success:function(o,i,a){e.checkAuthorization?e.token&&n.checkAuthorization(a,i,e.token)?e.success&&e.success(i):(t.Log.error("code = "+o),t.Log.error("data = "+i),t.Log.error("header = "+JSON.stringify(a)),e.fail&&e.fail(i)):e.success&&e.success(i)},fail:function(o,i){e.fail&&e.fail(i)}},5)},n.checkAuthorization=function(e,o,i){return!0},n.httpRequest=function(e,o){var i=this,a=new XMLHttpRequest;for(var r in a.open(e.method,e.url),e.header)a.setRequestHeader(r,e.header[r]);a.onreadystatechange=function(){if(a.readyState==4)if(a.status==200){if(e.success)if(e.dataType=="json"){var d=void 0;try{d=JSON.parse(a.responseText)}catch(u){d=a.responseText}e.success(a.status,d,a.getAllResponseHeaders())}else e.success(a.status,a.responseText,a.getAllResponseHeaders())}else 1<o?i.httpRequest(e,o-1):e.fail&&e.fail(a.status,a.responseText)},typeof e.data=="object"?a.send(JSON.stringify(e.data)):a.send(e.data)},n}();t.NetworkUtil=c}(p||(p={})),window.getQueryString=function(t,c){var n=window.location.search;if(n&&n.indexOf("?")!==-1&&(n=n.substr(1)||window.location.hash.split("?")[1])){var e=new RegExp("(^|&)"+t+"=([^&]*)(&|$)"),o=n.match(e);if(o!=null)return decodeURIComponent(o[2])}return c},window.getPathVersion=function(){var t=window.location.pathname;if(t){var c=new RegExp("(v20[0-9]+)"),n=t.match(c);if(n&&0<n.length&&n[0]&&11<=n[0].length&&n[0].substr(0,3)=="v20"){var e=n[0];return Number(e.substr(1,4))-2018+"."+Number(e.substr(5,2))+"."+Number(e.substr(7,2))+"."+Number(e.substr(9,2))}}return"1.0.0.0"},function(t){var c=function(){function n(){}return n.getTimeSeconds=function(){return Math.round(Date.now()/1e3)},n.generateXAID=function(){return"xxxxyyyy_xxxxyyyy_xxyyxxyyxx".replace(/[xy]/g,function(e){if(e=="0")return e;var o=16*Math.random()|0;return(e=="x"?o:3&o|8).toString(16)})},n.loadSDKScript=function(e,o,i){i===void 0&&(i=void 0);var a=document.getElementsByTagName("head")[0],r=document.createElement("script");r.async=o,r.src=e,i!=null&&(r.onload=function(){i()},r.onreadystatechange=function(){this.readyState=="complete"&&i()}),a&&a.appendChild(r)},n}();t.SysUtil=c}(p||(p={}))})()})();})();
