(function(){(function(){(function(){(function(){var L,p;(function(e){console.log("Hello CMPlaySDK 2e834.072403 - POKI");var c=function(){function s(){}return s.LOADING_BEGIN="loading_begin",s.LOADING_END="loading_end",s}();e.STATE=c;var n=function(){function s(){}return s.GAME_ACTIVE=220,s.LOADING_PAGE=221,s.MAIN_PAGE=222,s.GUIDE_PAGE=223,s.LOGIN_SUCCESS=228,s.LOGIN_FAILED=229,s.STAGE_START=231,s.STAGE_PASS=232,s.STAGE_FAIL=233,s.BANNER_SHOW=241,s.REWARDED_VIDEO_SHOW=242,s.REWARDED_VIDEO_SUCCESS=243,s.REWARDED_VIDEO_FAILED=248,s.OPEN_GAME_AD_SHOW=245,s.SHARE_DIALOG=246,s.SHARE_DIALOG_SUCCESS=247,s.INTERSTITIAL_AD_SHOW=244,s.INTERSTITIAL_AD_REQUEST=255,s.INTERSTITIAL_AD_ERROR=253,s.INTERSTITIAL_AD_DONE=250,s.GAME_LEVEL_PASS=249,s.UNUSED_251=251,s.UNUSED_252=252,s}();e.ACTION=n,e.SDK_VER=1;var t=!(e.Global={debugInfoc:!1,debugService:!1,initTime:0,public:{game_page:0,game_ver:"0",game_id:0,game_name:"",xaid:"0",accountid:"0",cn:"default",brand:"",model:"",app_id:void 0},data:{mCMPlayerId:void 0,mCMToken:void 0,mRewardVideoCallback:void 0,mShareCallback:void 0,mOnShowCBList:[],mOnHideCBList:[],mSystemInfo:void 0},isOversea:!1,isOutputDebug:!1}),o=!1,a=void 0,i=void 0,r=void 0;function d(){if(e.Global.data.mSystemInfo!=null)return e.Global.data.mSystemInfo;var s=function(){try{if(window.GameJs&&window.GameJs.getDisplayWidth)return window.GameJs.getDisplayWidth()}catch(g){e.Log.error("CMPlay::getDisplayWidth ERROR => "+g.message)}return 0},l=function(){try{if(window.GameJs&&window.GameJs.getDisplayHeight)return window.GameJs.getDisplayHeight()}catch(g){e.Log.error("CMPlay::getDisplayHeight ERROR => "+g.message)}return 0};return e.Global.data.mSystemInfo={brand:"Unknow",model:"Unknow",pixelRatio:1,screenWidth:s(),screenHeight:l(),windowWidth:s(),windowHeight:l(),statusBarHeight:0,language:h("lang","en"),version:"",system:"",platform:"",fontSizeSetting:1,SDKVersion:"1.0",benchmarkLevel:-1,gameId:e.Global.public.game_id,packageName:function(){try{if(window.GameJs&&window.GameJs.getAppPackageName)return window.GameJs.getAppPackageName()}catch(g){e.Log.error("CMPlay::getAppPackageName ERROR => "+g.message)}return""}(),packageVersion:function(){try{if(window.GameJs&&window.GameJs.getAppVersion)return window.GameJs.getAppVersion()}catch(g){e.Log.error("CMPlay::getAppVersion ERROR => "+g.message)}return"0"}(),gameToken:function(){try{return i.getGameToken()}catch(g){e.Log.error("CMPlay::getGameToken ERROR => "+g.message)}return""}(),appId:function(){try{return i.getAppID()}catch(g){e.Log.error("CMPlay::getAppID ERROR => "+g.message)}}(),userId:function(){try{return i.getUID()}catch(g){e.Log.error("CMPlay::getUID ERROR => "+g.message)}}(),isTestMode:function(){try{if(window.GameJs&&window.GameJs.isTestMode)return window.GameJs.isTestMode()}catch(g){e.Log.error("CMPlay::isTestMode ERROR => "+g.message),e.Log.error(JSON.stringify(g.stack))}return!1}(),channelId:function(){try{if(window.GameJs&&window.GameJs.getChannelId)return window.GameJs.getChannelId()}catch(g){e.Log.error("CMPlay::getChannelId ERROR => "+g.message)}return"0"}()},e.Global.data.mSystemInfo}e.init=function(s){if(e.Log.warn("init => "),s.pageId<=0||999<s.pageId)throw new Error("init => ERROR: Invalid pageId "+s.pageId);if(s.gameId<=6e3||99999<s.gameId)throw new Error("init => ERROR: Invalid gameId "+s.gameId);if(!s.gameName||s.gameName.length<1)throw new Error("init => ERROR: Invalid gameName "+s.gameName);e.Log.log("init => pageId:"+s.pageId+" gameId:"+s.gameId+" gameName:"+s.gameName);var l="oversea";if(e.Global.isOversea=!0,e.Log.warn("init => region: "+l),window.GameJs&&window.GameJs.getGameToken==null)throw new Error("init => ERROR: Please support GameJs.getGameToken API");e.Global.public.game_page=s.pageId,e.getQueryString("_svr_debug_","0")=="1"?(e.Global.isOutputDebug=!0,e.Global.debugService=!0,e.Log.warn(">>>>> CMPLAYSDK DEBUG MODE <<<<<")):(e.Global.isOutputDebug=!0,e.Global.debugService=!1);try{console.warn("init POKI"),(i=new e.POKI).init(s)}catch(g){e.Log.error("CMPlay::init ERROR => "+g.message),e.Log.error(JSON.stringify(g.stack))}a=new e.AudioImpl,o=t=!1,e.Global.debugInfoc=!1,e.Global.initTime=e.SysUtil.getTimeSeconds(),e.Global.public.brand="",e.Global.public.model="",e.Global.public.game_ver=m(),e.Global.public.game_id=s.gameId,e.Global.public.game_name=s.gameName,e.Global.data.mCMPlayerId=void 0,e.Global.data.mCMToken=void 0,e.Global.public.cn=d().appId,e.Global.public.xaid=d().userId,e.Global.isOutputDebug=!0,u.reportAction(n.GAME_ACTIVE)},e.setInfocDebug=function(s){e.Global.debugInfoc=s},e.setServiceDebug=function(s){e.Global.debugService=s},e.isCMPlay=function(){return!0},window.onAdShowFailed=function(){try{e.Global.data.mRewardVideoCallback!=null&&(e.Global.data.mRewardVideoCallback(!1),e.Global.data.mRewardVideoCallback=void 0)}catch(s){e.Log.error("CMPlay::onAdShowSuccess ERROR => "+s.message),e.Log.error(JSON.stringify(s.stack))}},window.onAdShowSuccess=function(){try{e.Global.data.mRewardVideoCallback!=null&&(e.Global.data.mRewardVideoCallback(!0),e.Global.data.mRewardVideoCallback=void 0)}catch(s){e.Log.error("CMPlay::onAdShowSuccess ERROR => "+s.message),e.Log.error(JSON.stringify(s.stack))}},window.onShareSuccess=function(){try{e.Global.data.mShareCallback!=null&&(e.Global.data.mShareCallback(),e.Global.data.mShareCallback=void 0,u.reportAction(n.SHARE_DIALOG_SUCCESS))}catch(s){e.Log.error("CMPlay::onShareSuccess ERROR => "+s.message),e.Log.error(JSON.stringify(s.stack))}},window.mute=function(){e.Audio.mute()},window.unmute=function(){e.Audio.unmute()},window.onActivityShow=function(){e.Log.warn("onActivityShow => ");for(var s=0;s<e.Global.data.mOnShowCBList.length;s++)try{e.Global.data.mOnShowCBList[s]()}catch(l){e.Log.error("CMPlay::onActivityShow ERROR => "+l.message),e.Log.error(JSON.stringify(l.stack))}t=!1,o||a.resumeBGM()},window.onActivityHide=function(){e.Log.warn("onActivityHide => ");for(var s=0;s<e.Global.data.mOnHideCBList.length;s++)try{e.Global.data.mOnHideCBList[s]()}catch(l){e.Log.error("CMPlay::onActivityHide ERROR => "+l.message),e.Log.error(JSON.stringify(l.stack))}t=!0,o||a.pauseBGM()},window.adShowCallback=function(s){try{var l=JSON.parse(s);if(e.Log.log("adShowCallback => result_message::"+l.result_message),l&&l.adAction=="onAdClosed"){if(l.unitId=="gti")r.mShareItAd.loadInerstitialAd();else if(l.unitId=="bqr"&&(r.mShareItAd.loadRewardAd(),!l.hasRewarded))return;e.Global.data.mRewardVideoCallback!=null&&(e.Global.data.mRewardVideoCallback(!0),e.Global.data.mRewardVideoCallback=void 0)}}catch(g){e.Log.error("adShowCallback ERROR => "+g.message),e.Log.error(JSON.stringify(g.stack))}},window.adLoadCallback=function(s){try{var l=JSON.parse(s);e.Log.log("adLoadCallback => result_message::"+l.result_message+"responseCode = "+l.responseCode)}catch(g){e.Log.error("adLoadCallback ERROR => "+g.message),e.Log.error(JSON.stringify(g.stack))}},e.hasNeededPermissions=function(){return window.RewardVideo&&window.RewardVideo.hasNeededPermissions&&window.RewardVideo.hasNeededPermissions()},e.hasTTAd=function(){return window.RewardVideo&&window.RewardVideo.hasTTAd&&window.RewardVideo.hasTTAd()},e.isSupportShareDialog=function(){return window.GameJs&&window.GameJs.onShareDialog},e.shareDialog=function(s){if(window.GameJs&&window.GameJs.onShareDialog){try{e.Global.data.mShareCallback=s;var l=window.GameJs.onShareDialog();return u.reportAction(n.SHARE_DIALOG),l}catch(g){e.Log.error("CMPlay::shareDialog ERROR => "+g.message),e.Log.error(JSON.stringify(g.stack))}return!1}},e.startRewardVideo=function(s){try{i.startRewardVideo(function(l){u.reportAction(l?n.REWARDED_VIDEO_SUCCESS:n.REWARDED_VIDEO_FAILED),s&&s(l)})&&u.reportAction(n.REWARDED_VIDEO_SHOW)}catch(l){e.Log.error("CMPlay::startRewardVideo ERROR => "+l.message),e.Log.error(JSON.stringify(l.stack)),s&&s(!1)}},e.showInterstitialAd=function(s){try{i.showInterstitialAd(s)&&u.reportAction(n.INTERSTITIAL_AD_SHOW)}catch(l){e.Log.error("CMPlay::showInterstitialAd ERROR =>"+l.message),e.Log.error(JSON.stringify(l.stack))}},e.refreshBanner=function(){e.hideBanner(),e.showBanner()},e.showBanner=function(){try{i.showBanner()&&u.reportAction(n.BANNER_SHOW)}catch(s){e.Log.error("CMPlay::showBanner ERROR => "+s.message),e.Log.error(JSON.stringify(s.stack))}},e.hideBanner=function(){try{i.hideBanner()}catch(s){e.Log.error("CMPlay::hideBanner ERROR => "+s.message),e.Log.error(JSON.stringify(s.stack))}},e.showToast=function(s,l){try{window.GameJs&&window.GameJs.showToast&&window.GameJs.showToast(s,l)}catch(g){e.Log.error("CMPlay::showToast ERROR => "+g.message),e.Log.error(JSON.stringify(g.stack))}},e.onShow=function(s){for(var l=0;l<e.Global.data.mOnShowCBList.length;l++)if(e.Global.data.mOnShowCBList[l]==s)return;e.Global.data.mOnShowCBList.push(s)},e.offShow=function(s){for(var l=0;l<e.Global.data.mOnShowCBList.length;l++)e.Global.data.mOnShowCBList[l]==s&&delete e.Global.data.mOnShowCBList[l]},e.onHide=function(s){for(var l=0;l<e.Global.data.mOnHideCBList.length;l++)if(e.Global.data.mOnHideCBList[l]==s)return;e.Global.data.mOnHideCBList.push(s)},e.offHide=function(s){for(var l=0;l<e.Global.data.mOnHideCBList.length;l++)e.Global.data.mOnHideCBList[l]==s&&delete e.Global.data.mOnHideCBList[l]},e.getStorageSync=function(s,l){try{if(window.GameJs&&window.GameJs.getLocalStringValue)return window.GameJs.getLocalStringValue(s,l)}catch(g){e.Log.error("CMPlay::getStorageSync ERROR => "+g.message),e.Log.error(JSON.stringify(g.stack))}},e.setStorageSync=function(s,l){try{if(window.GameJs&&window.GameJs.setLocalStringValue)return window.GameJs.setLocalStringValue(s,l)}catch(g){e.Log.error("CMPlay::setStorageSync ERROR => "+g.message),e.Log.error(JSON.stringify(g.stack))}},e.getSystemInfo=function(s){var l=e.getSystemInfoSync();s.success&&s.success(l),s.complete&&s.complete()},e.getSystemInfoSync=d;var u=function(){function s(){}return s.report=function(l,g){try{window.RewardVideo&&window.RewardVideo.reportData&&window.RewardVideo.reportData(l,g)}catch(y){e.Log.error("CMPlay::report ERROR => "+y.message),e.Log.error(JSON.stringify(y.stack))}},s.reportAction=function(l){if(l==n.GAME_ACTIVE||l==n.LOADING_PAGE||l==n.MAIN_PAGE||l==n.GUIDE_PAGE||l==n.LOGIN_SUCCESS||l==n.LOGIN_FAILED){if(0<=s.UNIQE_EVENT_LIST.indexOf(l))return void e.Log.log("reportAction => skip action["+l+"] for duplicate");s.UNIQE_EVENT_LIST.unshift(l)}if(e.Log.log("reportAction => "+l),window.RewardVideo&&window.RewardVideo.reportData){var g="page="+e.Global.public.game_page+"&game_ver="+e.Global.public.game_ver+"&action="+l;s.report("gamemaster_game_h5_wujin",g)}else e.cmplay_action.report(l);l==n.MAIN_PAGE&&s.showOpenGameAd()},s.reportErrMsg=function(l,g,y){window.RewardVideo&&window.RewardVideo.reportData?s.report("gamemaster_business_h5game_errmsg","url="+l+"&errcode="+g+"&errmsg="+y):e.cmplay_error.report(l,g,y)},s.showOpenGameAd=function(){setTimeout(function(){var l=i&&i.showOpenGameAd();e.Log.log("CMPlay::showOpenGameAd => "+(l?"TRUE":"FALSE")),l&&s.reportAction(n.OPEN_GAME_AD_SHOW)},0)},s.UNIQE_EVENT_LIST=[],s}();function m(){return window.getPathVersion()}function h(s,l){return window.getQueryString(s,l)}e.Infoc=u,e.login=function(s){try{i.login(function(l,g,y,_,G){u.reportAction(l?n.LOGIN_SUCCESS:n.LOGIN_FAILED),s&&s(l,g,y,_,G)})}catch(l){e.Log.error("CMPlay::login ERROR => "+l.message),e.Log.error(JSON.stringify(l.stack)),u.reportAction(n.LOGIN_FAILED),s&&s(!1,void 0,void 0,0,0)}},e.setStorageList=function(s,l){try{i.setStorageList(s,l)}catch(g){e.Log.error("CMPlay::setStorageList ERROR => "+g.message),e.Log.error(JSON.stringify(g.stack)),l&&l(!1)}},e.getStroageList=function(s,l){try{i.getStroageList(s,l)}catch(g){e.Log.error("CMPlay::getStroageList ERROR => "+g.message),e.Log.error(JSON.stringify(g.stack)),l&&l(void 0)}},e.delStroageList=function(s,l){try{i.delStroageList(s,l)}catch(g){e.Log.error("CMPlay::delStroageList ERROR => "+g.message),e.Log.error(JSON.stringify(g.stack)),l&&l(!1)}},e.getServerTime=function(s){e.CMService.getServerTime({success:function(l){s&&s(l)},fail:function(l){s&&s(void 0)}})},e.getPayload=function(){if(i)return i.getPayload()},e.getPathVersion=m,e.getQueryString=h,e.setState=function(s){if(e.Log.log("setState => "+s),window.GameJs&&window.GameJs.setState)try{window.GameJs.setState(s)}catch(l){e.Log.error("CMPlay::setState ERROR => "+l.message),e.Log.error(JSON.stringify(l.stack))}};var f=function(){function s(){}return s.onGameLoadStart=function(){e.Log.warn("===> onGameLoadStart"),e.setState(c.LOADING_BEGIN),e.Infoc.reportAction(n.LOADING_PAGE),i&&i.onGameLoadStart()},s.onGameLoadFinished=function(){e.Log.warn("===> onGameLoadFinished"),e.setState(c.LOADING_END),i&&i.onGameLoadFinished()},s.onGameMainStart=function(){e.Log.warn("===> onGameMainStart"),e.Infoc.reportAction(n.MAIN_PAGE),i&&i.onGameMainStart()},s.onGameStart=function(){e.Log.warn("===> onGameStart"),i&&i.onGameStart()},s.onGameStop=function(){e.Log.warn("===> onGameStop"),i&&i.onGameStop()},s.onGameLevelPass=function(l){e.Log.warn("===> onGameLevelPass: level="+l),u.reportAction(n.GAME_LEVEL_PASS),i&&i.onGameLevelPass(l)},s}();e.GameState=f;var w=function(){function s(){}return s.playBGM=function(l,g,y){if(g===void 0&&(g=!0),y===void 0&&(y=1),o)e.Log.warn("===> playBGM[mute]: "+l);else{if(!t)return e.Log.warn("===> playBGM: "+l),a.playBGM(l,g,y);e.Log.warn("===> playBGM[hide]: "+l)}},s.stopBGM=function(){e.Log.warn("===> stopBGM"),a.stopBGM()},s.playEffect=function(l,g){if(g===void 0&&(g=1),o)e.Log.warn("===> playEffect[mute]: "+l);else{if(!t)return e.Log.warn("===> playEffect: "+l),a.playEffect(l,g);e.Log.warn("===> playEffect[hide]: "+l)}},s.mute=function(){o||(e.Log.warn("===> mute"),o=!0,a.pauseBGM())},s.unmute=function(){o&&(e.Log.warn("===> unmute"),o=!1,a.resumeBGM())},s}();e.Audio=w})(p||(p={})),window.CMPlay=p,function(e){var c=void 0;e.showBanner=function(){c==null&&(c=setTimeout(this._refreshBanner,3e4),p.showBanner())},e.hideBanner=function(){e._clearTimeHandler(),p.hideBanner()},e.startRewardVideo=function(n){p.startRewardVideo(n)},e.showInterstitialAd=function(){p.showInterstitialAd()},e._clearTimeHandler=function(){c!=null&&(clearTimeout(c),c=void 0)},e._refreshBanner=function(){e._clearTimeHandler(),c=setTimeout(this._refreshBanner,3e4),p.hideBanner(),p.showBanner()}}(L||(L={})),window.CMPlayAd=L,function(e){var c=function(){function n(){}return n.getServerURL=function(){return e.Global.isOversea?"https://h5game_oversea.cmcm.com/":e.Global.debugService?"https://pianotiles-minigame.cmcm.com/":"https://minigame.cmcm.com/"},n.loginCMPlay=function(t){var o,a=e.getSystemInfoSync(),i=n.getServerURL();e.Log.warn("loginCMPlay =>"),i+="warty/auth/h5_login",o={gameid:a.gameId,cm_token:a.gameToken},e.Log.warn("url => "+i),e.NetworkUtil.request({url:i,data:o,header:{"content-type":"application/json"},method:"POST",dataType:"json",checkAuthorization:!1,success:function(r){var d;if((d=typeof r=="string"?JSON.parse(r):r)&&d.status==0&&d.result){var u=d.result.playerid,m=d.result.token,h=d.result.is_new_user,f=d.timestamp,w=0;h!=null&&h!=null&&0<(""+h).length&&(isNaN(+(""+h))||(w=+(""+h))),e.Global.isOutputDebug&&(e.Log.warn("req => "+JSON.stringify(o)),e.Log.warn("resp => "+JSON.stringify(d))),e.Log.log("loginCMPlay => SUCCESS"),e.Log.log("playerId: "+u),e.Log.log("token: "+m),e.Log.log("isNewUser: "+w),e.Log.log("timestamp: "+f),t.callback&&t.callback(!0,u,m,w,f)}else e.Log.error("loginCMPlay => FAILED A"),e.Log.error("req => "+JSON.stringify(o)),e.Log.error("resp => "+JSON.stringify(d)),t.callback&&t.callback(!1)},fail:function(r){e.Log.error("loginCMPlay => FAILED B"),e.Log.error("req => "+JSON.stringify(o)),e.Log.error(r),t.callback&&t.callback(!1)}})},n.setStorage=function(t){if(!e.Global.data.mCMPlayerId||!e.Global.data.mCMToken)return e.Log.error("setStorage:: Missing playerId/token"),void(t.fail&&t.fail(null));var o=n.getServerURL()+"warty/storage/set";n.postRequest(o,t.kvDatas,t.success,t.fail)},n.getStorage=function(t){if(!e.Global.data.mCMPlayerId||!e.Global.data.mCMToken)return e.Log.error("getStorage:: Missing playerId/token"),void(t.fail&&t.fail(null));var o=n.getServerURL()+"warty/storage/get";n.postRequest(o,t.keys,t.success,t.fail)},n.delStorage=function(t){if(!e.Global.data.mCMPlayerId||!e.Global.data.mCMToken)return e.Log.error("delStorage:: Missing playerId/token"),void(t.fail&&t.fail(null));var o=n.getServerURL()+"warty/storage/del";n.postRequest(o,t.keys,t.success,t.fail)},n.getServerTime=function(t){if(!e.Global.data.mCMPlayerId||!e.Global.data.mCMToken)return e.Log.error("delStorage:: Missing playerId/token"),void(t.fail&&t.fail(null));var o=n.getServerURL()+"warty/storage/get";n.postRequest(o,["_timestamp_"],function(a){a&&a.timestamp!==void 0?t.success&&t.success(a.timestamp):t.fail&&t.fail(null)},t.fail)},n.createAuthorization=function(t,o){return"CMCM "+e.hex_hmac_sha1(o,JSON.stringify(t))},n.getBody=function(t,o){var a;return o?a=t:(a={}).data=t,a.gameid=e.Global.public.game_id,a.playerid=e.Global.data.mCMPlayerId,a.timestamp=e.SysUtil.getTimeSeconds(),a},n.postRequest=function(t,o,a,i,r,d){r===void 0&&(r=!1),d===void 0&&(d=!0);var u=n.getBody(o,r),m=n.createAuthorization(u,e.Global.data.mCMToken);e.NetworkUtil.request({url:t,data:u,header:{Authorization:m},method:"POST",dataType:"string",token:e.Global.data.mCMToken,checkAuthorization:d,success:function(h){var f=JSON.parse(h);f&&f.status==0?a&&a(f):i&&i(f)},fail:function(h){i&&i(h)}})},n}();e.CMService=c}(p||(p={})),function(e){var c=function(){function n(){}return n.prototype.init=function(t){t.bannerAdId||(t.bannerAdId="908427599"),t.videoAdId||(t.videoAdId="908427310"),t.gdtVideoAdId||(t.gdtVideoAdId="3060856285839507"),window.RewardVideo&&(t.bannerAdId!=null&&window.RewardVideo.setBannerAdId&&(e.Log.warn("init setBannerAdId => "+t.bannerAdId),window.RewardVideo.setBannerAdId(t.bannerAdId)),t.videoAdId!=null&&window.RewardVideo.setRewardVideoADId&&(e.Log.warn("init setRewardVideoADId => "+t.videoAdId),window.RewardVideo.setRewardVideoADId(t.videoAdId)),t.interstitalAdId!=null&&window.RewardVideo.setInteractionPosId&&(e.Log.warn("init setInteractionPosId => "+t.interstitalAdId),window.RewardVideo.setInteractionPosId(t.interstitalAdId)),t.gdtVideoAdId!=null&&window.RewardVideo.setGDTRewardVideoAdId&&(e.Log.warn("init setGDTRewardVideoAdId => "+t.gdtVideoAdId),window.RewardVideo.setGDTRewardVideoAdId(t.gdtVideoAdId)))},n.prototype.startRewardVideo=function(t){return window.RewardVideo&&window.RewardVideo.startRewardVideo?(e.Global.data.mRewardVideoCallback=t,window.RewardVideo.startRewardVideo(),!0):(t&&t(!1),!1)},n.prototype.showBanner=function(){return!(!window.RewardVideo||!window.RewardVideo.showBanner||(window.RewardVideo.showBanner(),0))},n.prototype.hideBanner=function(){return!(!window.RewardVideo||!window.RewardVideo.hideBanner||(window.RewardVideo.hideBanner(),0))},n.prototype.showInterstitialAd=function(t){return window.RewardVideo&&window.RewardVideo.showInteractionAd?(window.RewardVideo.showInteractionAd(),t&&t(!0),!0):(t&&t(!1),!1)},n.prototype.showOpenGameAd=function(){return!(!window.RewardVideo||!window.RewardVideo.showOpenGameAd||(window.RewardVideo.showOpenGameAd(),0))},n}();e.CMAd=c}(p||(p={})),function(e){var c=function(){function n(){this.mVideoNative=void 0,this.mVideoCallback=void 0,this.mIsOnReward=!1}return n.prototype.init=function(t){var o,a,i=this,r=window.TencentGDT||[];(window.TencentGDT=r).push({placement_id:"5040452748174201",app_id:"40307385928989",type:"rewardVideo",onComplete:function(d){if(d.code==0){var u=new r.NATIVE.rewardVideoAd(function(m){var h=typeof m=="string"?JSON.parse(m):m;h&&h.data&&(h.data.action==="onADClose"?(i.mVideoCallback&&i.mVideoCallback(i.mIsOnReward),u.loadAd()):h.data.action==="onReward"&&(i.mIsOnReward=!0))});u.loadAd(),i.mVideoNative=u}}}),o=document.getElementsByTagName("head")[0],(a=document.createElement("script")).async=!0,a.src="https://qzs.qq.com/qzone/biz/res/i.js",o&&o.insertBefore(a,o.firstChild)},n.prototype.startRewardVideo=function(t){return this.mVideoNative?(this.mIsOnReward=!1,this.mVideoCallback=t,this.mVideoNative.showAd(),!0):(t&&t(!1),!1)},n.prototype.showBanner=function(){return!1},n.prototype.hideBanner=function(){return!1},n.prototype.showInterstitialAd=function(t){return t&&t(!1),!1},n.prototype.showOpenGameAd=function(){return!1},n}();e.GDTAd=c}(p||(p={})),function(e){var c=function(){function n(){this.isRewardVideoComplete=!1}return n.prototype.init=function(){window.addEventListener("message",function(t){if(t&&t.source==window.parent)try{var o=JSON.parse(t.data);if(o&&o.back_adpos){var a=o.back_adpos;a=="onRewardADShow"?this.isRewardVideoComplete=!1:a=="onRewardVideoComplete"?this.isRewardVideoComplete=!0:a=="onRewardADClose"&&e.Global.data.mRewardVideoCallback&&(e.Global.data.mRewardVideoCallback(this.isRewardVideoComplete),e.Global.data.mRewardVideoCallback=void 0)}}catch(i){}}.bind(this),!1)},n.prototype.startRewardVideo=function(t){return e.Global.data.mRewardVideoCallback=t,window.parent.postMessage(JSON.stringify({adpos:"apiVideoAd"}),"*"),!0},n.prototype.showBanner=function(){return window.parent.postMessage(JSON.stringify({adpos:"apiBannerAd",bAdType:"show"}),"*"),!1},n.prototype.hideBanner=function(){return window.parent.postMessage(JSON.stringify({adpos:"apiBannerAd",bAdType:"dismiss"}),"*"),!1},n.prototype.showInterstitialAd=function(t){return t&&t(!1),!1},n.prototype.showOpenGameAd=function(){return!1},n}();e.IQIYIAd=c}(p||(p={})),function(e){var c=function(){function n(){this.mEventList=void 0,this.mEventList=new Array}return n.prototype.init=function(t){var o=this;e.SysUtil.loadSDKScript("https://game-cdn.poki.com/scripts/v2/poki-sdk.js",!1,function(){e.Log.warn("POKIAd::loadSDKScript => PokiSDK is Ready"),PokiSDK.init().then(function(){e.Log.log("POKI initialized"),o.processEventList()}).catch(function(){e.Log.log("Adblock enabled"),o.processEventList()})})},n.prototype.startRewardVideo=function(t){var o=this;return window.PokiSDK?(e.Log.warn("POKIAd::startRewardVideo => invoke"),this.onActivityHide(),PokiSDK.rewardedBreak().then(function(a){a?(e.Log.log("POKIAd::startRewardVideo => reward"),t&&t(!0)):(e.Log.log("POKIAd::startRewardVideo => unrewarded"),t&&t(!1)),o.onActivityShow()}),!0):(e.Log.error("POKIAd::startRewardVideo => Missing PokiSDK env"),t&&t(!1),!1)},n.prototype.showBanner=function(){return window.PokiSDK?(e.Log.warn("POKIAd::showBanner => invoke"),!0):(e.Log.error("POKIAd::showBanner => Missing PokiSDK env"),!1)},n.prototype.hideBanner=function(){return window.PokiSDK?(e.Log.warn("POKIAd::hideBanner => invoke"),!0):(e.Log.error("POKIAd::hideBanner => Missing PokiSDK env"),!1)},n.prototype.showInterstitialAd=function(t){var o=this;return window.PokiSDK?(this.onActivityHide(),PokiSDK.commercialBreak().then(function(){e.Log.log("POKIAd::showInterstitialAd => commercialBreak finish"),t&&t(!0),o.onActivityShow()}).catch(function(){e.Log.log("POKIAd::showInterstitialAd => commercialBreak catch"),t&&t(!1),o.onActivityShow()})):(e.Log.error("POKIAd::showInterstitialAd => Missing PokiSDK env"),t&&t(!1)),!1},n.prototype.gameLoadingStart=function(){this.mEventList.unshift("loading_start"),this.processEventList()},n.prototype.gameLoadingFinished=function(){this.mEventList.unshift("loading_finished"),this.processEventList()},n.prototype.gamePlayStart=function(){window.PokiSDK&&PokiSDK.gameplayStart()},n.prototype.gamePlayStop=function(){window.PokiSDK&&PokiSDK.gameplayStop()},n.prototype.happyTime=function(t){window.PokiSDK&&(t<=0||(1<t&&(t=1),PokiSDK.happyTime(t)))},n.prototype.processEventList=function(){if(window.PokiSDK)for(;0<this.mEventList.length;){var t=this.mEventList.pop();t=="loading_start"?PokiSDK.gameLoadingStart():t=="loading_finished"&&PokiSDK.gameLoadingFinished()}},n.prototype.onActivityHide=function(){window.onActivityHide&&window.onActivityHide()},n.prototype.onActivityShow=function(){window.onActivityShow&&window.onActivityShow()},n.prototype.showOpenGameAd=function(){return!1},n}();e.POKIAd=c}(p||(p={})),function(e){var c=function(){function n(){}return n.prototype.init=function(t){e.SysUtil.loadSDKScript("https://newidea4-gamecenter-frontend.1sapp.com/game/gamesdk/prod/qtt_help.js",!1,function(){e.Log.warn("QTT::loadSDKScript => qtt_help is Ready")}),this.createContainer()},n.prototype.createContainer=function(){var t=document.createElement("style");t.setAttribute("type","text/css"),t.innerText=".titleBox{ display:none !important; };",document.body.appendChild(t)},n.prototype.startRewardVideo=function(t){return window.qtt_help?(e.Log.warn("QTTAd::startRewardVideo => invoke"),window.onActivityHide&&window.onActivityHide(),window.qtt_help.ad.showVideo(function(o){o==1?(e.Log.log("QTTAd::startRewardVideo => endedCallback rewarded"),t&&t(!0)):(e.Log.log("QTTAd::startRewardVideo => endedCallback unrewarded for "+o),t&&t(!1)),window.onActivityShow&&window.onActivityShow()},{gametype:1,rewardtype:1,data:{title:"\u9053\u5177",url:"//h5game.zhhainiao.com/cmplaysdk/qtt/gift.png"}}),!0):(e.Log.error("QTTAd::startRewardVideo => Missing qtt_help env"),t&&t(!1),!1)},n.prototype.showBanner=function(){return window.qtt_help?(e.Log.warn("QTTAd::showBanner => invoke"),window.qtt_help.ad.showBanner(),!0):(e.Log.error("QTTAd::showBanner => Missing qtt_help env"),!1)},n.prototype.hideBanner=function(){return window.qtt_help?(e.Log.warn("QTTAd::hideBanner => invoke"),window.qtt_help.ad.hideBanner(),!0):(e.Log.error("QTTAd::hideBanner => Missing qtt_help env"),!1)},n.prototype.showInterstitialAd=function(t){return this.showInteractAd(t)},n.prototype.showInteractAd=function(t){return window.qtt_help?(e.Log.warn("QTTAd::showInteractAd => invoke"),window.qtt_help.ad.showHDReward({gametype:1,rewardtype:1,data:{title:"\u9053\u5177",url:"//h5game.zhhainiao.com/cmplaysdk/qtt/gift.png"}}),t&&t(!0),!0):(e.Log.error("QTTAd::showInteractAd => Missing qtt_help env"),t&&t(!1),!1)},n.prototype.showOpenGameAd=function(){return!1},n}();e.QTTAd=c}(p||(p={})),function(e){var c=function(){function n(){}return n.prototype.init=function(t){e.SysUtil.loadSDKScript("https://newidea4-gamecenter-frontend.1sapp.com/sdk/prod/h5.v1.0.0.js?spread=required",!1,function(){e.Log.warn("QTT::loadSDKScript => qttGame is Ready")}),this.createContainer()},n.prototype.createContainer=function(){var t=document.createElement("style");t.setAttribute("type","text/css"),t.innerText=".titleBox{ display:none !important; };",document.body.appendChild(t)},n.prototype.startRewardVideo=function(t){return window.qttGame?(e.Log.warn("QTTAd::startRewardVideo => invoke"),window.onActivityHide&&window.onActivityHide(),window.qttGame.showVideo(function(o){o==1?(e.Log.log("QTTAd::startRewardVideo => endedCallback rewarded"),t&&t(!0)):(e.Log.log("QTTAd::startRewardVideo => endedCallback unrewarded for "+o),t&&t(!1)),window.onActivityShow&&window.onActivityShow()},{gametype:1,rewardtype:1,data:{title:"\u9053\u5177",url:"https://h5game.zhhainiao.com/cmplaysdk/qtt/gift.png"}}),!0):(e.Log.error("QTTAd::startRewardVideo => Missing qttGame env"),t&&t(!1),!1)},n.prototype.showBanner=function(){return window.qttGame?(e.Log.warn("QTTAd::showBanner => invoke"),window.qttGame.showBanner(),!0):(e.Log.error("QTTAd::showBanner => Missing qttGame env"),!1)},n.prototype.hideBanner=function(){return window.qttGame?(e.Log.warn("QTTAd::hideBanner => invoke"),window.qttGame.hideBanner(),!0):(e.Log.error("QTTAd::hideBanner => Missing qttGame env"),!1)},n.prototype.showInterstitialAd=function(t){return this.showInteractAd(t)},n.prototype.showInteractAd=function(t){return window.qttGame?(e.Log.warn("QTTAd::showInteractAd => invoke"),window.qttGame.showHDReward({gametype:1,rewardtype:1,data:{title:"\u9053\u5177",url:"https://h5game.zhhainiao.com/cmplaysdk/qtt/gift.png"}}),t&&t(!0),!0):(e.Log.error("QTTAd::showInteractAd => Missing qttGame env"),t&&t(!1),!1)},n.prototype.showOpenGameAd=function(){return!1},n}();e.QTTV2Ad=c}(p||(p={})),function(e){var c=function(){function n(){this.mSIAOld=void 0}return n.prototype.init=function(t){this.mSIAOld=this.createSIAOld(),this.mSIAOld.init(t)},n.prototype.createSIAOld=function(){return e.Global.public.game_page==e.PAGE.BRICK_BALL?new e.SIAdOld:new e.SIAdOld_ima},n.prototype.loadInerstitialAd=function(){},n.prototype.loadRewardAd=function(){},n.prototype.startRewardVideo=function(t){return this.mSIAOld&&this.mSIAOld.startRewardVideo(t)},n.prototype.showBanner=function(){return this.mSIAOld&&this.mSIAOld.showBanner()},n.prototype.hideBanner=function(){return this.mSIAOld&&this.mSIAOld.hideBanner()},n.prototype.showOpenGameAd=function(){return this.mSIAOld&&this.mSIAOld.showOpenGameAd()},n.prototype.showInterstitialAd=function(t){return this.mSIAOld&&this.mSIAOld.showInterstitialAd(t)},n.prototype.isSIVerNew=function(){var t=window.shareitBridge.syncInvoke("PayPhoneFare","getDeviceInfo","");return 4040797<JSON.parse(t).app_ver},n}();e.SIAd=c}(p||(p={})),function(e){var c=function(){function n(){this.inerstitialJson={},this.rewardJson={}}return n.prototype.showOpenGameAd=function(){return!1},n.prototype.init=function(t){this.inerstitialJson={gameId:t.gameName,unitId:"gti"},this.rewardJson={gameId:t.gameName,unitId:"bqr"},this.loadRewardAd()},n.prototype.loadInerstitialAd=function(){},n.prototype.loadRewardAd=function(){try{if(this.canShowAd(this.rewardJson))return;window.shareitBridge.asyncInvoke("GameAd","loadRewardAd","adLoadCallback",JSON.stringify(this.rewardJson)),console.log("GameAd::loadRewardAd => ")}catch(t){console.error("loadRewardAd error")}},n.prototype.startRewardVideo=function(t){if(!window.shareitBridge||!this.canShowAd(this.rewardJson))return e.Log.error("ShareIt::startRewardVideo => show Reward error"),t&&t(!1),window.alert("\u6FC0\u52B1\u89C6\u9891\u5E7F\u544A\u5C55\u793A\u5931\u8D25"),this.loadRewardAd(),!1;e.Log.warn("ShareIt::startRewardVideo => invoke"),this.onActivityHide(),e.Global.data.mRewardVideoCallback=t;var o=window.shareitBridge.asyncInvoke("GameAd","showRewardAd","adShowCallback",JSON.stringify(this.rewardJson));return console.log("GameAd::startRewardVideo => "+o),this.onActivityShow(),!0},n.prototype.showInterstitialAd=function(t){if(!window.shareitBridge||!this.canShowAd(this.inerstitialJson))return e.Log.error("ShareIt::showInterstitialAd => show Interstitial error"),t&&t(!1),window.alert("\u63D2\u5C4F\u5E7F\u544A\u5C55\u793A\u5931\u8D25"),this.loadInerstitialAd(),!1;this.onActivityHide(),e.Global.data.mRewardVideoCallback=t;var o=window.shareitBridge.asyncInvoke("GameAd","showInterstitialAd","adShowCallback",JSON.stringify(this.inerstitialJson));return console.log("GameAd::showInterstitialAd => "+o),this.onActivityShow(),!1},n.prototype.canShowAd=function(t){var o=window.shareitBridge.syncInvoke("GameAd","canShowAd",JSON.stringify(t));return console.log("GameAd::canShowAd => "+o),o=="true"},n.prototype.onActivityHide=function(){window.onActivityHide&&window.onActivityHide()},n.prototype.onActivityShow=function(){window.onActivityShow&&window.onActivityShow()},n.prototype.showBanner=function(){return!1},n.prototype.hideBanner=function(){return!1},n}();e.SIAdNew=c}(p||(p={})),function(e){var c=function(){function n(){this.BigadContainer=void 0,this.adTagUrl=void 0,this.googleVideoAd=void 0,this.adCallback=void 0,this.current=void 0}return n.prototype.init=function(t){e.SysUtil.loadSDKScript("https://imasdk.googleapis.com/js/sdkloader/ima3.js",!1,function(){e.Log.error("SIAdOld_ima::loadSDKScript => ima3 is Ready")}),this.createContainer()},n.prototype.createContainer=function(){var t=document.createElement("script");t.src="https://imasdk.googleapis.com/js/sdkloader/outstream.js",document.getElementsByTagName("html")[0].appendChild(t);var o=window.innerHeight,a=window.innerWidth;this.BigadContainer=document.createElement("DIV"),this.BigadContainer.id="BigadContainer",this.BigadContainer.style.width=a+"px",this.BigadContainer.style.height=o+"px",this.BigadContainer.style.position="absolute",this.BigadContainer.style.top="0",this.BigadContainer.style.left="100%",this.BigadContainer.style.zIndex="99999999999",this.BigadContainer.style.backgroundColor="#000",document.getElementsByTagName("body")[0].appendChild(this.BigadContainer);var i=document.createElement("DIV");i.style.width=a+"px",i.style.height=o+"px",i.id="adContainer",this.BigadContainer.appendChild(i),i.style.position="absolute",i.style.top="0",i.style.left="0",i.style.zIndex="9999999999"},n.prototype.startRewardVideo=function(t){var o=this;console.log("SIAdOld::onload => "+e.Global.public.game_page),this.adTagUrl=n.getAdTagUrlByPage();var a=document.getElementById("adContainer");return a||((a=document.createElement("DIV")).id="adContainer"),this.adCallback=t,this.googleVideoAd=new google.outstream.AdsController(a,this.onAdLoaded.bind(this),this.onDone.bind(this)),setTimeout(function(){o.dp_share()},1e3),e.Infoc.reportAction(e.ACTION.INTERSTITIAL_AD_REQUEST),!1},n.prototype.requestAds=function(){this.current=Date.now(),this.googleVideoAd.initialize(),console.log("SIAdOld::requestAds => "),this.googleVideoAd.requestAds(this.adTagUrl)},n.prototype.onAdLoaded=function(){console.log("SIAdOld::onAdLoaded => "),this.googleVideoAd.showAd()},n.prototype.onDone=function(){this.BigadContainer.style.left="100%",this.BigadContainer.style.transition="left 0.8s",this.BigadContainer.style.webkitTransition="left 0.8s",this.adCallback&&this.adCallback(!0),Date.now()-this.current<=3e3?e.Infoc.reportAction(e.ACTION.INTERSTITIAL_AD_ERROR):e.Infoc.reportAction(e.ACTION.INTERSTITIAL_AD_SHOW),console.log("SIAdOld::onDone => ")},n.prototype.dp_share=function(){this.requestAds(),this.BigadContainer.style.display="block",this.BigadContainer.style.left="0",this.BigadContainer.style.transition="left 0.8s",this.BigadContainer.style.webkitTransition="left 0.8s"},n.prototype.showOpenGameAd=function(){return this.startRewardVideo(void 0)},n.prototype.showBanner=function(){return!1},n.prototype.hideBanner=function(){return!1},n.prototype.showInterstitialAd=function(t){return this.startRewardVideo(t)},n.getAdTagUrlByPage=function(){var t=void 0;switch(e.Global.public.game_page){case e.PAGE.ROLL_SKY:t="https://googleads.g.doubleclick.net/pagead/ads?ad_type=video_image&client=ca-games-pub-8908317842209223&description_url=http%3A%2F%2Frolling+sky&channel=2600299995&videoad_start_delay=0&hl=en&max_ad_duration=30000";break;case e.PAGE.BRICK_BALL:t="https://googleads.g.doubleclick.net/pagead/ads?ad_type=video_image&client=ca-games-pub-8908317842209223&description_url=http%3A%2F%2Fcmcm.com&channel=6320167124&videoad_start_delay=0&hl=en&max_ad_duration=30000";break;case e.PAGE.DANC_LINE:t="https://googleads.g.doubleclick.net/pagead/ads?ad_type=video_image&client=ca-games-pub-8908317842209223&description_url=http%3A%2F%2Fh5game.zhhainiao.com&channel=9743706114&videoad_start_delay=0&hl=en&max_ad_duration=30000";break;case e.PAGE.PIANO_TILES:t="https://googleads.g.doubleclick.net/pagead/ads?ad_type=video_image&client=ca-games-pub-8908317842209223&description_url=http%3A%2F%2Fh5game.zhhainiao.com&channel=8789663194&videoad_start_delay=0&hl=en&max_ad_duration=30000";break;case e.PAGE.FARM:t="https://googleads.g.doubleclick.net/pagead/ads?ad_type=video_image&client=ca-games-pub-8908317842209223&description_url=http%3A%2F%2Fh5game.zhhainiao.com&channel=6466752186&videoad_start_delay=0&hl=en&max_ad_duration=30000";break;case e.PAGE.GAME_2048:t="https://googleads.g.doubleclick.net/pagead/ads?ad_type=video_image&client=ca-games-pub-8908317842209223&description_url=http%3A%2F%2Fh5game.zhhainiao.com&channel=5973241248&videoad_start_delay=0&hl=en&max_ad_duration=30000";break;case e.PAGE.DEEP_FISH:t="https://googleads.g.doubleclick.net/pagead/ads?ad_type=video_image&client=ca-games-pub-8908317842209223&description_url=http%3A%2F%2Fh5game.zhhainiao.com&channel=8214948128&videoad_start_delay=0&hl=en&max_ad_duration=30000";break;case e.PAGE.FRUIT_NINJA:t="https://googleads.g.doubleclick.net/pagead/ads?ad_type=video_image&client=ca-games-pub-8908317842209223&description_url=http%3A%2F%2Fh5game.zhhainiao.com&channel=6348645762&videoad_start_delay=0&hl=en&max_ad_duration=30000";break;case e.PAGE.FOOTBALL:t="https://googleads.g.doubleclick.net/pagead/ads?ad_type=video_image&client=ca-games-pub-8908317842209223&description_url=http%3A%2F%2Fh5game.zhhainiao.com&channel=3912794931&videoad_start_delay=0&hl=en&max_ad_duration=30000";break;case e.PAGE.SAIL_LEGEND:t="https://googleads.g.doubleclick.net/pagead/ads?ad_type=video_image&client=ca-games-pub-8908317842209223&description_url=http%3A%2F%2Fh5game.zhhainiao.com&channel=3074302084&videoad_start_delay=0&hl=en&max_ad_duration=30000";break;case e.PAGE.STARS_2:t="https://googleads.g.doubleclick.net/pagead/ads?ad_type=video_image&client=ca-games-pub-8908317842209223&description_url=http%3A%2F%2Fh5game.zhhainiao.com&channel=9552134428&videoad_start_delay=0&hl=en&max_ad_duration=30000";break;case e.PAGE.SNAKE_BLOCK:t="https://googleads.g.doubleclick.net/pagead/ads?ad_type=video_image&client=ca-games-pub-8908317842209223&description_url=http%3A%2F%2Fh5game.zhhainiao.com&channel=7432349494&videoad_start_delay=0&hl=en&max_ad_duration=30000";break;default:t="https://googleads.g.doubleclick.net/pagead/ads?ad_type=video_image&client=ca-games-pub-8908317842209223&description_url=http%3A%2F%2Fcmcm.com&channel=6320167124&videoad_start_delay=0&hl=en&max_ad_duration=30000"}return t},n}();e.SIAdOld=c}(p||(p={})),function(e){var c=function(){function n(){this.BigadContainer=void 0,this.adContainer=void 0,this.adHeight=document.body.clientHeight||640,this.adWidth=document.body.clientWidth||360}return n.prototype.init=function(t){e.SysUtil.loadSDKScript("https://imasdk.googleapis.com/js/sdkloader/ima3.js",!1,function(){e.Log.error("SIAdOld_ima::loadSDKScript => ima3 is Ready")}),this.createContainer()},n.prototype.createContainer=function(){this.BigadContainer=document.createElement("DIV"),this.BigadContainer.id="mainContainer",this.BigadContainer.style.display="none",this.BigadContainer.style.position="relative",this.BigadContainer.style.width="1px",this.BigadContainer.style.height="1px",document.getElementsByTagName("body")[0].appendChild(this.BigadContainer);var t=document.createElement("DIV");t.id="content",t.style.position="absolute",t.style.top="0",t.style.left="0",t.style.width="100%",t.style.height="100%",this.videoContent=document.createElement("video"),this.videoContent.id="contentElement",this.videoContent.style.width="100%",this.videoContent.style.height="100%",this.videoContent.style.overflow="hidden",t.appendChild(this.videoContent),this.BigadContainer.appendChild(t),this.adContainer=document.createElement("DIV"),this.adContainer.id="adContainer",this.adContainer.style.position="absolute",this.adContainer.style.top="0",this.adContainer.style.left="0",this.adContainer.style.width="100%",this.adContainer.style.height="100%",this.adContainer.style.zIndex="9999999999",this.adContainer.style.background="#000",this.BigadContainer.appendChild(this.adContainer)},n.prototype.createGoogle=function(){this.adDisplayContainer=new google.ima.AdDisplayContainer(document.getElementById("adContainer"),this.videoContent),this.adsLoader=new google.ima.AdsLoader(this.adDisplayContainer),this.adsLoader.getSettings().setDisableCustomPlaybackForIOS10Plus(!0),this.adsLoader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.onAdsManagerLoaded.bind(this),!1),this.adsLoader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdError.bind(this),!1),this.videoContent.onended=function(){this.adsLoader.contentComplete()};var t=new google.ima.AdsRequest;t.adTagUrl=e.SIAdOld.getAdTagUrlByPage(),t.linearAdSlotWidth=this.adWidth,t.linearAdSlotHeight=this.adHeight,t.nonLinearAdSlotWidth=this.adWidth,t.nonLinearAdSlotHeight=this.adHeight,this.adsLoader.requestAds(t),e.Log.error("SIAdOld_ima::createGoogle =>")},n.prototype.startRewardVideo=function(t){return e.Log.error("SIAdOld_ima::startRewardVideo 1=> "),this.createGoogle(),this.mADCallback=t,!1},n.prototype.playAds=function(){if(this.adsManager){this.videoContent.load(),this.adDisplayContainer.initialize(),e.Infoc.reportAction(e.ACTION.INTERSTITIAL_AD_REQUEST);try{var t=document.body.clientWidth||360,o=document.body.clientHeight||640;this.adsManager.init(t,o,google.ima.ViewMode.NORMAL),this.adsManager.start()}catch(a){e.Log.error("SIAdOld_ima::startRewardVideo 2=> "+a),e.Infoc.reportAction(e.ACTION.INTERSTITIAL_AD_ERROR),this.videoContent.play()}}else e.Log.error("SIAdOld_ima::startRewardVideo 3=> ")},n.prototype.onAdsManagerLoaded=function(t){e.Log.error("SIAdOld_ima::onAdsManagerLoaded 1=> ");var o=new google.ima.AdsRenderingSettings;o.restoreCustomPlaybackStateOnAdBreakComplete=!0,this.adsManager=t.getAdsManager(this.videoContent,o),e.Log.error("SIAdOld_ima::onAdsManagerLoaded 2=> "),this.adsManager.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdError.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,this.onContentPauseRequested.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,this.onContentResumeRequested.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.ALL_ADS_COMPLETED,this.onAdEvent.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.LOADED,this.onAdEvent.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.STARTED,this.onAdEvent.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.COMPLETE,this.onAdEvent.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.SKIPPED,this.onAdEvent.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.USER_CLOSE,this.onAdEvent.bind(this)),this.playAds()},n.prototype.onAdEvent=function(t){e.Log.error("SIAdOld_ima::onAdEvent 1=> "+t.type);var o=t.getAd(),a=this;switch(t.type){case google.ima.AdEvent.Type.LOADED:o.isLinear()||a.videoContent.play();break;case google.ima.AdEvent.Type.STARTED:o.isLinear()&&(a.intervalTimer=setInterval(function(){var i=a.adsManager.getRemainingTime();console.log("remainingTime",i),i<=0&&(clearInterval(a.intervalTimer),a.intervalTimer=null,a.BigadContainer.style.display="none")},300)),a.BigadContainer.style.display="block",e.Infoc.reportAction(e.ACTION.INTERSTITIAL_AD_SHOW);break;case google.ima.AdEvent.Type.COMPLETE:case google.ima.AdEvent.Type.ALL_ADS_COMPLETED:a.BigadContainer.style.display="none",e.Infoc.reportAction(e.ACTION.INTERSTITIAL_AD_DONE),a.mADCallback&&a.mADCallback(!0);break;case google.ima.AdEvent.Type.SKIPPED:case google.ima.AdEvent.Type.USER_CLOSE:a.intervalTimer&&(clearInterval(a.intervalTimer),a.intervalTimer=null),a.BigadContainer.style.display="none"}},n.prototype.onAdError=function(t){var o=t.getError();e.Infoc.reportErrMsg("",o.getErrorCode(),""),e.Log.error("SIAdOld_ima::onAdError => "+t.getError()),this.adsManager&&this.adsManager.destroy()},n.prototype.onContentPauseRequested=function(){this.videoContent.pause(),e.Log.error("SIAdOld_ima::onContentPauseRequested=> ")},n.prototype.onContentResumeRequested=function(){this.videoContent.play(),e.Log.error("SIAdOld_ima::onContentResumeRequested=> ")},n.prototype.showBanner=function(){return!1},n.prototype.hideBanner=function(){return!1},n.prototype.showOpenGameAd=function(){return this.startRewardVideo(void 0)},n.prototype.showInterstitialAd=function(t){return this.startRewardVideo(t)},n}();e.SIAdOld_ima=c}(p||(p={})),function(e){var c;(c=e.LoginType||(e.LoginType={}))[c.LIEBAO=1]="LIEBAO",c[c.QQ=2]="QQ",c[c.WEIXIN=3]="WEIXIN",c[c.PHONE_NUM=4]="PHONE_NUM",c[c.QTT=5]="QTT"}(p||(p={})),function(e){var c=function(){function n(){}return n.getPlatform=function(){return n.POKI},n.detect=function(){var t=e.getQueryString("platform","default");return t!="qtt"||e.getQueryString("ticket","default")=="default"&&!/qukan/i.test(navigator.userAgent)?e.getQueryString("agent","default")=="pps"&&e.getQueryString("user_id","default")!="default"?n.IQIYI:t=="gdt"?n.GDT:t=="poki"?n.POKI:t=="shareit"?n.SHAREIT:n.CMPLAY:n.QTT},n.getXAID=function(){var t=window.localStorage.getItem("cmplay_xaid");return t||(t=e.SysUtil.generateXAID(),e.Log.warn("Generate XAID => "+t),window.localStorage.setItem("cmplay_xaid",t+"")),t},n.CMPLAY=0,n.QTT=1,n.GDT=2,n.POKI=3,n.IQIYI=4,n.SHAREIT=5,n.mPlatform=void 0,n}();e.Platform=c}(p||(p={})),function(e){var c=void 0,n=function(){function o(){}return o.getHost=function(){return c!=null?c:c=e.Global.debugInfoc?"http://111.230.84.242/g/v1":e.Global.isOversea?"https://helpgamemoneysdkov1.cheetahfun.net/g/v1":"https://helpgamemoneysdk1.ksmobile.com/g/v1"},o.parseData=function(a){if(!a)return-1;var i=a.indexOf("result=");if(i<0)return-2;if(i+7>=a.length)return-3;var r=a.charAt(i+7);return parseInt(r)},o.getCommonData=function(){return e.Global.isOversea?"product_no=416&public_index=1&gm_id="+e.Global.public.xaid+"&ver=0&cn="+e.Global.public.cn+"&brand="+e.Global.public.brand+"&model="+e.Global.public.model+"&api_level=0&rom=0&rom_ver=0&cube_ver=0&uptime="+e.SysUtil.getTimeSeconds()+"&build_time=0":"product_no=394&public_index=1&xaid="+e.Global.public.xaid+"&ver=0&cn="+e.Global.public.cn+"&mcc=0&mnc=0&brand="+e.Global.public.brand+"&model="+e.Global.public.model+"&api_level=0&rom=0&rom_ver=0&uptime="+e.SysUtil.getTimeSeconds()+"&accountid="+e.Global.public.accountid+"&cube_ver=0&iid=0&imei=0&mac=0"},o.report=function(a,i,r){var d=o.getCommonData(),u=o.getHost()+"/?"+d+"&"+i,m=encodeURI(u),h=Date.now(),f=e.Global.debugInfoc?i:"";o.httpRequest({url:m,method:"GET",success:function(w,s){var l=Date.now();s?o.parseData(s)==1?(e.Log.log("InfocImpl::["+a+"] "+f+" "+(l-h)+"ms => SUCCESS"),setTimeout(function(){var g=e.CMInfocCache.pop();g&&0<g.retry&&o.report(g.id,g.info,g.retry-1)},0)):(e.Log.warn(s),0<r?(e.Log.log("InfocImpl::["+a+"] "+f+" "+(l-h)+"ms "+r+" => FAILED1"),e.CMInfocCache.push(a,i,r-1)):e.Log.log("InfocImpl::["+a+"] "+f+" "+(l-h)+"ms "+r+" => FAILED1 DROP")):0<r?(e.Log.log("InfocImpl::["+a+"] "+f+" "+(l-h)+"ms "+r+" => FAILED2"),e.CMInfocCache.push(a,i,r-1)):e.Log.log("InfocImpl::["+a+"] "+f+" "+(l-h)+"ms "+r+" => FAILED2 DROP")},fail:function(w,s){0<r?(e.Log.error("InfocImpl::table:"+a+" code:"+w+" => FAILED3"),e.CMInfocCache.push(a,i,r-1)):e.Log.error("InfocImpl::table:"+a+" code:"+w+" => FAILED3 DROP")}})},o.httpRequest=function(a,i){i===void 0&&(i=3);var r=new XMLHttpRequest;for(var d in r.open(a.method,a.url),a.header)r.setRequestHeader(d,a.header[d]);r.onreadystatechange=function(){if(r.readyState==4)if(r.status==200){if(a.success)if(a.dataType=="json")try{a.success(r.status,JSON.parse(r.responseText),r.getAllResponseHeaders())}catch(u){a.success(r.status,r.responseText,r.getAllResponseHeaders())}else a.success(r.status,r.responseText,r.getAllResponseHeaders())}else 1<i?o.httpRequest(a,i-1):a.fail&&a.fail(r.status,r.responseText)},r.send(JSON.stringify(a.data))},o}();e.CMInfocImpl=n;var t=function(){function o(){this.mMap=new e.Dictionary}return o.prototype.set=function(a,i){if(a==null||a==null)throw new Error("ERROR: key cannot be null or undefined!");if(i==null||i==null)throw new Error("ERROR: value cannot be null or undefined!");return this.mMap.put(a,i),this},o.prototype.buildDataString=function(a){for(var i="business_index="+a+"&",r=this.mMap.size(),d=this.mMap.getPairs(),u=0;u<r;u++){var m=d[u];i+=m.key+"="+m.value+"&"}return 1<i.length&&(i=i.slice(0,i.length-1)),i},o.prototype.report=function(a){var i=this.buildDataString(a),r=e.SysUtil.getTimeSeconds();Math.abs(r-e.Global.initTime)<3?e.CMInfocCache.push(a,i,10):setTimeout(function(){n.report(a,i,10)},0)},o}();e.CMInfoc=t}(p||(p={})),function(e){var c=[],n=void 0,t=function(){function o(){}return o.push=function(a,i,r){o.resetWakeupTimer();var d={id:a,info:i,retry:r};c.push(d),1e3<c.length&&c.pop()},o.pop=function(){return c.shift()},o.resetWakeupTimer=function(){n&&(clearTimeout(n),n=void 0),n=setTimeout(function(){var a=o.pop();a&&e.CMInfocImpl.report(a.id,a.info,a.retry)},5e3)},o}();e.CMInfocCache=t}(p||(p={})),function(e){var c=function(){function n(){}return n.report=function(t){e.Global.public.game_page<1&&e.Log.error("###### ERROR: Invoke CMPlay.init before reportAction !!! ######");var o=new e.CMInfoc;o.set("uptime2",e.SysUtil.getTimeSeconds()),o.set("page",e.Global.public.game_page),o.set("action",t),o.set("x5",0),o.set("game_ver",e.Global.public.game_ver),o.set("sdk_ver",e.SDK_VER),o.set("game_type",""),o.set("network","0"),e.Global.isOversea?o.report(104):(o.set("gamename",e.Global.public.game_name),o.report(121))},n}();e.cmplay_action=c}(p||(p={})),function(e){var c=function(){function n(){}return n.report=function(t,o,a){e.Global.public.game_page<1&&e.Log.error("###### ERROR: Invoke CMPlay.init before reportAction !!! ######");var i=new e.CMInfoc;i.set("uptime2",e.SysUtil.getTimeSeconds()),i.set("url",t),i.set("errcode",o),i.set("errmsg",a),i.set("network","0"),e.Global.isOversea,i.report(103)},n}();e.cmplay_error=c}(p||(p={})),function(e){var c=function(){function n(){this.mAd=void 0}return n.prototype.init=function(t){this.mAd=new e.CMAd,this.mAd.init(t),window.RewardVideo&&window.RewardVideo.setGameName&&(e.Log.warn("init setGameName => "+t.gameName),window.RewardVideo.setGameName(t.gameName))},n.prototype.login=function(t){var o=e.getSystemInfoSync();!o.gameToken||o.gameToken.length<10?(e.Log.error("CMPlay::Missing gameToken!!!"),t&&t(!1,void 0,void 0,0,0)):e.CMService.loginCMPlay({callback:function(a,i,r,d,u){i&&(e.Global.data.mCMPlayerId=i),r&&(e.Global.data.mCMToken=r),t&&t(a,i,r,d,u)}})},n.prototype.startRewardVideo=function(t){return this.mAd.startRewardVideo(t)},n.prototype.showOpenGameAd=function(){return this.mAd.showOpenGameAd()},n.prototype.showBanner=function(){return this.mAd.showBanner()},n.prototype.hideBanner=function(){return this.mAd.hideBanner()},n.prototype.showInterstitialAd=function(t){return this.mAd.showInterstitialAd()},n.prototype.getAppID=function(){if(window.GameJs&&window.GameJs.getAppID)return window.GameJs.getAppID()},n.prototype.getUID=function(){return window.GameJs&&window.GameJs.getUID?window.GameJs.getUID():e.Platform.getXAID()},n.prototype.getGameToken=function(){return window.GameJs&&window.GameJs.getGameToken?window.GameJs.getGameToken():""},n.prototype.getPayload=function(){return""},n.prototype.setStorageList=function(t,o){e.CMService.setStorage({kvDatas:t,success:function(a){o&&o(!0)},fail:function(a){e.Log.error("setStorageList => failed"),o&&o(!1)}})},n.prototype.getStroageList=function(t,o){e.CMService.getStorage({keys:t,success:function(a){a&&a.result&&a.result.data?o&&o(a.result.data):o&&o(void 0)},fail:function(a){e.Log.error("getStroageList => failed"),o&&o(void 0)}})},n.prototype.delStroageList=function(t,o){e.CMService.delStorage({keys:t,success:function(a){o&&o(!0)},fail:function(a){e.Log.error("delStroageList => failed"),o&&o(!1)}})},n.prototype.onGameLoadStart=function(){},n.prototype.onGameLoadFinished=function(){},n.prototype.onGameMainStart=function(){},n.prototype.onGameStart=function(){},n.prototype.onGameStop=function(){},n.prototype.onGameLevelPass=function(t){},n}();e.CM=c}(p||(p={})),function(e){var c=function(){function n(){this.mCMAPI=void 0,this.mAd=void 0,this.mGameToken=void 0}return n.prototype.init=function(){var t=this,o=this.getUID();this.mAd=new e.GDTAd,this.mAd.init(),this.mCMAPI=new e.CMAPI({vmframe:"https://superman.cmcm.com/cmplaysdk/gdt/gdt.js",appid:"guangdiantong_gamecenter",appkey:"201903046679381196927",host:"gdt-gc-gateway-svc.beike.cn",uuid:o}),this.mCMAPI.getGameToken(function(a){e.Log.warn("GDT::init => gameToken: "+a),t.mGameToken=a})},n.prototype.login=function(t){var o=this,a=this.mCMAPI.getTokenState();a==e.TokenState.TOKEN_READY?(e.Global.data.mSystemInfo.gameToken=this.getGameToken(),e.Log.log("GDT::login => gameToken:"+e.Global.data.mSystemInfo.gameToken),e.CMService.loginCMPlay({callback:function(i,r,d,u,m){r&&(e.Global.data.mCMPlayerId=r),d&&(e.Global.data.mCMToken=d),t&&t(i,r,d,u,m)}})):a==e.TokenState.TOKEN_FAILD?(e.Log.error("GDT::login => failed"),t&&t(!1,void 0,void 0,0,0)):(e.Log.warn("GDT::login => delay, tokenState:"+a),setTimeout(function(){o.login(t)},100))},n.prototype.startRewardVideo=function(t){return this.mAd.startRewardVideo(t)},n.prototype.showOpenGameAd=function(){return this.mAd.showOpenGameAd()},n.prototype.showBanner=function(){return this.mAd.showBanner()},n.prototype.hideBanner=function(){return this.mAd.hideBanner()},n.prototype.showInterstitialAd=function(t){var o=this.getInterstitalAdCount();return this.plusInterstitalAdCount(),e.Log.warn("GDT::showInterstitialAd refCount="+o),o%3==2?this.mAd.showInterstitialAd(t):(t&&t(!1),!1)},n.prototype.getAppID=function(){return"gdt"},n.prototype.getUID=function(){var t=e.getQueryString("uuid","");return t!=""&&10<t.length?t:e.Platform.getXAID()},n.prototype.getGameToken=function(){return this.mGameToken},n.prototype.getPayload=function(){return this.mCMAPI.getPayload()},n.prototype.setStorageList=function(t,o){e.CMService.setStorage({kvDatas:t,success:function(a){o&&o(!0)},fail:function(a){e.Log.error("GDT::setStorageList => failed"),o&&o(!1)}})},n.prototype.getStroageList=function(t,o){e.CMService.getStorage({keys:t,success:function(a){a&&a.result&&a.result.data?o&&o(a.result.data):o&&o(void 0)},fail:function(a){e.Log.error("GDT::getStroageList => failed"),o&&o(void 0)}})},n.prototype.delStroageList=function(t,o){e.CMService.delStorage({keys:t,success:function(a){o&&o(!0)},fail:function(a){e.Log.error("GDT::delStroageList => failed"),o&&o(!1)}})},n.prototype.getInterstitalAdCount=function(){return Number(window.localStorage.getItem("gdt_interstital_ad_pref")||"0")},n.prototype.plusInterstitalAdCount=function(){var t=this.getInterstitalAdCount()+1;window.localStorage.setItem("gdt_interstital_ad_pref",t+"")},n.prototype.onGameLoadStart=function(){},n.prototype.onGameLoadFinished=function(){},n.prototype.onGameMainStart=function(){},n.prototype.onGameStart=function(){},n.prototype.onGameStop=function(){},n.prototype.onGameLevelPass=function(t){},n}();e.GDT=c}(p||(p={})),function(e){var c=function(){return"iqiyi_gamecenter_create_role_"+e.Global.public.game_page},n=function(){function t(){this.mCMAPI=void 0,this.mAd=void 0,this.mGameToken=void 0}return t.prototype.init=function(){var o=this,a=this.getUID();this.mAd=new e.IQIYIAd,this.mAd.init(),this.mCMAPI=new e.CMAPI({vmframe:"https://superman.cmcm.com/cmplaysdk/api/iqiyi.js",appid:"iqiyi_gamecenter",appkey:"201903046679381196927",host:"iqiyigame-gateway-svc.beike.cn",uuid:a}),this.mCMAPI.getGameToken(function(i){e.Log.warn("IQIYI::init => gameToken: "+i),o.mGameToken=i})},t.prototype.login=function(o){var a=this,i=this.mCMAPI.getTokenState();i==e.TokenState.TOKEN_READY?(e.Global.data.mSystemInfo.gameToken=this.getGameToken(),e.Log.log("IQIYI::login => gameToken:"+e.Global.data.mSystemInfo.gameToken),e.CMService.loginCMPlay({callback:function(r,d,u,m,h){d&&(e.Global.data.mCMPlayerId=d),u&&(e.Global.data.mCMToken=u),o&&o(r,d,u,m,h)}})):i==e.TokenState.TOKEN_FAILD?(e.Log.error("IQIYI::login => failed"),o&&o(!1,void 0,void 0,0,0)):(e.Log.warn("IQIYI::login => delay"),setTimeout(function(){a.login(o)},100))},t.prototype.startRewardVideo=function(o){return this.mAd.startRewardVideo(o)},t.prototype.showOpenGameAd=function(){return this.mAd.showOpenGameAd()},t.prototype.showBanner=function(){return this.mAd.showBanner()},t.prototype.hideBanner=function(){return this.mAd.hideBanner()},t.prototype.showInterstitialAd=function(o){var a=this.getInterstitalAdCount();return this.plusInterstitalAdCount(),e.Log.warn("IQIYI::showInterstitialAd refCount="+a),a%3==2?this.mAd.showInterstitialAd(o):(o&&o(!1),!1)},t.prototype.getAppID=function(){return"iqiyi"},t.prototype.getUID=function(){var o=e.getQueryString("user_id","");return o!=""&&10<o.length?o:e.Platform.getXAID()},t.prototype.getGameToken=function(){return this.mGameToken},t.prototype.getPayload=function(){return this.mCMAPI.getPayload()},t.prototype.setStorageList=function(o,a){e.CMService.setStorage({kvDatas:o,success:function(i){a&&a(!0)},fail:function(i){e.Log.error("IQIYI::setStorageList => failed"),a&&a(!1)}})},t.prototype.getStroageList=function(o,a){e.CMService.getStorage({keys:o,success:function(i){i&&i.result&&i.result.data?a&&a(i.result.data):a&&a(void 0)},fail:function(i){e.Log.error("IQIYI::getStroageList => failed"),a&&a(void 0)}})},t.prototype.delStroageList=function(o,a){e.CMService.delStorage({keys:o,success:function(i){a&&a(!0)},fail:function(i){e.Log.error("IQIYI::delStroageList => failed"),a&&a(!1)}})},t.prototype.getInterstitalAdCount=function(){return Number(window.localStorage.getItem("iqiyi_interstital_ad_pref")||"0")},t.prototype.plusInterstitalAdCount=function(){var o=this.getInterstitalAdCount()+1;window.localStorage.setItem("iqiyi_interstital_ad_pref",o+"")},t.prototype.onGameLoadStart=function(){},t.prototype.onGameLoadFinished=function(){},t.prototype.onGameMainStart=function(){try{window.top.postMessage({type:"dataCount",msg:"server"},"*"),console.warn("IQIYI::onGameMainStart => post msg['server']")}catch(o){}if(this.isRoleCreated())console.warn("IQIYI::onGameMainStart => skip post msg['role'] for created before");else try{window.top.postMessage({type:"dataCount",msg:"role"},"*"),this.setRoleCreated(),console.warn("IQIYI::onGameMainStart => post msg['role']")}catch(o){}},t.prototype.onGameStart=function(){try{window.top.postMessage({type:"dataCount",msg:"start"},"*"),console.warn("IQIYI::onGameStart => post msg['start']")}catch(o){console.error("IQIYI::onGameMainStart => ERROR:"+JSON.stringify(o.stack))}},t.prototype.onGameStop=function(){},t.prototype.onGameLevelPass=function(o){},t.prototype.isRoleCreated=function(){return(window.localStorage.getItem(c())||"0")!="0"},t.prototype.setRoleCreated=function(){window.localStorage.setItem(c(),"1")},t}();e.IQIYI=n}(p||(p={})),function(e){var c=function(){function n(){this.mCMAPI=void 0,this.mAd=void 0,this.mPokiAd=void 0,this.mGameToken=void 0}return n.prototype.init=function(){var t=this,o=this.getUID();this.mAd=this.mPokiAd=new e.POKIAd,this.mAd.init(),this.mCMAPI=new e.CMAPI({vmframe:"https://h5game.zhhainiao.com/cmplaysdk/poki/poki.js",appid:"poki_game_center",appkey:"201903046679381196927",host:"poki-gateway.xyx-svc.zhhainiao.com",uuid:o}),this.mCMAPI.getGameToken(function(a){e.Log.warn("POKI::init => gameToken: "+a),t.mGameToken=a})},n.prototype.login=function(t){var o=this,a=this.mCMAPI.getTokenState();a==e.TokenState.TOKEN_READY?(e.Global.data.mSystemInfo.gameToken=this.getGameToken(),e.Log.log("POKI::login => gameToken:"+e.Global.data.mSystemInfo.gameToken),e.CMService.loginCMPlay({callback:function(i,r,d,u,m){r&&(e.Global.data.mCMPlayerId=r),d&&(e.Global.data.mCMToken=d),t&&t(i,r,d,u,m)}})):a==e.TokenState.TOKEN_FAILD?(e.Log.error("POKI::login => failed"),t&&t(!1,void 0,void 0,0,0)):(e.Log.warn("POKI::login => delay"),setTimeout(function(){o.login(t)},100))},n.prototype.startRewardVideo=function(t){return this.mAd.startRewardVideo(t)},n.prototype.showOpenGameAd=function(){return this.mAd.showOpenGameAd()},n.prototype.showBanner=function(){return this.mAd.showBanner()},n.prototype.hideBanner=function(){return this.mAd.hideBanner()},n.prototype.showInterstitialAd=function(t){var o=this.getInterstitalAdCount();return this.plusInterstitalAdCount(),e.Log.warn("POKI::showInterstitialAd refCount="+o),o%2==2?this.mAd.showInterstitialAd(t):(t&&t(!1),!1)},n.prototype.getAppID=function(){return"poki"},n.prototype.getUID=function(){return e.Platform.getXAID()},n.prototype.getGameToken=function(){return this.mGameToken},n.prototype.getPayload=function(){return this.mCMAPI.getPayload()},n.prototype.setStorageList=function(t,o){e.CMService.setStorage({kvDatas:t,success:function(a){o&&o(!0)},fail:function(a){e.Log.error("POKI::setStorageList => failed"),o&&o(!1)}})},n.prototype.getStroageList=function(t,o){e.CMService.getStorage({keys:t,success:function(a){a&&a.result&&a.result.data?o&&o(a.result.data):o&&o(void 0)},fail:function(a){e.Log.error("POKI::getStroageList => failed"),o&&o(void 0)}})},n.prototype.delStroageList=function(t,o){e.CMService.delStorage({keys:t,success:function(a){o&&o(!0)},fail:function(a){e.Log.error("POKI::delStroageList => failed"),o&&o(!1)}})},n.prototype.getInterstitalAdCount=function(){return Number(window.localStorage.getItem("poki_interstital_ad_pref")||"0")},n.prototype.plusInterstitalAdCount=function(){var t=this.getInterstitalAdCount()+1;window.localStorage.setItem("poki_interstital_ad_pref",t+"")},n.prototype.onGameLoadStart=function(){this.mPokiAd.gameLoadingStart()},n.prototype.onGameLoadFinished=function(){this.mPokiAd.gameLoadingFinished()},n.prototype.onGameMainStart=function(){},n.prototype.onGameStart=function(){this.mPokiAd.gamePlayStart()},n.prototype.onGameStop=function(){this.mPokiAd.gamePlayStop()},n.prototype.onGameLevelPass=function(t){var o=this.getHappyIntensity(t);e.Log.warn("POKI::onGameLevelPass => happyIntensity:"+o),0<o&&this.mPokiAd.happyTime(o)},n.prototype.getHappyIntensity=function(t){var o="_"+t,a=window.localStorage.getItem("poki_level_pass")||"";if(a.indexOf(o)<0){var i=o+","+a;window.localStorage.setItem("poki_level_pass",i);var r=.1+.1*t;return .6<r&&(r=.6),r}return 0},n}();e.POKI=c}(p||(p={})),function(e){var c=["a3BWxTMAGrA9","a3BWxSuGte5d","a3BWxX98eGXS","a3BWxY9DwmEm","a3CScC7gcqEu"],n=function(){function t(){this.mCMAPI=void 0,this.mAd=void 0,this.mGameToken=void 0,this.mOpenID="0",this.mAppID="",this.mGameName="",this.loadComplete=!1,this.loadingFinished=!1}return t.prototype.init=function(){var o=this,a=this.getUID();this.mAppID=e.getQueryString("appid",""),this.mGameName=e.getQueryString("app_name","");var i=e.getQueryString("ticket","");c.indexOf(this.mAppID)!=-1?this.mAd=new e.QTTV2Ad:this.mAd=new e.QTTAd,this.mAd.init();var r={platform:"qtt",ticket:i,appid:this.mAppID};this.mCMAPI=new e.CMAPI({vmframe:"https://superman.cmcm.com/cmplaysdk/qtt/qutoutiao.js",appid:"qutoutiao",appkey:"201903046679381196927",host:"qtt-xyx-sdk-gateway-svc.beike.cn",uuid:a,loginType:e.LoginType.QTT,loginParams:r}),this.mCMAPI.getGameToken(function(d){e.Log.warn("QTT::init => gameToken: "+d),o.mGameToken=d;try{var u=o.getPayload();if(u){var m=JSON.parse(u);m&&m.union_id&&(e.Global.public.accountid=m.union_id),m&&m.open_id&&(o.mOpenID=m.open_id)}}catch(h){}}),e.Log.warn("appid => "+this.mAppID),e.Log.warn("ticket => "+i)},t.prototype.login=function(o){var a=this,i=this.mCMAPI.getTokenState();i==e.TokenState.TOKEN_READY?(e.Global.data.mSystemInfo.gameToken=this.getGameToken(),e.Log.log("QTT::login => gameToken:"+e.Global.data.mSystemInfo.gameToken),e.CMService.loginCMPlay({callback:function(r,d,u,m,h){d&&(e.Global.data.mCMPlayerId=d),u&&(e.Global.data.mCMToken=u),o&&o(r,d,u,m,h)}})):i==e.TokenState.TOKEN_FAILD?(e.Log.error("QTT::login => failed"),o&&o(!1,void 0,void 0,0,0)):(e.Log.warn("QTT::login => delay"),setTimeout(function(){a.login(o)},100))},t.prototype.startRewardVideo=function(o){return this.mAd.startRewardVideo(o)},t.prototype.showOpenGameAd=function(){return this.mAd.showOpenGameAd()},t.prototype.showBanner=function(){return this.mAd.showBanner()},t.prototype.hideBanner=function(){return this.mAd.hideBanner()},t.prototype.showInterstitialAd=function(o){var a=this.getInterstitalAdCount();return this.plusInterstitalAdCount(),e.Log.warn("QTT::showInterstitialAd refCount="+a),a%3==2?this.mAd.showInterstitialAd(o):(o&&o(!1),!1)},t.prototype.getAppID=function(){return"qtt"},t.prototype.getUID=function(){var o=e.getQueryString("uuid","");return o!=""&&10<o.length?o:e.Platform.getXAID()},t.prototype.getGameToken=function(){return this.mGameToken},t.prototype.getPayload=function(){return this.mCMAPI.getPayload()},t.prototype.setStorageList=function(o,a){e.CMService.setStorage({kvDatas:o,success:function(i){a&&a(!0)},fail:function(i){e.Log.error("QTT::setStorageList => failed"),a&&a(!1)}})},t.prototype.getStroageList=function(o,a){e.CMService.getStorage({keys:o,success:function(i){i&&i.result&&i.result.data?a&&a(i.result.data):a&&a(void 0)},fail:function(i){e.Log.error("QTT::getStroageList => failed"),a&&a(void 0)}})},t.prototype.delStroageList=function(o,a){e.CMService.delStorage({keys:o,success:function(i){a&&a(!0)},fail:function(i){e.Log.error("QTT::delStroageList => failed"),a&&a(!1)}})},t.prototype.getInterstitalAdCount=function(){return Number(window.localStorage.getItem("interstital_ad_pref")||"0")},t.prototype.plusInterstitalAdCount=function(){var o=this.getInterstitalAdCount()+1;window.localStorage.setItem("interstital_ad_pref",o+"")},t.prototype.onGameLoadStart=function(){},t.prototype.onGameLoadFinished=function(){if(!this.loadComplete){this.loadComplete=!0;try{var o={open_id:this.mOpenID,app_id:this.mAppID,game_name:this.mGameName};window.qttGame&&window.qttGame.loadComplete(o)}catch(a){console.error("QTT:onGameLoadFinished => ERROR: "+JSON.stringify(a.stack))}}},t.prototype.onGameMainStart=function(){if(!this.loadingFinished){this.loadingFinished=!0;try{var o={open_id:this.mOpenID,app_id:this.mAppID,game_name:this.mGameName};window.qttGame&&window.qttGame.loadingFinished(o)}catch(a){console.error("QTT:onGameMainStart => ERROR: "+JSON.stringify(a.stack))}}},t.prototype.onGameStart=function(){try{var o={open_id:this.mOpenID,app_id:this.mAppID,game_name:this.mGameName};window.qttGame&&window.qttGame.startPlayGame(o)}catch(a){console.error("QTT:onGameStart => "+JSON.stringify(a.stack))}},t.prototype.onGameStop=function(){},t.prototype.onGameLevelPass=function(o){try{window.qtt_help&&window.qtt_help.task&&window.qtt_help.task.completeTask(),window.qttGame&&window.qttGame.task&&window.qttGame.task.completeTask()}catch(i){e.Log.error("QTT:onGameLevelPass => "+JSON.stringify(i.stack))}try{var a={role:"",region:"",level:o+"",ce:"",round:"1",revenue:""};window.qttGame&&window.qttGame.userInfo(a)}catch(i){console.error("QTT:onGameLevelPass => "+JSON.stringify(i.stack))}},t}();e.QTT=n}(p||(p={})),function(e){var c=function(){function t(){}return t.ROLL_SKY=22,t.BRICK_BALL=30,t.DANC_LINE=29,t.PIANO_TILES=28,t.FARM=41,t.GAME_2048=27,t.DEEP_FISH=23,t.FRUIT_NINJA=54,t.FOOTBALL=36,t.SAIL_LEGEND=31,t.STARS_2=45,t.SNAKE_BLOCK=38,t}();e.PAGE=c;var n=function(){function t(){this.mCMAPI=void 0,this.mAd=void 0,this.mShareItAd=void 0,this.mGameToken=void 0}return t.prototype.init=function(o){var a=this,i=this.getUID();this.mAd=this.mShareItAd=new e.SIAd,this.mAd.init(o),this.mCMAPI=new e.CMAPI({vmframe:"https://h5game.zhhainiao.com/cmplaysdk/api/qiezikuaichuan.js",appid:"qiezikuaichuan_gamecenter",appkey:"201903046679381196927",host:"qzkc-gateway.xyx-svc.zhhainiao.com",uuid:i}),this.mCMAPI.getGameToken(function(r){e.Log.warn("ShareIt::init => gameToken: "+r),a.mGameToken=r})},t.prototype.login=function(o){var a=this,i=this.mCMAPI.getTokenState();i==e.TokenState.TOKEN_READY?(e.Global.data.mSystemInfo.gameToken=this.getGameToken(),e.Log.log("ShareIt::login => gameToken:"+e.Global.data.mSystemInfo.gameToken),e.CMService.loginCMPlay({callback:function(r,d,u,m,h){d&&(e.Global.data.mCMPlayerId=d),u&&(e.Global.data.mCMToken=u),o&&o(r,d,u,m,h)}})):i==e.TokenState.TOKEN_FAILD?(e.Log.error("ShareIt::login => failed"),o&&o(!1,void 0,void 0,0,0)):(e.Log.warn("ShareIt::login => delay"),setTimeout(function(){a.login(o)},100))},t.prototype.startRewardVideo=function(o){return this.mAd.startRewardVideo(o)},t.prototype.showOpenGameAd=function(){return this.mAd.showOpenGameAd()},t.prototype.showBanner=function(){return this.mAd.showBanner()},t.prototype.hideBanner=function(){return this.mAd.hideBanner()},t.prototype.showInterstitialAd=function(o){var a=this.getInterstitalAdCount();return this.plusInterstitalAdCount(),e.Log.warn("ShareIt::showInterstitialAd refCount="+a),this.mAd.showInterstitialAd(o)},t.prototype.getAppID=function(){return"shareit"},t.prototype.getUID=function(){return e.Platform.getXAID()},t.prototype.getGameToken=function(){return this.mGameToken},t.prototype.getPayload=function(){return this.mCMAPI.getPayload()},t.prototype.setStorageList=function(o,a){e.CMService.setStorage({kvDatas:o,success:function(i){a&&a(!0)},fail:function(i){e.Log.error("ShareIt::setStorageList => failed"),a&&a(!1)}})},t.prototype.getStroageList=function(o,a){e.CMService.getStorage({keys:o,success:function(i){i&&i.result&&i.result.data?a&&a(i.result.data):a&&a(void 0)},fail:function(i){e.Log.error("ShareIt::getStroageList => failed"),a&&a(void 0)}})},t.prototype.delStroageList=function(o,a){e.CMService.delStorage({keys:o,success:function(i){a&&a(!0)},fail:function(i){e.Log.error("ShareIt::delStroageList => failed"),a&&a(!1)}})},t.prototype.getInterstitalAdCount=function(){return Number(window.localStorage.getItem("qz_interstital_ad_pref")||"0")},t.prototype.plusInterstitalAdCount=function(){var o=this.getInterstitalAdCount()+1;window.localStorage.setItem("qz_interstital_ad_pref",o+"")},t.prototype.onGameLoadStart=function(){},t.prototype.onGameLoadFinished=function(){},t.prototype.onGameMainStart=function(){},t.prototype.onGameStart=function(){},t.prototype.onGameStop=function(){},t.prototype.onGameLevelPass=function(o){},t}();e.ShareIt=n}(p||(p={})),function(e){var c=function(){function n(){this.mBGM={src:void 0,loop:!0,volume:1,id:void 0,pausePos:-1}}return n.prototype.playBGM=function(t,o,a){var i=this;if(o===void 0&&(o=!0),a===void 0&&(a=1),this.stopBGM(),this.mBGM.src=t,this.mBGM.loop=o,this.mBGM.volume=1,this.mBGM.pausePos=-1,window.Laya){var r=Laya.SoundManager.playMusic(t,o?0:1);r.volume=a,this.mBGM.id=r}else window.cc?this.mBGM.id=cc.audioEngine.play(t,o,a):window.egret?this.getEgretSound(t,function(d){if(d){var u=d.play(0,o?0:1);u.volume=a,i.mBGM.id=u}}):console.warn("AudioImpl::playBGM => unsupported");return this.mBGM.id},n.prototype.stopBGM=function(){window.Laya?Laya.SoundManager.stopMusic():window.cc?this.mBGM.id!=null&&(cc.audioEngine.stop(this.mBGM.id),this.mBGM.id=void 0):window.egret?this.mBGM.id!=null&&(this.mBGM.id.stop(),this.mBGM.id=void 0):console.warn("AudioImpl::stopBGM => unsupported")},n.prototype.pauseBGM=function(){if(window.Laya)this.mBGM.id instanceof Laya.SoundChannel&&(t=this.mBGM.id).pause();else if(window.cc)this.mBGM.id!=null&&cc.audioEngine.pause(this.mBGM.id);else if(window.egret){if(this.mBGM.id!=null){var t=this.mBGM.id;this.mBGM.pausePos=t.position,t.stop(),this.mBGM.id=void 0}}else console.warn("AudioImpl::pauseBGM => unsupported")},n.prototype.resumeBGM=function(){var t=this;window.Laya?this.mBGM.id instanceof Laya.SoundChannel&&this.mBGM.id.resume():window.cc?this.mBGM.id!=null&&cc.audioEngine.resume(this.mBGM.id):window.egret?this.mBGM.src&&this.mBGM.pausePos!=-1&&this.getEgretSound(this.mBGM.src,function(o){if(o){var a=o.play(t.mBGM.pausePos,t.mBGM.loop?0:1);a.volume=t.mBGM.volume,t.mBGM.id=a,t.mBGM.pausePos=-1}}):console.warn("AudioImpl::resumeBGM => unsupported")},n.prototype.playEffect=function(t,o){var a=this;return o===void 0&&(o=1),window.Laya?Laya.SoundManager.playSound(t,1):window.cc?cc.audioEngine.play(t,!1,o):void(window.egret?this.getEgretSound(t,function(i){if(i){var r=i.play(0,1);r.volume=o;var d=function(){r.removeEventListener(egret.Event.SOUND_COMPLETE,d,a),r.stop(),r=void 0};r.addEventListener(egret.Event.SOUND_COMPLETE,d,a)}}):console.warn("AudioImpl::playEffect => unsupported"))},n.prototype.getEgretSound=function(t,o){var a=RES.getRes(t);a?o&&o(a):RES.getResAsync(t,function(i,r){o&&o(i)},this)},n}();e.AudioImpl=c}(p||(p={})),function(e){var c,n;(n=c=e.TokenState||(e.TokenState={}))[n.TOKEN_REQUESTING=0]="TOKEN_REQUESTING",n[n.TOKEN_READY=1]="TOKEN_READY",n[n.TOKEN_FAILD=2]="TOKEN_FAILD";var t=function(){function o(a){var i=this;this.isRequesting=!1,this.tokenState=c.TOKEN_REQUESTING,this.mAppId=void 0,this.mAppKey=void 0,this.mHost=void 0,this.mData=void 0,this.mLoginType=void 0,this.mLoginParams=void 0,this.mReqTokenCBList=[],this.mIsAPILogin=!1,this.mAppId=a.appid,this.mAppKey=a.appkey,this.mHost=a.host,this.mLoginType=a.loginType,this.mLoginParams=a.loginParams,this.tokenState=c.TOKEN_REQUESTING,this.mReqTokenCBList=[],this.mIsAPILogin=this.mLoginType!=null&&this.mLoginParams!=null,this.mData=new e.CMAPIData(this.mAppId,a.uuid),e.SysUtil.loadSDKScript(a.vmframe,!1,function(){0<i.mReqTokenCBList.length?(e.Log.warn("CMAPI::loadSDKScript => vmframe is Ready, process mReqTokenCBList"),i._requestGameToken(void 0)):e.Log.warn("CMAPI::loadSDKScript => vmframe is Ready")})}return o.prototype.getTokenState=function(){return this.tokenState},o.prototype.getPayload=function(){return this.mData.getPayload()},o.prototype.getGameToken=function(a){this.mIsAPILogin?this._getLoginGameToken(a):this._getAnonymousGameToken(a)},o.prototype._sign=function(a){try{return window.sign(a)}catch(i){e.Log.error("CMAPI::sign => ERROR "+i.message),e.Log.error(JSON.stringify(i.stack))}},o.prototype._getLoginGameToken=function(a){e.Log.warn("CMAPI::_getLoginGameToken =>"),this._requestGameToken(a)},o.prototype._getAnonymousGameToken=function(a){var i=this.mData.getGameToken();if(i&&5<i.length){var r=this.mData.getLastUpdateSec(),d=e.SysUtil.getTimeSeconds(),u=Math.abs(d-r);86400<u?(e.Log.warn("CMAPI::_getAnonymousGameToken => gameToken["+i+"] diffSec["+u+"] => OVER 24 HOURS"),this._requestGameToken(a)):(e.Log.warn("CMAPI::_getAnonymousGameToken => gameToken["+i+"] diffSec["+u+"] => IN 24 HOURS B"),a&&a(i),this.tokenState=c.TOKEN_READY)}else e.Log.warn("CMAPI::_getAnonymousGameToken => NOT FOUND gameToken"),this._requestGameToken(a)},o.prototype._requestGameToken=function(a){var i=this;if(a&&this.mReqTokenCBList.indexOf(a)<0&&this.mReqTokenCBList.push(a),window.sign)if(this.isRequesting)e.Log.warn("CMAPI::_requestGameToken => wait for running");else{e.Log.warn("CMAPI::_requestGameToken => execute"),this.isRequesting=!0,this.tokenState=c.TOKEN_REQUESTING;var r=e.Global.debugService?"http://sdkgateway.cmzhtest2.hellocwd.com":"https://"+this.mHost,d={ver:0,channel_id:["cmcp"],common:{uid:this.mData.getUID(),token:this.mData.getToken(),app_id:this.mAppId}};this.mIsAPILogin?(d.login_type=this.mLoginType,d.login_params=this.mLoginParams,r+="/xyx_sdk/gw/partner_login"):r+="/xyx_sdk/gw/get_token";var u=JSON.stringify(d),m=this._sign(u);this._requestToken(r,u,m,function(h,f){var w=void 0;if(h&&f.user_info&&f.user_info.uid!==void 0){w=f.game_tokens&&f.game_tokens.cmcp&&f.game_tokens.cmcp.game_token;var s=f.user_info.uid,l=f.user_info.token,g=f.game_payload||e.EMPTY_STRING;i.mData.setData(s,l,w,g),i.tokenState=c.TOKEN_READY}else i.tokenState=c.TOKEN_FAILD;i.mReqTokenCBList.forEach(function(y){y&&y(w)}),i.isRequesting=!1})}else e.Log.warn("CMAPI::_requestGameToken => wait for vmframe")},o.prototype._requestToken=function(a,i,r,d){var u={"content-type":"application/json","X-CF-Secret":r,"X-CF-Appid":this.mAppId,"X-CF-Appkey":this.mAppKey,"X-CF-Ts":e.SysUtil.getTimeSeconds()};e.Global.isOutputDebug&&(e.Log.log("url => "+a),e.Log.log("header => "+JSON.stringify(u)),e.Log.log("body => "+i)),console.warn("requestToken => url:"+a),e.NetworkUtil.httpRequest({url:a,data:i,header:u,method:"POST",dataType:"json",success:function(m,h,f){e.Global.isOutputDebug&&e.Log.warn("requestToken => SUCCESS "+JSON.stringify(h)),d&&d(!0,h)},fail:function(m,h){e.Log.error("requestToken => FAILED"),d&&d(!1,void 0)}},3)},o}();e.CMAPI=t}(p||(p={})),function(e){e.EMPTY_STRING="";var c="_cmapi_version_",n=function(){function i(r,d){switch(this.mDataAPI=void 0,this.platform=void 0,this.platform=r,this.getDataVersion()){case 3:this.mDataAPI=new a(r,d);break;case 2:this.mDataAPI=new o(r);break;case 1:this.mDataAPI=new t(r);break;default:this.mergeData(r,d),this.mDataAPI=this.detectAndGetDataAPI(r,d)}}return i.prototype.detectAndGetDataAPI=function(r,d){return window.localStorage.getItem(r+"_cmapi_uid_"+d)?new a(r,d):window.localStorage.getItem(r+"_cmapi_uid_")?new o(r):new a(r,d)},i.prototype.mergeData=function(r,d){for(var u=[{newKey:r+"_cmapi_uid_",oldKeys:["_cmapi_uid_"]},{newKey:r+"_cmapi_utoken_",oldKeys:["_cmapi_utoken_"]},{newKey:r+"_cmapi_game_token_",oldKeys:["_cmapi_game_token_"]},{newKey:r+"_cmapi_timestamp_",oldKeys:["_cmapi_timestamp_"]}],m=0;m<u.length;m++){var h=u[m],f=window.localStorage.getItem(h.newKey)||void 0;if(f==null){for(var w=0;h.oldKeys instanceof Array&&w<h.oldKeys.length;w++)if((f=window.localStorage.getItem(h.oldKeys[w])||void 0)!=null){window.localStorage.setItem(h.newKey,f),window.localStorage.removeItem(h.oldKeys[w]),console.error("CMAPIData:: merge["+h.newKey+"] => ["+f+"]");break}}}},i.prototype.setData=function(r,d,u,m){this.mDataAPI.setItem("_cmapi_uid_",r),this.mDataAPI.setItem("_cmapi_utoken_",d),this.mDataAPI.setItem("_cmapi_game_token_",u),this.mDataAPI.setItem("_cmapi_payload_",m),this.setLastUpdateSec(e.SysUtil.getTimeSeconds()),e.Global.isOutputDebug&&(console.warn("CMAPIData::setData => uid:"+r),console.warn("CMAPIData::setData => token:"+d),console.warn("CMAPIData::setData => gameToken:"+u),console.warn("CMAPIData::setData => payload:"+m))},i.prototype.getUID=function(){return this.mDataAPI.getItem("_cmapi_uid_",e.EMPTY_STRING)},i.prototype.getToken=function(){return this.mDataAPI.getItem("_cmapi_utoken_",e.EMPTY_STRING)},i.prototype.getGameToken=function(){return this.mDataAPI.getItem("_cmapi_game_token_",e.EMPTY_STRING)},i.prototype.getPayload=function(){return this.mDataAPI.getItem("_cmapi_payload_",e.EMPTY_STRING)},i.prototype.getLastUpdateSec=function(){return Number(window.localStorage.getItem(this.platform+"_cmapi_timestamp_")||"0")},i.prototype.setLastUpdateSec=function(r){window.localStorage.setItem(this.platform+"_cmapi_timestamp_",r+e.EMPTY_STRING)},i.prototype.getDataVersion=function(){return Number(window.localStorage.getItem(this.platform+c)||"0")},i}();e.CMAPIData=n;var t=function(){function i(r){window.localStorage.setItem(r+c,"1"),e.Global.isOutputDebug&&console.error("DataV1 => ")}return i.prototype.getItem=function(r,d){return window.localStorage.getItem(r)||d},i.prototype.setItem=function(r,d){return window.localStorage.setItem(r,d)},i}(),o=function(){function i(r){this.platform=void 0,this.platform=r,window.localStorage.setItem(r+c,"2"),e.Global.isOutputDebug&&console.error("DataV2 => ")}return i.prototype.getItem=function(r,d){return window.localStorage.getItem(this.platform+r)||d},i.prototype.setItem=function(r,d){return window.localStorage.setItem(this.platform+r,d)},i}(),a=function(){function i(r,d){this.platform=void 0,this.userid=void 0,this.platform=r,this.userid=d,window.localStorage.setItem(r+c,"3"),e.Global.isOutputDebug&&console.error("DataV3 => ")}return i.prototype.getItem=function(r,d){return window.localStorage.getItem(this.platform+r+this.userid)||d},i.prototype.setItem=function(r,d){return window.localStorage.setItem(this.platform+r+this.userid,d)},i}()}(p||(p={})),function(e){var c=function(t,o){this.key=null,this.value=null,this.key=t,this.value=o};e.Pair=c;var n=function(){function t(){this.arr=[]}return t.prototype.put=function(o,a){for(var i=0;i<this.arr.length;i++)if(this.arr[i].key===o)return void(this.arr[i].value=a);this.arr.push(new c(o,a))},t.prototype.get=function(o){for(var a=0;a<this.arr.length;a++)if(this.arr[a].key===o)return this.arr[a].value;return null},t.prototype.getPair=function(o){for(var a=0;a<this.arr.length;a++)if(this.arr[a].key===o)return this.arr[a];return null},t.prototype.remove=function(o){for(var a=0;a<this.arr.length;a++)if(this.arr[a].key===o)return void this.arr.splice(a,1)},t.prototype.clear=function(){this.arr=[]},t.prototype.size=function(){return this.arr.length},t.prototype.getPairs=function(){return this.arr},t}();e.Dictionary=n}(p||(p={})),function(e){function c(i){for(var r,d,u="",m=-1;++m<i.length;)r=i.charCodeAt(m),d=m+1<i.length?i.charCodeAt(m+1):0,55296<=r&&r<=56319&&56320<=d&&d<=57343&&(r=65536+((1023&r)<<10)+(1023&d),m++),r<=127?u+=String.fromCharCode(r):r<=2047?u+=String.fromCharCode(192|r>>>6&31,128|63&r):r<=65535?u+=String.fromCharCode(224|r>>>12&15,128|r>>>6&63,128|63&r):r<=2097151&&(u+=String.fromCharCode(240|r>>>18&7,128|r>>>12&63,128|r>>>6&63,128|63&r));return u}function n(i){for(var r=Array(i.length>>2),d=0;d<r.length;d++)r[d]=0;for(d=0;d<8*i.length;d+=8)r[d>>5]|=(255&i.charCodeAt(d/8))<<24-d%32;return r}function t(i,r){i[r>>5]|=128<<24-r%32,i[15+(r+64>>9<<4)]=r;for(var d=Array(80),u=1732584193,m=-271733879,h=-1732584194,f=271733878,w=-1009589776,s=0;s<i.length;s+=16){for(var l=u,g=m,y=h,_=f,G=w,A=0;A<80;A++){d[A]=A<16?i[s+A]:a(d[A-3]^d[A-8]^d[A-14]^d[A-16],1);var k=o(o(a(u,5),(I=m,S=h,v=f,(C=A)<20?I&S|~I&v:C<40?I^S^v:C<60?I&S|I&v|S&v:I^S^v)),o(o(w,d[A]),(T=A)<20?1518500249:T<40?1859775393:T<60?-1894007588:-899497514));w=f,f=h,h=a(m,30),m=u,u=k}u=o(u,l),m=o(m,g),h=o(h,y),f=o(f,_),w=o(w,G)}var T,C,I,S,v;return Array(u,m,h,f,w)}function o(i,r){var d=(65535&i)+(65535&r);return(i>>16)+(r>>16)+(d>>16)<<16|65535&d}function a(i,r){return i<<r|i>>>32-r}e.hex_hmac_sha1=function(i,r){return function(d){for(var u,m="0123456789abcdef",h="",f=0;f<d.length;f++)u=d.charCodeAt(f),h+=m.charAt(u>>>4&15)+m.charAt(15&u);return h}(function(d,u){var m=n(d);16<m.length&&(m=t(m,8*d.length));for(var h=Array(16),f=Array(16),w=0;w<16;w++)h[w]=909522486^m[w],f[w]=1549556828^m[w];var s=t(h.concat(n(u)),512+8*u.length);return function(l){for(var g="",y=0;y<32*l.length;y+=8)g+=String.fromCharCode(l[y>>5]>>>24-y%32&255);return g}(t(f.concat(s),672))}(c(i),c(r)))}}(p||(p={})),function(e){var c=function(){function n(){}return n.isEnable=function(t){return t>=this.mLevel},n.log=function(t){n.isEnable(n.LEVEL_LOG)&&console.log(typeof t=="string"?"[CMPlay] "+t:t)},n.warn=function(t){n.isEnable(n.LEVEL_WARN)&&console.warn(typeof t=="string"?"[CMPlay] "+t:t)},n.error=function(t){n.isEnable(n.LEVEL_ERROR)&&console.error(typeof t=="string"?"[CMPlay] "+t:t)},n.LEVEL_LOG=0,n.LEVEL_WARN=1,n.LEVEL_ERROR=2,n.mLevel=n.LEVEL_LOG,n}();e.Log=c}(p||(p={})),function(e){var c=function(){function n(){}return n.request=function(t){n.httpRequest({url:t.url,data:t.data,header:t.header,method:t.method,dataType:t.dataType,success:function(o,a,i){t.checkAuthorization?t.token&&n.checkAuthorization(i,a,t.token)?t.success&&t.success(a):(e.Log.error("code = "+o),e.Log.error("data = "+a),e.Log.error("header = "+JSON.stringify(i)),t.fail&&t.fail(a)):t.success&&t.success(a)},fail:function(o,a){t.fail&&t.fail(a)}},5)},n.checkAuthorization=function(t,o,a){return!0},n.httpRequest=function(t,o){var a=this,i=new XMLHttpRequest;for(var r in i.open(t.method,t.url),t.header)i.setRequestHeader(r,t.header[r]);i.onreadystatechange=function(){if(i.readyState==4)if(i.status==200){if(t.success)if(t.dataType=="json"){var d=void 0;try{d=JSON.parse(i.responseText)}catch(u){d=i.responseText}t.success(i.status,d,i.getAllResponseHeaders())}else t.success(i.status,i.responseText,i.getAllResponseHeaders())}else 1<o?a.httpRequest(t,o-1):t.fail&&t.fail(i.status,i.responseText)},typeof t.data=="object"?i.send(JSON.stringify(t.data)):i.send(t.data)},n}();e.NetworkUtil=c}(p||(p={})),window.getQueryString=function(e,c){var n=window.location.search;if(n&&n.indexOf("?")!==-1&&(n=n.substr(1)||window.location.hash.split("?")[1])){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),o=n.match(t);if(o!=null)return decodeURIComponent(o[2])}return c},window.getPathVersion=function(){var e=window.location.pathname;if(e){var c=new RegExp("(v20[0-9]+)"),n=e.match(c);if(n&&0<n.length&&n[0]&&11<=n[0].length&&n[0].substr(0,3)=="v20"){var t=n[0];return Number(t.substr(1,4))-2018+"."+Number(t.substr(5,2))+"."+Number(t.substr(7,2))+"."+Number(t.substr(9,2))}}return"1.0.0.0"},function(e){var c=function(){function n(){}return n.getTimeSeconds=function(){return Math.round(Date.now()/1e3)},n.generateXAID=function(){return"xxxxyyyy_xxxxyyyy_xxyyxxyyxx".replace(/[xy]/g,function(t){if(t=="0")return t;var o=16*Math.random()|0;return(t=="x"?o:3&o|8).toString(16)})},n.loadSDKScript=function(t,o,a){a===void 0&&(a=void 0);var i=document.getElementsByTagName("head")[0],r=document.createElement("script");r.async=o,r.src=t,a!=null&&(r.onload=function(){a()},r.onreadystatechange=function(){this.readyState=="complete"&&a()}),i&&i.appendChild(r)},n}();e.SysUtil=c}(p||(p={}))})()})()})();})();
