var p,M=exports&&exports.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,e){u.__proto__=e}||function(u,e){for(var t in e)e.hasOwnProperty(t)&&(u[t]=e[t])};return function(u,e){function t(){this.constructor=u}n(u,e),u.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}();(function(n){var u=function(){function e(){this.mInfocEnvCfg=null,this.mbInited=!1,this.mPlatformInfo=null,this.mShareTag=null,this.mCroProTag=null,this.mbEnableDebugEnv=!1;var t=n.PlatformChecker.getPlatformType();n.PlatformProxy.getInstance().init(t)}return e.getInstance=function(){return e.sInst!=null?e.sInst:e.sInst=new e},e.init=function(t){e.getInstance(),e.sInst.mbInited||(e.sInst.mInfocEnvCfg=t,e.sInst.mInfocEnvCfg.mAuthorization=2,e.sInst.mPlatformInfo=n.PlatformProxy.getInstance().getPlatformInfo(),n.PlatformProxy.getInstance().fillInfocEnvCfg(e.sInst.mInfocEnvCfg),e.sInst.mbInited=!0)},e.getPlatformInfo=function(){return e.getInstance(),e.sInst.mbInited?e.sInst.mPlatformInfo:null},e.getInfocEnvCfg=function(){return e.getInstance(),e.sInst.mbInited?e.sInst.mInfocEnvCfg:null},e.setPlayerId=function(t){e.getInstance(),e.sInst.mbInited&&e.sInst.mInfocEnvCfg&&(e.sInst.mInfocEnvCfg.mPlayerId=t)},e.getPlayerId=function(){return e.getInstance(),e.sInst.mbInited&&e.sInst.mInfocEnvCfg?e.sInst.mInfocEnvCfg.mPlayerId:""},e.setAuthorizeFlag=function(){e.getInstance(),e.sInst.mbInited&&e.sInst.mInfocEnvCfg&&(e.sInst.mInfocEnvCfg.mAuthorization=1)},e.getShareTag=function(){return e.getInstance(),e.sInst.mbInited?(e.sInst.mShareTag||(e.sInst.mShareTag=new n.MGShareTag),e.sInst.mShareTag):null},e.getCroProTag=function(){return e.getInstance(),e.sInst.mbInited?(e.sInst.mCroProTag||(e.sInst.mCroProTag=new n.MGCroProTag),e.sInst.mCroProTag):null},e.enableDebugEnv=function(t){e.getInstance(),e.sInst.mbEnableDebugEnv=t},e.isEnableDebugEnv=function(){return e.getInstance(),e.sInst.mbEnableDebugEnv},e.sInst=null,e}();n.MGCmnRptModule=u})(p||(p={})),function(n){var u=function(){function e(){this.TAG="MGRPT_MGCroProTag",this.init()}return e.prototype.init=function(){this.fetchLocal()?n.Log.i(this.TAG,"fetch cross promotion tag from cache: "+this.mCroProTag):(this.parse()?n.Log.i(this.TAG,"parse cross promotion tag from launch params: "+this.mCroProTag):this.create(),this.saveLocal(this.mCroProTag))},e.prototype.parse=function(){return this.mCroProTag=n.PlatformProxy.getInstance().parseCroProTag(),this.mCroProTag&&0<this.mCroProTag.length},e.prototype.create=function(){if(!this.mCroProTag){var t=n.MGCmnRptModule.getInfocEnvCfg(),r=t.sub_channel,o=t.game_id;this.mCroProTag=r+","+o,n.Log.i(this.TAG,"cross promotion tag created: "+this.mCroProTag)}},e.prototype.fetchLocal=function(){return this.mCroProTag=n.PlatformProxy.getInstance().getStorage(e.KEY_CROSS_PROMOTION_TAG),n.Log.i(this.TAG,"cache cropro tag: "+this.mCroProTag),this.mCroProTag&&0<this.mCroProTag.length},e.prototype.saveLocal=function(t){n.PlatformProxy.getInstance().setStorage(e.KEY_CROSS_PROMOTION_TAG,t),n.Log.i(this.TAG,"cross promotion tag saved to local cache: "+e.KEY_CROSS_PROMOTION_TAG+":"+t)},e.prototype.fetch=function(){return this.mCroProTag},e.KEY_CROSS_PROMOTION_TAG="mgrpt_cropro_tag",e}();n.MGCroProTag=u}((window.MGRPT=p)||(p={})),function(n){var u=function(){function e(){}return e.prototype.getPlatformType=function(){return this.isPlatformTT()?n.ENUMPLATFORM.PLATFORM_TT:this.isPlatformWX()?n.ENUMPLATFORM.PLATFORM_WX:this.isPlatformQQ()?n.ENUMPLATFORM.PLATFORM_QQ:this.isPlatformFB()?n.ENUMPLATFORM.PLATFORM_FB:this.isPlatformWeb()?n.ENUMPLATFORM.PLATFORM_WEB:"unknown_platform"},e.prototype.isPlatformWX=function(){return cc.sys.platform==cc.sys.WECHAT_GAME},e.prototype.isPlatformQQ=function(){return cc.sys.platform==cc.sys.QQ_PLAY},e.prototype.isPlatformWeb=function(){return cc.sys.platform==cc.sys.DESKTOP_BROWSER||cc.sys.platform==cc.sys.MOBILE_BROWSER},e.prototype.isPlatformFB=function(){return typeof FBInstant!="undefined"},e.prototype.isPlatformTT=function(){return typeof tt!="undefined"},e.prototype.setLocalItem=function(t,r){cc.sys.localStorage.setItem(t,r)},e.prototype.getLocalItem=function(t){return cc.sys.localStorage.getItem(t)},e.prototype.removeLocalItem=function(t){cc.sys.localStorage.removeItem(t)},e.prototype.clear=function(){},e}();n.GameEngine4CC=u}(p||(p={})),function(n){var u=function(){function e(){}return e.prototype.getPlatformType=function(){return this.isPlatformTT()?n.ENUMPLATFORM.PLATFORM_TT:this.isPlatformWX()?n.ENUMPLATFORM.PLATFORM_WX:this.isPlatformQQ()?n.ENUMPLATFORM.PLATFORM_QQ:this.isPlatformFB()?n.ENUMPLATFORM.PLATFORM_FB:this.isPlatformWeb()?n.ENUMPLATFORM.PLATFORM_WEB:"unknown_platform"},e.prototype.isPlatformWX=function(){if(Laya.Browser.onMiniGame)return!0},e.prototype.isPlatformQQ=function(){return!!(Laya.Browser.userAgent&&-1<Laya.Browser.userAgent.indexOf("limixiu"))},e.prototype.isPlatformWeb=function(){return!0},e.prototype.isPlatformFB=function(){return typeof FBInstant!="undefined"},e.prototype.isPlatformTT=function(){if(Laya.Browser.window.hasOwnProperty("tt"))return!0},e.prototype.setLocalItem=function(t,r){Laya.LocalStorage.setItem(t,r)},e.prototype.getLocalItem=function(t){return Laya.LocalStorage.getItem(t)},e.prototype.removeLocalItem=function(t){Laya.LocalStorage.removeItem(t)},e.prototype.clear=function(){Laya.LocalStorage.clear()},e}();n.GameEngine4LayaBox=u}(p||(p={})),function(n){var u=function(){function e(){}return e.prototype.getPlatformType=function(){return console.log("MGRPT_DEBUG","GameEngine4None.getPlatformType() enter."),this.isPlatformTT()?n.ENUMPLATFORM.PLATFORM_TT:this.isPlatformWX()?n.ENUMPLATFORM.PLATFORM_WX:this.isPlatformQQ()?n.ENUMPLATFORM.PLATFORM_QQ:this.isPlatformFB()?n.ENUMPLATFORM.PLATFORM_FB:this.isPlatformWeb()?n.ENUMPLATFORM.PLATFORM_WEB:"unknown_platform"},e.prototype.isPlatformWX=function(){return typeof wx!="undefined"},e.prototype.isPlatformQQ=function(){return typeof BK!="undefined"},e.prototype.isPlatformWeb=function(){return!0},e.prototype.isPlatformFB=function(){return typeof FBInstant!="undefined"},e.prototype.isPlatformTT=function(){return typeof tt!="undefined"},e.prototype.setLocalItem=function(t,r){this.isPlatformWX()&&n.PlatformProxy.getInstance().setStorage(t,r)},e.prototype.getLocalItem=function(t){if(this.isPlatformWX())return n.PlatformProxy.getInstance().getStorage(t)},e.prototype.removeLocalItem=function(t){if(this.isPlatformWX())return n.PlatformProxy.getInstance().delStorage(t)},e.prototype.clear=function(){},e}();n.GameEngine4None=u}(p||(p={})),function(n){var u=function(){function e(){}return e.getPlatformType=function(){return e.mPlatformTypeCur?e.mPlatformTypeCur:(e.prepareGECur(),e.mGameEngineCur?e.mPlatformTypeCur=e.mGameEngineCur.getPlatformType():"")},e.isPlatformWX=function(){return e.prepareGECur(),!!e.mGameEngineCur&&e.mGameEngineCur.isPlatformWX()},e.isPlatformQQ=function(){return e.prepareGECur(),!!e.mGameEngineCur&&e.mGameEngineCur.isPlatformQQ()},e.isPlatformWeb=function(){return e.prepareGECur(),!!e.mGameEngineCur&&e.mGameEngineCur.isPlatformWeb()},e.isPlatformFB=function(){return e.prepareGECur(),!!e.mGameEngineCur&&e.mGameEngineCur.isPlatformFB()},e.setLocalItem=function(t,r){e.prepareGECur(),e.mGameEngineCur&&e.mGameEngineCur.setLocalItem(t,r)},e.getLocalItem=function(t){e.prepareGECur(),e.mGameEngineCur&&e.mGameEngineCur.getLocalItem(t)},e.removeLocalItem=function(t){e.prepareGECur(),e.mGameEngineCur&&e.mGameEngineCur.removeLocalItem(t)},e.clear=function(){e.prepareGECur(),e.mGameEngineCur&&e.clear()},e.prepareGECur=function(){if(!e.mGameEngineCur){var t=e.getCurEngineType();e.setCurGameEngine(t)}},e.setCurGameEngine=function(t){if(!this.mGameEngineCur)if(t&&t.length!=0)switch(t){case n.Engine.ENGINE_COCOS:this.mGameEngineCur=new n.GameEngine4CC;break;case n.Engine.ENGINE_LAYA:this.mGameEngineCur=new n.GameEngine4LayaBox;break;case n.Engine.ENGINE_NONE:this.mGameEngineCur=new n.GameEngine4None}else this.mGameEngineCur=new n.GameEngine4None},e.getCurEngineType=function(){return typeof Laya!="undefined"&&Laya.LocalStorage!==void 0?n.Engine.ENGINE_LAYA:typeof cc!="undefined"&&cc.sys!==void 0?n.Engine.ENGINE_COCOS:n.Engine.ENGINE_NONE},e.mGameEngineCur=null,e.mPlatformTypeCur=null,e}();n.GameEngineProxy=u}(p||(p={})),function(n){var u,e;(u=n.Engine||(n.Engine={})).ENGINE_COCOS="cocos-creator",u.ENGINE_LAYA="layabox",u.ENGINE_NONE="ENGINE_NONE",(e=n.ENUMPLATFORM||(n.ENUMPLATFORM={})).PLATFORM_WX="wechat",e.PLATFORM_QQ="qq",e.PLATFORM_WEB="web",e.PLATFORM_FB="facebook",e.PLATFORM_TT="tt";var t=function(){this.brand="",this.model="",this.pixelRatio=0,this.screenWidth=0,this.screenHeight=0,this.windowWidth=0,this.windowHeight=0,this.statusBarHeight=0,this.language="",this.version="",this.system="",this.platform="",this.fontSizeSetting=0,this.SDKVersion="",this.benchmarkLevel=1};n.PlatformInfo=t;var r=function(){};n.LaunchOption=r}(p||(p={})),function(n){var u="key_first_enter_time",e=function(){function o(){}return o.INFOC_PRODUCT_ID=239,o.INFOC_PUBLIC_INDEX=8,o.INFOC_SERVER_URL="helpminigame1.ksmobile.com",o}(),t=function(){function o(){}return o.INFOC_PRODUCT_ID=312,o.INFOC_PUBLIC_INDEX=1,o.INFOC_SERVER_URL="helpminigamehw1.ksmobile.com",o}(),r=function(){function o(){this.mMap=new n.Dictionary,n.ENUMPLATFORM.PLATFORM_FB===n.PlatformChecker.getPlatformType()&&(o.INFOC_PRODUCT_ID=t.INFOC_PRODUCT_ID,o.INFOC_PUBLIC_INDEX=t.INFOC_PUBLIC_INDEX,o.INFOC_SERVER_URL=t.INFOC_SERVER_URL)}return o.getHost=function(){return n.MGCmnRptModule.isEnableDebugEnv()?"http://111.230.84.242/g/v1":"https://"+o.INFOC_SERVER_URL+"/g/v1"},o.parseData=function(a){if(!a)return-1;var i=a.indexOf("result=");if(i<0)return-2;if(i+7>=a.length)return-3;var l=a.charAt(i+7);return parseInt(l)},o.reportInfocImpl=function(a,i){var l=o.getCommonData(),g=o.getHost()+"/?"+l+"&"+i,P=encodeURI(g);n.Log.i("MGB_DEBUG","before call PlatformProxy.getInstance().request"),n.PlatformProxy.getInstance().request({url:P,method:"GET",success:function(m,y){if(y)if(o.parseData(y)==1){n.Log.i("Infoc::success("+a+") => &"+i);var _=n.InfocCache.shiftRequest();_&&o.reportInfocImpl(_.id,_.info)}else n.Log.w("Infoc:: fail("+a+") => "+i),n.Log.w(y),n.InfocCache.pushRequest(a,i,Date.now());else n.Log.e("Infoc:: error("+a+")"),n.InfocCache.pushRequest(a,i,Date.now())},fail:function(m,y){n.Log.e("Infoc:: failed("+a+") code("+m+")"),n.InfocCache.pushRequest(a,i,Date.now())}})},o.getCommonData=function(){var a=n.MGCmnRptModule.getPlatformInfo();if(!a)return n.Log.e("MGRPT_DEBUG","!platInfo"),"";var i=n.MGCmnRptModule.getInfocEnvCfg();if(!i)return n.Log.e("MGRPT_DEBUG","!infocEnvCfg"),"";var l=0;a.platform=="ios"?l=1:a.platform=="android"&&(l=2);var g=n.MGCmnRptModule.getShareTag();if(!g)return n.Log.e("MGRPT_DEBUG","!shareTag"),"";var P=n.MGCmnRptModule.getCroProTag();return P?"product_no="+o.INFOC_PRODUCT_ID+"&public_index="+o.INFOC_PUBLIC_INDEX+"&brand="+a.brand+"&model="+a.model+"&system="+a.system+"&version="+a.version+"&pixelratio="+a.pixelRatio+"&sdkversion="+a.SDKVersion+"&wechatid="+i.mPlayerId+"&newuser="+o.isNewUser()+"&authorization="+i.mAuthorization+"&channel_key="+i.channelKey+"&game_version="+i.gameVer+"&game_id="+i.game_id+"&game_name="+i.game_name+"&sub_channel="+i.sub_channel+"&benchmarklevel="+a.benchmarkLevel+"&platform="+l+"&share_level="+g.getLevel()+"&super_playid="+g.getSuper()+"&origin_playid="+g.getOrigin()+"&cropro="+P.fetch():(n.Log.e("MGRPT_DEBUG","!croproTag"),"")},o.prototype.set=function(a,i){if(a==null||a==null)throw new Error("ERROR: key cannot be null or undefined!");if(i==null||i==null)throw new Error("ERROR: value cannot be null or undefined!");return this.mMap.put(a,i),this},o.prototype.buildDataString=function(a){for(var i="business_index="+a+"&",l=this.mMap.size(),g=this.mMap.getPairs(),P=0;P<l;P++){var m=g[P];i+=m.key+"="+m.value+"&"}return 1<i.length&&(i=i.slice(0,i.length-1)),i},o.prototype.report=function(){var a=this.getTableID(),i=this.buildDataString(a),l=Date.now(),g=n.MGCmnRptModule.getInfocEnvCfg();g&&g.mPlayerId?o.reportInfocImpl(a,i):(n.InfocCache.pushRequest(a,i,l),n.Log.e(o.TAG,"after InfocCache.pushRequest, no playerId. info:"+i))},o.isNewUser=function(){if(o.isNewUserFlag!=null)return o.isNewUserFlag;var a=new Date,i=n.PlatformProxy.getInstance().getStorage(u);if(!i||i.length<=0)n.PlatformProxy.getInstance().setStorage(u,a.getTime()+""),o.isNewUserFlag=1;else{var l=n.TimeUtil.formatDate(new Date(parseInt(i))),g=n.TimeUtil.formatDate(a);o.isNewUserFlag=l==g?1:2}return o.isNewUserFlag},o.TAG="MGRPT.Infoc",o.INFOC_PRODUCT_ID=e.INFOC_PRODUCT_ID,o.INFOC_PUBLIC_INDEX=e.INFOC_PUBLIC_INDEX,o.INFOC_SERVER_URL=e.INFOC_SERVER_URL,o.isNewUserFlag=void 0,o}();n.Infoc=r}(p||(p={})),function(n){var u=[],e=function(){function t(){}return t.pushRequest=function(r,o,a){n.Log.i("InfoCache.pushRequest:: ("+r+") => "+o),u.push({id:r,info:o,ts:a}),1e3<u.length&&u.shift()},t.shiftRequest=function(){var r=u.shift();return r&&n.Log.i("InfoCache.shiftRequest:: ("+r.id+") => "+r.info),r},t}();n.InfocCache=e}(p||(p={})),function(n){var u=function(){function e(){}return e.getSubChannel=function(t,r){if(this.mLocalSubChannel)return this.mLocalSubChannel;if(this.mLocalSubChannel=n.PlatformProxy.getInstance().getStorage(e.KEY_GAME_SUB_CHANNEL),this.mLocalSubChannel)return this.mLocalSubChannel;var o,a=this.getChannelByWXAId(t),i=this.getChannelByQueryAppId(t),l=this.getChannelByAdsource(t),g=this.getChannelByAppId(t),P=this.getChannelByExtra(t),m=this.getChannelByOther(t),y=this.getChannelBySrc(t);return a?o=a:i?o=i:l?o=l:g?o=g:y?o=y:P?o=P:m&&(o=m),o||(o=r||"default"),this.mLocalSubChannel=o,n.PlatformProxy.getInstance().setStorage(e.KEY_GAME_SUB_CHANNEL,o),o},e.getChannelByWXAId=function(t){if(t&&t.query){var r=t.query,o=r.gdt_vid;n.Log.i(this.TAG,"getChannelByWXAid traceid = "+o);var a=r.weixinadinfo;if(a){var i=a.split(".")[0];return n.Log.i(this.TAG,"getChannelByWXAid aid = "+i),i}}return null},e.getChannelByExtra=function(t){return t&&t.query&&t.query.channel&&t.scene?t.query.channel:null},e.getChannelByOther=function(t){return t&&t.path&&t.path!="index"&&t.path.startsWith("6")?t.path:null},e.getChannelByAppId=function(t){return t&&t.referrerInfo&&t.referrerInfo.appId?t.referrerInfo.appId:null},e.getChannelBySrc=function(t){return t&&t.query&&t.query.source?t.query.source:null},e.getChannelByQueryAppId=function(t){return t&&t.query&&t.query.appid?t.query.appid:null},e.getChannelByAdsource=function(t){return t&&t.referrerInfo&&t.referrerInfo.extraData&&t.referrerInfo.extraData.adsource?t.referrerInfo.extraData.adsource:null},e.TAG="MGRPT.SubChannelHelper",e.KEY_GAME_SUB_CHANNEL="key_game_sub_channel",e.mLocalSubChannel=null,e}();n.SubChannelHelper=u}(p||(p={})),function(n){var u=function(){function e(){}return e.getPlatformType=function(){return n.GameEngineProxy.getPlatformType()},e.isPlatformWX=function(){return n.GameEngineProxy.isPlatformWX()},e.isPlatformQQ=function(){return n.GameEngineProxy.isPlatformQQ()},e.isPlatformFB=function(){return n.GameEngineProxy.isPlatformFB()},e.isPlatformWeb=function(){return n.GameEngineProxy.isPlatformWeb()},e}();n.PlatformChecker=u}(p||(p={})),function(n){var u=function(){function e(){this.TAG="MGRPT.PlatformImpl4FB"}return e.prototype.parseCroProTag=function(){return""},e.prototype.fillShareTag=function(t){},e.prototype.fillInfocEnvCfg=function(t){return t&&(t.channelKey||(t.channelKey=3),t.sub_channel||(t.sub_channel=n.SubChannelHelper.getSubChannel(this.getLaunchParameter()))),t},e.prototype.getLaunchParameter=function(){var t=new n.LaunchOption;return FBInstant.getEntryPointData()||n.Log.w(this.TAG,"no launch options associated with current entry point"),t},e.prototype.request=function(t,r){var o=this;n.Log.i(this.TAG,"facebook reqeust params: "+JSON.stringify(t));var a=new XMLHttpRequest;for(var i in a.open(t.method,t.url),t.header)a.setRequestHeader(i,t.header[i]);a.onreadystatechange=function(){if(a.readyState==XMLHttpRequest.DONE)if(n.Log.i(o.TAG,"facebook request, response code:",a.status),n.Log.i(o.TAG,"facebook request, response:",a.response),a.status==200){if(n.Log.i(o.TAG,"facebook request, succeed:",a.responseText),t.success){var l=a.status,g=a.getAllResponseHeaders();if(t.dataType=="json")try{t.success(l,JSON.parse(a.responseText),g)}catch(P){t.success(l,a.responseText,g)}else t.success(l,a.responseText,g)}}else n.Log.i(o.TAG,"facebook request, failed:",a.responseText),1<r?o.request(t,r-1):t.fail&&t.fail(a.status,a.responseText)},a.send(JSON.stringify(t.data))},e.prototype.getPlatformInfo=function(){var t=new n.PlatformInfo;t.language=FBInstant.getLocale(),t.platform=FBInstant.getPlatform(),t.SDKVersion=FBInstant.getSDKVersion();try{t.screenWidth=window.screen.width,t.screenHeight=window.screen.height}catch(r){n.Log.w(this.TAG,"exception occur while collecting platform info")}return t},e.prototype.setStorage=function(t,r){this.isLocalStorageAvailable()?window.localStorage.setItem(t,r):this.isSessionAvailable()?window.sessionStorage.setItem(t,r):n.Log.w(this.TAG,"storage api is unavailable")},e.prototype.getStorage=function(t){return this.isLocalStorageAvailable()?window.localStorage.getItem(t):this.isSessionAvailable()?window.sessionStorage.getItem(t):void n.Log.w(this.TAG,"storage api is unavailable")},e.prototype.delStorage=function(t){this.isLocalStorageAvailable()?window.localStorage.removeItem(t):this.isSessionAvailable()?window.sessionStorage.removeItem(t):n.Log.w(this.TAG,"storage api is unavailable")},e.prototype.isSessionAvailable=function(){return!!window.sessionStorage},e.prototype.isLocalStorageAvailable=function(){return!!window.localStorage},e}();n.PlatformImpl4FB=u}(p||(p={})),function(n){var u=function(){function e(){this.mbEnteredBackground=!1,this.init()}return e.prototype.init=function(){var t=function(){function r(o){this.platformImpl=null,this.platformImpl=o}return r.prototype.onLoad=function(o){},r.prototype.onMaximize=function(o){},r.prototype.onMinimize=function(o){},r.prototype.onEnterBackground=function(o){n.Log.i("MGB.PlatformImpl4QQ","BK.Game.onEnterbackground, statusInfo:"+JSON.stringify(GameStatusInfo)),this.platformImpl.mbEnteredBackground=!0},r.prototype.onEnterForeground=function(o){n.Log.i("MGB.PlatformImpl4QQ","BK.Game.onEnterforeground, statusInfo:"+JSON.stringify(GameStatusInfo)),this.platformImpl.mbEnteredBackground=!1},r.prototype.onClose=function(o){},r}();new BK.Game(new t(this))},e.prototype.parseCroProTag=function(){var t=void 0,r=GameStatusInfo.gameParam;if(n.Log.i("MGRPT_DEBUG","game param: "+JSON.stringify(r)),r){var o=JSON.parse(r);o&&o.hasOwnProperty(n.MGCroProTag.KEY_CROSS_PROMOTION_TAG)?(t=o[n.MGCroProTag.KEY_CROSS_PROMOTION_TAG],n.Log.i("MGRPT_DEBUG","cross promotion tag parsed: "+t)):n.Log.e("MGRPT_DEBUG","cross promotion tag parse failed")}else n.Log.e("MGRPT_DEBUG","GameStatusInfo.gameParam undefined");return t},e.prototype.fillShareTag=function(t){if(t){var r=GameStatusInfo.gameParam;if(n.Log.i("MGRPT_DEBUG","[paramLaunch]:"+r),r)for(var o=0,a=r.split("&");o<a.length;o++){var i=a[o];if(i){var l=i.indexOf("=",0);if(!(l<=0||l>=i.length)){var g=i.substr(0,l),P=i.substr(l+1,i.length-l-1);g==n.MGShareTag.KEY_LEVEL?(t.setLevel(Number(P)),n.Log.i("MGRPT_DEBUG","[level]:"+P)):g==n.MGShareTag.KEY_SUPER?(t.setSuper(P),n.Log.i("MGRPT_DEBUG","[super]:"+P)):g==n.MGShareTag.KEY_ORIGIN&&(t.setOrigin(P),n.Log.i("MGRPT_DEBUG","[origin]:"+P))}}}}},e.prototype.fillInfocEnvCfg=function(t){return t&&(t.channelKey||(t.channelKey=2),t.sub_channel||(t.sub_channel=n.SubChannelHelper.getSubChannel(this.getLaunchParameter()))),t},e.prototype.getLaunchParameter=function(){var t=new n.LaunchOption;if(this.mbEnteredBackground)return t;var r=GameStatusInfo.gameParam;if(r){for(var o={},a=(r[0]==="?"?r.substr(1):r).split("&"),i=0;i<a.length;i++){var l=a[i].split("=");o[decodeURIComponent(l[0])]=decodeURIComponent(l[1]||"")}t.query=o}return t.shareTicket=GameStatusInfo.aioType.toString(),t},e.prototype.request=function(t,r){var o=this,a=t.method?t.method:"POST",i=new BK.HttpUtil(t.url);if(i.setHttpMethod(a),t.header)for(var l in t.header)i.setHttpHeader(l,t.header[l]);if(t.data){var g=new BK.Buffer(0,!1);g.writeAsString(JSON.stringify(t.data),!1),i.setHttpRawBody(g)}i.requestAsync(function(P,m){var y=P.readAsString(!0);if(m==200){if(t.success)if(t.dataType=="json")try{t.success(m,JSON.parse(y),null)}catch(_){t.success(m,y,null)}else t.success(m,y,null)}else if(0<r)o.request(t,r-1);else if(t.fail)if(t.dataType=="json")try{t.fail(m,JSON.parse(y))}catch(_){t.fail(m,y)}else t.fail(m,y)})},e.prototype.getPlatformInfo=function(){var t=new n.PlatformInfo;return t.version=GameStatusInfo.QQVer,t.system=GameStatusInfo.platform+" "+GameStatusInfo.osVersion,t.screenWidth=BK.Director.screenPixelSize.width,t.screenHeight=BK.Director.screenPixelSize.height,t.platform=GameStatusInfo.platform,t},e.prototype.setStorage=function(t,r){BK.localStorage?BK.localStorage.setItem(t,r):n.GameEngineProxy.setLocalItem(t,r)},e.prototype.getStorage=function(t){return BK.localStorage?BK.localStorage.getItem(t):n.GameEngineProxy.getLocalItem(t)},e.prototype.delStorage=function(t){BK.localStorage?BK.localStorage.removeItem(t):n.GameEngineProxy.removeLocalItem(t)},e.getDataPath=function(){BK.FileUtil.isFileExist(e.DATA_DIR)||BK.FileUtil.makeDir(e.DATA_DIR);var t=e.DATA_DIR+GameStatusInfo.openId+"//";return BK.FileUtil.isFileExist(t)||BK.FileUtil.makeDir(t),t},e.DATA_DIR="GameSandBox://data4ad//",e}();n.PlatformImpl4QQ=u}(p||(p={})),function(n){var u=function(){function e(){this.TAG="MGRPT.PlatformImpl4TT"}return e.prototype.request=function(t,r){var o=this;tt.request({url:t.url,data:t.data,header:t.header,method:t.method,dataType:t.dataType,success:function(a){a.statusCode!=200?t.fail&&t.fail(a.statusCode,a):a.data?t.success&&t.success(a.statusCode,a.data,a.header):t.fail&&t.fail(a.statusCode,a)},fail:function(){1<r?o.request(t,r-1):t.fail&&t.fail(-1,null)}})},e.prototype.getPlatformInfo=function(){var t=tt.getSystemInfoSync(),r=new n.PlatformInfo;return r.version=t?t.version:"",r.system=t?t.system:"_unknow_",r.screenWidth=t?t.screenWidth:0,r.screenHeight=t?t.screenHeight:0,r.platform=t?t.system:"",r},e.prototype.setStorage=function(t,r){tt.setStorageSync(t,r)},e.prototype.getStorage=function(t){return tt.getStorageSync(t)},e.prototype.delStorage=function(t){tt.removeStorageSync(t)},e.prototype.fillInfocEnvCfg=function(t){return t&&(t.channelKey||(t.channelKey=4),t.sub_channel||(t.sub_channel=n.SubChannelHelper.getSubChannel(this.getLaunchParameter()))),t},e.prototype.getLaunchParameter=function(){var t=new n.LaunchOption,r=tt.getLaunchOptionsSync();return r&&(t.query=r),t},e.prototype.fillShareTag=function(t){if(t){var r=tt.getLaunchOptionsSync();r&&(r.hasOwnProperty(n.MGShareTag.KEY_LEVEL)&&(n.Log.i("MGRPT_DEBUG","pl_level:"+r.agent_level),t.setLevel(Number(r.agent_level)+1)),r.hasOwnProperty(n.MGShareTag.KEY_SUPER)&&(n.Log.i("MGRPT_DEBUG","pl_super:"+r.agent_upper),t.setSuper(r.agent_upper)),r.hasOwnProperty(n.MGShareTag.KEY_ORIGIN)&&(n.Log.i("MGRPT_DEBUG","pl_origin:"+r.agent_orign),t.setOrigin(r.agent_orign)))}},e.prototype.parseCroProTag=function(){return""},e}();n.PlatformImpl4TT=u}(p||(p={})),function(n){var u=function(){function e(){}return e.prototype.parseCroProTag=function(){var t=void 0,r=this.getLaunchParameter();if(r.referrerInfo&&r.referrerInfo.appId){var o=r.referrerInfo.extraData;o&&o.hasOwnProperty(n.MGCroProTag.KEY_CROSS_PROMOTION_TAG)&&(t=o[n.MGCroProTag.KEY_CROSS_PROMOTION_TAG],n.Log.i("MGRPT_DEBUG","cross promotion tag parsed: "+t))}return t},e.prototype.fillShareTag=function(t){if(t){var r=wx.getLaunchOptionsSync();r&&r.query&&(r.query.hasOwnProperty(n.MGShareTag.KEY_LEVEL)&&(n.Log.i("MGRPT_DEBUG","pl_level:"+r.query.agent_level),t.setLevel(Number(r.query.agent_level)+1)),r.query.hasOwnProperty(n.MGShareTag.KEY_SUPER)&&(n.Log.i("MGRPT_DEBUG","pl_super:"+r.query.agent_upper),t.setSuper(r.query.agent_upper)),r.query.hasOwnProperty(n.MGShareTag.KEY_ORIGIN)&&(n.Log.i("MGRPT_DEBUG","pl_origin:"+r.query.agent_orign),t.setOrigin(r.query.agent_orign)))}},e.prototype.fillInfocEnvCfg=function(t){return t&&(t.channelKey||(t.channelKey=1),t.sub_channel||(t.sub_channel=n.SubChannelHelper.getSubChannel(this.getLaunchParameter()))),t},e.prototype.getLaunchParameter=function(){return wx.getLaunchOptionsSync()},e.prototype.login=function(t){wx.login({success:function(r){n.Log.i("WX login success. # code:"+r.code)},fail:function(r){n.Log.i("WX login failed. # code:"+r.code+", errmsg:"+r.errMsg)}})},e.prototype.getUserSetting=function(t){wx.getSetting({success:function(r){t.success&&t.success(r.authSetting)},fail:function(){t.fail&&t.fail()}})},e.prototype.request=function(t,r){var o=this;wx.request({url:t.url,data:t.data,header:t.header,method:t.method,dataType:t.dataType,success:function(a){a.statusCode!=200?t.fail&&t.fail(a.statusCode,a):a.data?t.success&&t.success(a.statusCode,a.data,a.header):t.fail&&t.fail(a.statusCode,a)},fail:function(){1<r?o.request(t,r-1):t.fail&&t.fail(-1,null)}})},e.prototype.getPlatformInfo=function(){return wx.getSystemInfoSync()},e.prototype.setStorage=function(t,r){wx.setStorageSync(t,r)},e.prototype.getStorage=function(t){return wx.getStorageSync(t)},e.prototype.delStorage=function(t){wx.removeStorageSync(t)},e}();n.PlatformImpl4WX=u}(p||(p={})),function(n){var u=function(){function e(){this.TAG="MGRPT.PlatformImpl4Web"}return e.prototype.parseCroProTag=function(){return""},e.prototype.fillShareTag=function(t){},e.prototype.fillInfocEnvCfg=function(t){return t&&(t.channelKey||(t.channelKey=0),t.sub_channel||(t.sub_channel=n.SubChannelHelper.getSubChannel(this.getLaunchParameter()))),t},e.prototype.getLaunchParameter=function(){return new n.LaunchOption},e.prototype.request=function(t,r){var o=this;n.Log.i(this.TAG,"reqeust params: "+t);var a=new XMLHttpRequest;for(var i in a.open(t.method,t.url),t.header)a.setRequestHeader(i,t.header[i]);a.onreadystatechange=function(){if(a.readyState==4)if(a.status==200){if(n.Log.i(o.TAG,"request, succeed:",a.responseText),t.success){var l=a.status,g=a.getAllResponseHeaders();if(t.dataType=="json")try{t.success(l,JSON.parse(a.responseText),g)}catch(P){t.success(l,a.responseText,g)}else t.success(l,a.responseText,g)}}else n.Log.i(o.TAG,"request, failed:",a.responseText),1<r?o.request(t,r-1):t.fail&&t.fail(a.status,a.responseText)},a.send(JSON.stringify(t.data))},e.prototype.getPlatformInfo=function(){var t=new n.PlatformInfo;t.platform="web";try{t.system=navigator.platform,t.model=navigator.appName,t.version=navigator.appVersion,t.language=navigator.language,t.screenWidth=window.screen.width,t.screenHeight=window.screen.height}catch(r){n.Log.w(this.TAG,"exception occur while collecting platform info")}return t},e.prototype.setStorage=function(t,r){this.isLocalStorageAvailable()?window.localStorage.setItem(t,r):this.isSessionAvailable()?window.sessionStorage.setItem(t,r):n.Log.w(this.TAG,"storage api is unavailable")},e.prototype.getStorage=function(t){return this.isLocalStorageAvailable()?window.localStorage.getItem(t):this.isSessionAvailable()?window.sessionStorage.getItem(t):void n.Log.w(this.TAG,"storage api is unavailable")},e.prototype.delStorage=function(t){this.isLocalStorageAvailable()?window.localStorage.removeItem(t):this.isSessionAvailable()?window.sessionStorage.removeItem(t):n.Log.w(this.TAG,"storage api is unavailable")},e.prototype.isSessionAvailable=function(){return!!window.sessionStorage},e.prototype.isLocalStorageAvailable=function(){return!!window.localStorage},e}();n.PlatformImpl4Web=u}(p||(p={})),function(n){var u=function(){function e(){this.mPlatformCur=null}return e.getInstance=function(){return this.sInst!=null||(this.sInst=new e),this.sInst},e.prototype.init=function(t){if(!this.mPlatformCur)switch(t){case n.ENUMPLATFORM.PLATFORM_WX:this.mPlatformCur=new n.PlatformImpl4WX;break;case n.ENUMPLATFORM.PLATFORM_QQ:this.mPlatformCur=new n.PlatformImpl4QQ;break;case n.ENUMPLATFORM.PLATFORM_WEB:this.mPlatformCur=new n.PlatformImpl4Web;break;case n.ENUMPLATFORM.PLATFORM_FB:this.mPlatformCur=new n.PlatformImpl4FB;break;case n.ENUMPLATFORM.PLATFORM_TT:this.mPlatformCur=new n.PlatformImpl4TT}},e.prototype.request=function(t,r){r===void 0&&(r=3),this.mPlatformCur!=null&&this.mPlatformCur.request(t,r)},e.prototype.getPlatformInfo=function(){return this.mPlatformCur==null?null:this.mPlatformCur.getPlatformInfo()},e.prototype.setStorage=function(t,r){if(this.mPlatformCur==null)return null;this.mPlatformCur.setStorage(t,r)},e.prototype.getStorage=function(t){return this.mPlatformCur==null?null:this.mPlatformCur.getStorage(t)},e.prototype.delStorage=function(t){if(this.mPlatformCur==null)return null;this.mPlatformCur.delStorage(t)},e.prototype.fillInfocEnvCfg=function(t){return this.mPlatformCur==null?t:this.mPlatformCur.fillInfocEnvCfg(t)},e.prototype.fillShareTag=function(t){this.mPlatformCur&&this.mPlatformCur.fillShareTag(t)},e.prototype.parseCroProTag=function(){return this.mPlatformCur?this.mPlatformCur.parseCroProTag():null},e.sInst=null,e}();n.PlatformProxy=u}(p||(p={})),function(n){var u=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return M(t,e),t.prototype.getTableID=function(){return n.ENUMPLATFORM.PLATFORM_FB===n.PlatformChecker.getPlatformType()?101:203},t.report=function(r){var o=new t,a=n.PlatformProxy.getInstance().getPlatformInfo();o.set("screenwidth",a?a.screenWidth:0),o.set("screenheight",a?a.screenHeight:0),o.set("language",a?a.language:""),o.set("clicked",r),o.set("game_time",0),o.set("ver",this.VERSION),o.set("font_size",a?a.fontSizeSetting:0),o.set("source",0),o.set("src_detail",""),o.report()},t.VERSION=1,t.CLICKED_APPLICATION_INIT=1,t.CLICKED_RESLOAD_SUCCESS=2,t}(n.Infoc);n.minigame_common_active=u}(p||(p={})),function(n){var u=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return M(t,e),t.prototype.getTableID=function(){return n.ENUMPLATFORM.PLATFORM_FB===n.PlatformChecker.getPlatformType()?102:208},t.report=function(r,o,a,i){n.Log.i("MGRPT_DEBUG","minigame_common_ad.report enter. posId:"+r+", action:"+o);var l=new t,g=t.ADSOURCE_UNKNOWN;if(l!=null&&r!=null){var P="";P=typeof a=="string"?a:String(a),l.set("posid",r),l.set("action",o),l.set("err_code",P),l.set("ad_type",i),l.set("source",g),l.set("ver",t.VERSION),l.report()}},t.VERSION=1,t.ADSOURCE_UNKNOWN=0,t}(n.Infoc);n.minigame_common_ad=u}(p||(p={})),function(n){var u=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return M(t,e),t.prototype.getTableID=function(){return n.ENUMPLATFORM.PLATFORM_FB===n.PlatformChecker.getPlatformType()?103:230},t.report=function(r,o,a,i,l,g,P){var m=new t;m.set("open_type",r),m.set("user_type",o),m.set("open_from",a),m.set("scene_id",i),m.set("source_id",l),m.set("source_desc",g),m.set("md5",P),m.report()},t}(n.Infoc);n.minigame_common_open_from=u}(p||(p={})),function(n){var u=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return M(t,e),t.prototype.getTableID=function(){return n.ENUMPLATFORM.PLATFORM_FB===n.PlatformChecker.getPlatformType()?104:232},t.report=function(r,o,a,i,l,g,P,m,y,_,v,L,c,s,f,I,d,T){l===void 0&&(l=0),g===void 0&&(g=""),P===void 0&&(P=0),m===void 0&&(m=""),y===void 0&&(y=0),_===void 0&&(_=""),v===void 0&&(v=0),L===void 0&&(L=""),c===void 0&&(c=0),s===void 0&&(s=""),f===void 0&&(f=0),I===void 0&&(I=0),d===void 0&&(d=0),T===void 0&&(T=0);var h=new t;h.set("action",r),h.set("survival_time",o),h.set("mark",a),h.set("skin",i),h.set("property1",l),h.set("property2",P),h.set("property3",y),h.set("property4",v),h.set("property5",c),h.set("property6",f),h.set("property7",I),h.set("property8",d),h.set("property9",T),h.set("extra1",g),h.set("extra2",m),h.set("extra3",_),h.set("extra4",L),h.set("extra5",s),h.report()},t.reportInOrder=function(r,o,a,i,l,g,P,m,y,_,v,L,c,s,f,I,d,T){l===void 0&&(l=0),g===void 0&&(g=0),P===void 0&&(P=0),m===void 0&&(m=0),y===void 0&&(y=0),_===void 0&&(_=0),v===void 0&&(v=0),L===void 0&&(L=0),c===void 0&&(c=0),s===void 0&&(s=""),f===void 0&&(f=""),I===void 0&&(I=""),d===void 0&&(d=""),T===void 0&&(T="");var h=new t;h.set("action",r),h.set("survival_time",o),h.set("mark",a),h.set("skin",i),h.set("property1",l),h.set("property2",g),h.set("property3",P),h.set("property4",m),h.set("property5",y),h.set("property6",_),h.set("property7",v),h.set("property8",L),h.set("property9",c),h.set("extra1",s),h.set("extra2",f),h.set("extra3",I),h.set("extra4",d),h.set("extra5",T),h.report()},t}(n.Infoc);n.minigame_common_playerdata=u}(p||(p={})),function(n){var u=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return M(t,e),t.prototype.getTableID=function(){return n.ENUMPLATFORM.PLATFORM_FB===n.PlatformChecker.getPlatformType()?105:233},t.report=function(r,o,a,i,l,g,P,m,y){l===void 0&&(l=""),g===void 0&&(g=""),P===void 0&&(P=""),m===void 0&&(m=""),y===void 0&&(y="");var _=new t;_.set("action",r),_.set("types",o),_.set("num",a),_.set("source",i),_.set("extra1",l),_.set("extra2",g),_.set("extra3",P),_.set("extra4",m),_.set("extra5",y),_.report()},t}(n.Infoc);n.minigame_common_playerdata_coin=u}(p||(p={})),function(n){var u=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return M(t,e),t.prototype.getTableID=function(){return n.ENUMPLATFORM.PLATFORM_FB===n.PlatformChecker.getPlatformType()?106:229},t.report=function(r,o,a,i,l,g,P,m){var y=new t;y.set("scene_id",r),y.set("source_id",o),y.set("source_desc",a),y.set("share_limit",i),y.set("share_action",l),y.set("share_title",g),y.set("image_url",P),y.set("md5",m),y.report()},t}(n.Infoc);n.minigame_common_share_detail=u}(p||(p={})),function(n){var u=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return M(t,e),t.prototype.getTableID=function(){return n.ENUMPLATFORM.PLATFORM_FB===n.PlatformChecker.getPlatformType()?107:228},t.report=function(r,o,a,i,l,g,P){var m=new t;m.set("scene_id",r),m.set("source_id",o),m.set("source_desc",a),m.set("share_action",i),m.set("share_title",l),m.set("share_describe",g),m.set("share_button",P),m.report()},t}(n.Infoc);n.minigame_common_share_scene=u}(p||(p={})),function(n){var u=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return M(t,e),t.prototype.getTableID=function(){return n.ENUMPLATFORM.PLATFORM_FB===n.PlatformChecker.getPlatformType()?(n.Log.e("MGRPT","minigame_common_time not support Facebook Platform Now!!!"),0):252},t.report=function(r,o){var a=new t;a.set("g_type",r),a.set("g_time",o),a.report()},t}(n.Infoc);n.minigame_common_time=u}(p||(p={})),function(n){var u=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return M(t,e),t.prototype.getTableID=function(){return n.ENUMPLATFORM.PLATFORM_FB===n.PlatformChecker.getPlatformType()?108:231},t.report=function(r,o,a,i,l,g,P,m){i===void 0&&(i=""),l===void 0&&(l=""),g===void 0&&(g=""),P===void 0&&(P=""),m===void 0&&(m="");var y=new t;y.set("page",r),y.set("node",o),y.set("action",a),y.set("extra1",i),y.set("extra2",l),y.set("extra3",g),y.set("extra4",P),y.set("extra5",m),y.report()},t}(n.Infoc);n.minigame_common_user_action=u}(p||(p={})),function(n){var u=function(){function e(){this.mLevel=1,this.mPlayerId4Super="",this.mPlayerId4Origin="",this.init(),this.fetchTag()}return e.prototype.getLevel=function(){return this.mLevel},e.prototype.getSuper=function(){return this.mPlayerId4Super},e.prototype.getOrigin=function(){return this.mPlayerId4Origin},e.prototype.setLevel=function(t){this.mLevel=t},e.prototype.setSuper=function(t){this.mPlayerId4Super=t},e.prototype.setOrigin=function(t){this.mPlayerId4Origin=t},e.prototype.fetchTag=function(){this.isFirstRun()?(this.fetchFromLaunchOptions(),this.saveShareTag()):this.fetchFromLocalStorage()},e.prototype.init=function(){var t=n.MGCmnRptModule.getPlayerId();this.mLevel=1,this.mPlayerId4Super="",this.mPlayerId4Origin=t},e.prototype.fetchFromLaunchOptions=function(){n.Log.i("MGRPT_DEBUG","MGShareTag fetchFromLaunchOptions enter()."),n.PlatformProxy.getInstance().fillShareTag(this)},e.prototype.fetchFromLocalStorage=function(){n.Log.i("MGRPT_DEBUG","MGShareTag fetchFromLocalStorage enter().");var t=n.PlatformProxy.getInstance().getStorage(e.KEY_LEVEL);if(t&&0<t.length&&(this.mLevel=Number(t)),this.mPlayerId4Origin=n.PlatformProxy.getInstance().getStorage(e.KEY_ORIGIN),!this.mPlayerId4Origin){n.Log.e(e.TAG,"fetchFromLocalStorage [error] Origin PlayerId is empty.");var r=n.MGCmnRptModule.getPlayerId();this.mPlayerId4Origin=r}this.mPlayerId4Super=n.PlatformProxy.getInstance().getStorage(e.KEY_SUPER),this.mPlayerId4Super||(this.mPlayerId4Super="")},e.prototype.isFirstRun=function(){var t=n.PlatformProxy.getInstance().getStorage(e.KEY_NOT1ST);return!t||t.length==0},e.prototype.saveShareTag=function(){n.PlatformProxy.getInstance().setStorage(e.KEY_NOT1ST,"dirtry"),n.PlatformProxy.getInstance().setStorage(e.KEY_LEVEL,String(this.mLevel)),n.PlatformProxy.getInstance().setStorage(e.KEY_SUPER,this.mPlayerId4Super),n.PlatformProxy.getInstance().setStorage(e.KEY_ORIGIN,this.mPlayerId4Origin)},e.TAG="",e.KEY_NOT1ST="mgst_1st",e.KEY_LEVEL="agent_level",e.KEY_SUPER="agent_upper",e.KEY_ORIGIN="agent_orign",e}();n.MGShareTag=u}(p||(p={})),function(n){var u=function(t,r){this.key=null,this.value=null,this.key=t,this.value=r};n.Pair=u;var e=function(){function t(){this.arr=[]}return t.prototype.put=function(r,o){for(var a=0;a<this.arr.length;a++)if(this.arr[a].key===r)return void(this.arr[a].value=o);this.arr.push(new u(r,o))},t.prototype.get=function(r){for(var o=0;o<this.arr.length;o++)if(this.arr[o].key===r)return this.arr[o].value;return null},t.prototype.getPair=function(r){for(var o=0;o<this.arr.length;o++)if(this.arr[o].key===r)return this.arr[o];return null},t.prototype.remove=function(r){for(var o=0;o<this.arr.length;o++)if(this.arr[o].key===r)return void this.arr.splice(o,1)},t.prototype.clear=function(){this.arr=[]},t.prototype.size=function(){return this.arr.length},t.prototype.getPairs=function(){return this.arr},t}();n.Dictionary=e}(p||(p={})),function(n){var u=function(){function e(){}return e.i=function(t){for(var r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];n.MGCmnRptModule.isEnableDebugEnv()&&(n.PlatformChecker.getPlatformType()==n.ENUMPLATFORM.PLATFORM_QQ?BK.Script.log(1,1,t+this.GetOptionalMsg(r)):console.info(e.getPrefix(),t,r))},e.w=function(t){for(var r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];n.MGCmnRptModule.isEnableDebugEnv()&&(n.PlatformChecker.getPlatformType()==n.ENUMPLATFORM.PLATFORM_QQ?BK.Script.log(1,1,t+this.GetOptionalMsg(r)):console.warn(e.getPrefix(),t,r))},e.e=function(t){for(var r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];n.MGCmnRptModule.isEnableDebugEnv()&&(n.PlatformChecker.getPlatformType()==n.ENUMPLATFORM.PLATFORM_QQ?BK.Script.log(1,1,t+this.GetOptionalMsg(r)):console.error(e.getPrefix(),t,r))},e.f=function(t){for(var r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];n.MGCmnRptModule.isEnableDebugEnv()&&(n.PlatformChecker.getPlatformType()==n.ENUMPLATFORM.PLATFORM_QQ?BK.Script.log(1,1,t+this.GetOptionalMsg(r)):console.error(e.getPrefix(),t,r))},e.formatDateTime=function(){var t=new Date,r=t.getHours().toString(),o=t.getMinutes().toString(),a=t.getSeconds().toString(),i=t.getMilliseconds().toString();if(o.length<2&&(o="0"+o),a.length<2&&(a="0"+a),i.length<3)for(var l=0;l<3-i.length;l++)i="0"+i;return r+":"+o+":"+a+" "+i},e.getPrefix=function(){return"["+e.formatDateTime()+"] "},e.GetOptionalMsg=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var o="";for(var a in t)o+=" "+t[a];return o},e}();n.Log=u}(p||(p={})),function(n){var u=0,e="";function t(c){return a(r(g(c)))}function r(c){return m(y(P(c),8*c.length))}function o(c,s){var f=P(c);16<f.length&&(f=y(f,8*c.length));for(var I=Array(16),d=Array(16),T=0;T<16;T++)I[T]=909522486^f[T],d[T]=1549556828^f[T];var h=y(I.concat(P(s)),512+8*s.length);return m(y(d.concat(h),672))}function a(c){for(var s,f=u?"0123456789ABCDEF":"0123456789abcdef",I="",d=0;d<c.length;d++)s=c.charCodeAt(d),I+=f.charAt(s>>>4&15)+f.charAt(15&s);return I}function i(c){for(var s="",f=c.length,I=0;I<f;I+=3)for(var d=c.charCodeAt(I)<<16|(I+1<f?c.charCodeAt(I+1)<<8:0)|(I+2<f?c.charCodeAt(I+2):0),T=0;T<4;T++)8*I+6*T>8*c.length?s+=e:s+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(d>>>6*(3-T)&63);return s}function l(c,s){var f,I,d,T,h=s.length,C=Array(),E=Array(Math.ceil(c.length/2));for(f=0;f<E.length;f++)E[f]=c.charCodeAt(2*f)<<8|c.charCodeAt(2*f+1);for(;0<E.length;){for(T=Array(),f=d=0;f<E.length;f++)d=(d<<16)+E[f],d-=(I=Math.floor(d/h))*h,(0<T.length||0<I)&&(T[T.length]=I);C[C.length]=d,E=T}var O="";for(f=C.length-1;0<=f;f--)O+=s.charAt(C[f]);var G=Math.ceil(8*c.length/(Math.log(s.length)/Math.log(2)));for(f=O.length;f<G;f++)O=s[0]+O;return O}function g(c){for(var s,f,I="",d=-1;++d<c.length;)s=c.charCodeAt(d),f=d+1<c.length?c.charCodeAt(d+1):0,55296<=s&&s<=56319&&56320<=f&&f<=57343&&(s=65536+((1023&s)<<10)+(1023&f),d++),s<=127?I+=String.fromCharCode(s):s<=2047?I+=String.fromCharCode(192|s>>>6&31,128|63&s):s<=65535?I+=String.fromCharCode(224|s>>>12&15,128|s>>>6&63,128|63&s):s<=2097151&&(I+=String.fromCharCode(240|s>>>18&7,128|s>>>12&63,128|s>>>6&63,128|63&s));return I}function P(c){for(var s=Array(c.length>>2),f=0;f<s.length;f++)s[f]=0;for(f=0;f<8*c.length;f+=8)s[f>>5]|=(255&c.charCodeAt(f/8))<<24-f%32;return s}function m(c){for(var s="",f=0;f<32*c.length;f+=8)s+=String.fromCharCode(c[f>>5]>>>24-f%32&255);return s}function y(c,s){c[s>>5]|=128<<24-s%32,c[15+(s+64>>9<<4)]=s;for(var f,I=Array(80),d=1732584193,T=-271733879,h=-1732584194,C=271733878,E=-1009589776,O=0;O<c.length;O+=16){for(var G=d,R=T,A=h,w=C,b=E,S=0;S<80;S++){I[S]=S<16?c[O+S]:L(I[S-3]^I[S-8]^I[S-14]^I[S-16],1);var N=v(v(L(d,5),_(S,T,h,C)),v(v(E,I[S]),(f=S)<20?1518500249:f<40?1859775393:f<60?-1894007588:-899497514));E=C,C=h,h=L(T,30),T=d,d=N}d=v(d,G),T=v(T,R),h=v(h,A),C=v(C,w),E=v(E,b)}return Array(d,T,h,C,E)}function _(c,s,f,I){return c<20?s&f|~s&I:c<40?s^f^I:c<60?s&f|s&I|f&I:s^f^I}function v(c,s){var f=(65535&c)+(65535&s);return(c>>16)+(s>>16)+(f>>16)<<16|65535&f}function L(c,s){return c<<s|c>>>32-s}n.hex_sha1=t,n.b64_sha1=function(c){return i(r(g(c)))},n.any_sha1=function(c,s){return l(r(g(c)),s)},n.hex_hmac_sha1=function(c,s){return a(o(g(c),g(s)))},n.b64_hmac_sha1=function(c,s){return i(o(g(c),g(s)))},n.any_hmac_sha1=function(c,s,f){return l(o(g(c),g(s)),f)}}(p||(p={})),function(n){var u=function(){function e(){}return e.formatDate=function(t){var r=t.getFullYear(),o=t.getMonth()+1,a=o<10?"0"+o:o+"",i=t.getDate();return r+"-"+a+"-"+(i<10?"0"+i:i+"")},e}();n.TimeUtil=u}(p||(p={}));
