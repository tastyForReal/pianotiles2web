(function(){(function(){(function(){(function(){var A=function(G,c){return function(){return c||G((c={exports:{}}).exports,c),c.exports}},w=A(function(G){var c,O=G&&G.__extends||function(){var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,t){u.__proto__=t}||function(u,t){for(var e in t)t.hasOwnProperty(e)&&(u[e]=t[e])};return function(u,t){function e(){this.constructor=u}r(u,t),u.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();(function(r){var u=function(){function t(){this.mInfocEnvCfg=null,this.mbInited=!1,this.mPlatformInfo=null,this.mShareTag=null,this.mCroProTag=null,this.mbEnableDebugEnv=!1;var e=r.PlatformChecker.getPlatformType();r.PlatformProxy.getInstance().init(e)}return t.getInstance=function(){return t.sInst!=null?t.sInst:t.sInst=new t},t.init=function(e){t.getInstance(),t.sInst.mbInited||(t.sInst.mInfocEnvCfg=e,t.sInst.mInfocEnvCfg.mAuthorization=2,t.sInst.mPlatformInfo=r.PlatformProxy.getInstance().getPlatformInfo(),r.PlatformProxy.getInstance().fillInfocEnvCfg(t.sInst.mInfocEnvCfg),t.sInst.mbInited=!0)},t.getPlatformInfo=function(){return t.getInstance(),t.sInst.mbInited?t.sInst.mPlatformInfo:null},t.getInfocEnvCfg=function(){return t.getInstance(),t.sInst.mbInited?t.sInst.mInfocEnvCfg:null},t.setPlayerId=function(e){t.getInstance(),t.sInst.mbInited&&t.sInst.mInfocEnvCfg&&(t.sInst.mInfocEnvCfg.mPlayerId=e)},t.getPlayerId=function(){return t.getInstance(),t.sInst.mbInited&&t.sInst.mInfocEnvCfg?t.sInst.mInfocEnvCfg.mPlayerId:""},t.setAuthorizeFlag=function(){t.getInstance(),t.sInst.mbInited&&t.sInst.mInfocEnvCfg&&(t.sInst.mInfocEnvCfg.mAuthorization=1)},t.getShareTag=function(){return t.getInstance(),t.sInst.mbInited?(t.sInst.mShareTag||(t.sInst.mShareTag=new r.MGShareTag),t.sInst.mShareTag):null},t.getCroProTag=function(){return t.getInstance(),t.sInst.mbInited?(t.sInst.mCroProTag||(t.sInst.mCroProTag=new r.MGCroProTag),t.sInst.mCroProTag):null},t.enableDebugEnv=function(e){t.getInstance(),t.sInst.mbEnableDebugEnv=e},t.isEnableDebugEnv=function(){return t.getInstance(),t.sInst.mbEnableDebugEnv},t.sInst=null,t}();r.MGCmnRptModule=u})(c||(c={})),function(r){var u=function(){function t(){this.TAG="MGRPT_MGCroProTag",this.init()}return t.prototype.init=function(){this.fetchLocal()?r.Log.i(this.TAG,"fetch cross promotion tag from cache: "+this.mCroProTag):(this.parse()?r.Log.i(this.TAG,"parse cross promotion tag from launch params: "+this.mCroProTag):this.create(),this.saveLocal(this.mCroProTag))},t.prototype.parse=function(){return this.mCroProTag=r.PlatformProxy.getInstance().parseCroProTag(),this.mCroProTag&&0<this.mCroProTag.length},t.prototype.create=function(){if(!this.mCroProTag){var e=r.MGCmnRptModule.getInfocEnvCfg(),o=e.sub_channel,n=e.game_id;this.mCroProTag=o+","+n,r.Log.i(this.TAG,"cross promotion tag created: "+this.mCroProTag)}},t.prototype.fetchLocal=function(){return this.mCroProTag=r.PlatformProxy.getInstance().getStorage(t.KEY_CROSS_PROMOTION_TAG),r.Log.i(this.TAG,"cache cropro tag: "+this.mCroProTag),this.mCroProTag&&0<this.mCroProTag.length},t.prototype.saveLocal=function(e){r.PlatformProxy.getInstance().setStorage(t.KEY_CROSS_PROMOTION_TAG,e),r.Log.i(this.TAG,"cross promotion tag saved to local cache: "+t.KEY_CROSS_PROMOTION_TAG+":"+e)},t.prototype.fetch=function(){return this.mCroProTag},t.KEY_CROSS_PROMOTION_TAG="mgrpt_cropro_tag",t}();r.MGCroProTag=u}((window.MGRPT=c)||(c={})),function(r){var u=function(){function t(){}return t.prototype.getPlatformType=function(){return this.isPlatformTT()?r.ENUMPLATFORM.PLATFORM_TT:this.isPlatformWX()?r.ENUMPLATFORM.PLATFORM_WX:this.isPlatformQQ()?r.ENUMPLATFORM.PLATFORM_QQ:this.isPlatformFB()?r.ENUMPLATFORM.PLATFORM_FB:this.isPlatformWeb()?r.ENUMPLATFORM.PLATFORM_WEB:"unknown_platform"},t.prototype.isPlatformWX=function(){return cc.sys.platform==cc.sys.WECHAT_GAME},t.prototype.isPlatformQQ=function(){return cc.sys.platform==cc.sys.QQ_PLAY},t.prototype.isPlatformWeb=function(){return cc.sys.platform==cc.sys.DESKTOP_BROWSER||cc.sys.platform==cc.sys.MOBILE_BROWSER},t.prototype.isPlatformFB=function(){return typeof FBInstant!="undefined"},t.prototype.isPlatformTT=function(){return typeof tt!="undefined"},t.prototype.setLocalItem=function(e,o){cc.sys.localStorage.setItem(e,o)},t.prototype.getLocalItem=function(e){return cc.sys.localStorage.getItem(e)},t.prototype.removeLocalItem=function(e){cc.sys.localStorage.removeItem(e)},t.prototype.clear=function(){},t}();r.GameEngine4CC=u}(c||(c={})),function(r){var u=function(){function t(){}return t.prototype.getPlatformType=function(){return this.isPlatformTT()?r.ENUMPLATFORM.PLATFORM_TT:this.isPlatformWX()?r.ENUMPLATFORM.PLATFORM_WX:this.isPlatformQQ()?r.ENUMPLATFORM.PLATFORM_QQ:this.isPlatformFB()?r.ENUMPLATFORM.PLATFORM_FB:this.isPlatformWeb()?r.ENUMPLATFORM.PLATFORM_WEB:"unknown_platform"},t.prototype.isPlatformWX=function(){if(Laya.Browser.onMiniGame)return!0},t.prototype.isPlatformQQ=function(){return!!(Laya.Browser.userAgent&&-1<Laya.Browser.userAgent.indexOf("limixiu"))},t.prototype.isPlatformWeb=function(){return!0},t.prototype.isPlatformFB=function(){return typeof FBInstant!="undefined"},t.prototype.isPlatformTT=function(){if(Laya.Browser.window.hasOwnProperty("tt"))return!0},t.prototype.setLocalItem=function(e,o){Laya.LocalStorage.setItem(e,o)},t.prototype.getLocalItem=function(e){return Laya.LocalStorage.getItem(e)},t.prototype.removeLocalItem=function(e){Laya.LocalStorage.removeItem(e)},t.prototype.clear=function(){Laya.LocalStorage.clear()},t}();r.GameEngine4LayaBox=u}(c||(c={})),function(r){var u=function(){function t(){}return t.prototype.getPlatformType=function(){return console.log("MGRPT_DEBUG","GameEngine4None.getPlatformType() enter."),this.isPlatformTT()?r.ENUMPLATFORM.PLATFORM_TT:this.isPlatformWX()?r.ENUMPLATFORM.PLATFORM_WX:this.isPlatformQQ()?r.ENUMPLATFORM.PLATFORM_QQ:this.isPlatformFB()?r.ENUMPLATFORM.PLATFORM_FB:this.isPlatformWeb()?r.ENUMPLATFORM.PLATFORM_WEB:"unknown_platform"},t.prototype.isPlatformWX=function(){return typeof wx!="undefined"},t.prototype.isPlatformQQ=function(){return typeof BK!="undefined"},t.prototype.isPlatformWeb=function(){return!0},t.prototype.isPlatformFB=function(){return typeof FBInstant!="undefined"},t.prototype.isPlatformTT=function(){return typeof tt!="undefined"},t.prototype.setLocalItem=function(e,o){this.isPlatformWX()&&r.PlatformProxy.getInstance().setStorage(e,o)},t.prototype.getLocalItem=function(e){if(this.isPlatformWX())return r.PlatformProxy.getInstance().getStorage(e)},t.prototype.removeLocalItem=function(e){if(this.isPlatformWX())return r.PlatformProxy.getInstance().delStorage(e)},t.prototype.clear=function(){},t}();r.GameEngine4None=u}(c||(c={})),function(r){var u=function(){function t(){}return t.getPlatformType=function(){return t.mPlatformTypeCur?t.mPlatformTypeCur:(t.prepareGECur(),t.mGameEngineCur?t.mPlatformTypeCur=t.mGameEngineCur.getPlatformType():"")},t.isPlatformWX=function(){return t.prepareGECur(),!!t.mGameEngineCur&&t.mGameEngineCur.isPlatformWX()},t.isPlatformQQ=function(){return t.prepareGECur(),!!t.mGameEngineCur&&t.mGameEngineCur.isPlatformQQ()},t.isPlatformWeb=function(){return t.prepareGECur(),!!t.mGameEngineCur&&t.mGameEngineCur.isPlatformWeb()},t.isPlatformFB=function(){return t.prepareGECur(),!!t.mGameEngineCur&&t.mGameEngineCur.isPlatformFB()},t.setLocalItem=function(e,o){t.prepareGECur(),t.mGameEngineCur&&t.mGameEngineCur.setLocalItem(e,o)},t.getLocalItem=function(e){t.prepareGECur(),t.mGameEngineCur&&t.mGameEngineCur.getLocalItem(e)},t.removeLocalItem=function(e){t.prepareGECur(),t.mGameEngineCur&&t.mGameEngineCur.removeLocalItem(e)},t.clear=function(){t.prepareGECur(),t.mGameEngineCur&&t.clear()},t.prepareGECur=function(){if(!t.mGameEngineCur){var e=t.getCurEngineType();t.setCurGameEngine(e)}},t.setCurGameEngine=function(e){if(!this.mGameEngineCur)if(e&&e.length!=0)switch(e){case r.Engine.ENGINE_COCOS:this.mGameEngineCur=new r.GameEngine4CC;break;case r.Engine.ENGINE_LAYA:this.mGameEngineCur=new r.GameEngine4LayaBox;break;case r.Engine.ENGINE_NONE:this.mGameEngineCur=new r.GameEngine4None}else this.mGameEngineCur=new r.GameEngine4None},t.getCurEngineType=function(){return typeof Laya!="undefined"&&Laya.LocalStorage!==void 0?r.Engine.ENGINE_LAYA:typeof cc!="undefined"&&cc.sys!==void 0?r.Engine.ENGINE_COCOS:r.Engine.ENGINE_NONE},t.mGameEngineCur=null,t.mPlatformTypeCur=null,t}();r.GameEngineProxy=u}(c||(c={})),function(r){var u,t;(u=r.Engine||(r.Engine={})).ENGINE_COCOS="cocos-creator",u.ENGINE_LAYA="layabox",u.ENGINE_NONE="ENGINE_NONE",(t=r.ENUMPLATFORM||(r.ENUMPLATFORM={})).PLATFORM_WX="wechat",t.PLATFORM_QQ="qq",t.PLATFORM_WEB="web",t.PLATFORM_FB="facebook",t.PLATFORM_TT="tt";var e=function(){this.brand="",this.model="",this.pixelRatio=0,this.screenWidth=0,this.screenHeight=0,this.windowWidth=0,this.windowHeight=0,this.statusBarHeight=0,this.language="",this.version="",this.system="",this.platform="",this.fontSizeSetting=0,this.SDKVersion="",this.benchmarkLevel=1};r.PlatformInfo=e;var o=function(){};r.LaunchOption=o}(c||(c={})),function(r){var u="key_first_enter_time",t=function(){function n(){}return n.INFOC_PRODUCT_ID=239,n.INFOC_PUBLIC_INDEX=8,n.INFOC_SERVER_URL="helpminigame1.ksmobile.com",n}(),e=function(){function n(){}return n.INFOC_PRODUCT_ID=312,n.INFOC_PUBLIC_INDEX=1,n.INFOC_SERVER_URL="helpminigamehw1.ksmobile.com",n}(),o=function(){function n(){this.mMap=new r.Dictionary,r.ENUMPLATFORM.PLATFORM_FB===r.PlatformChecker.getPlatformType()&&(n.INFOC_PRODUCT_ID=e.INFOC_PRODUCT_ID,n.INFOC_PUBLIC_INDEX=e.INFOC_PUBLIC_INDEX,n.INFOC_SERVER_URL=e.INFOC_SERVER_URL)}return n.getHost=function(){return r.MGCmnRptModule.isEnableDebugEnv()?"http://111.230.84.242/g/v1":"https://"+n.INFOC_SERVER_URL+"/g/v1"},n.parseData=function(a){if(!a)return-1;var i=a.indexOf("result=");if(i<0)return-2;if(i+7>=a.length)return-3;var l=a.charAt(i+7);return parseInt(l)},n.reportInfocImpl=function(a,i){var l=n.getCommonData(),p=n.getHost()+"/?"+l+"&"+i,P=encodeURI(p);r.Log.i("MGB_DEBUG","before call PlatformProxy.getInstance().request"),r.PlatformProxy.getInstance().request({url:P,method:"GET",success:function(m,y){if(y)if(n.parseData(y)==1){r.Log.i("Infoc::success("+a+") => &"+i);var v=r.InfocCache.shiftRequest();v&&n.reportInfocImpl(v.id,v.info)}else r.Log.w("Infoc:: fail("+a+") => "+i),r.Log.w(y),r.InfocCache.pushRequest(a,i,Date.now());else r.Log.e("Infoc:: error("+a+")"),r.InfocCache.pushRequest(a,i,Date.now())},fail:function(m,y){r.Log.e("Infoc:: failed("+a+") code("+m+")"),r.InfocCache.pushRequest(a,i,Date.now())}})},n.getCommonData=function(){var a=r.MGCmnRptModule.getPlatformInfo();if(!a)return r.Log.e("MGRPT_DEBUG","!platInfo"),"";var i=r.MGCmnRptModule.getInfocEnvCfg();if(!i)return r.Log.e("MGRPT_DEBUG","!infocEnvCfg"),"";var l=0;a.platform=="ios"?l=1:a.platform=="android"&&(l=2);var p=r.MGCmnRptModule.getShareTag();if(!p)return r.Log.e("MGRPT_DEBUG","!shareTag"),"";var P=r.MGCmnRptModule.getCroProTag();return P?"product_no="+n.INFOC_PRODUCT_ID+"&public_index="+n.INFOC_PUBLIC_INDEX+"&brand="+a.brand+"&model="+a.model+"&system="+a.system+"&version="+a.version+"&pixelratio="+a.pixelRatio+"&sdkversion="+a.SDKVersion+"&wechatid="+i.mPlayerId+"&newuser="+n.isNewUser()+"&authorization="+i.mAuthorization+"&channel_key="+i.channelKey+"&game_version="+i.gameVer+"&game_id="+i.game_id+"&game_name="+i.game_name+"&sub_channel="+i.sub_channel+"&benchmarklevel="+a.benchmarkLevel+"&platform="+l+"&share_level="+p.getLevel()+"&super_playid="+p.getSuper()+"&origin_playid="+p.getOrigin()+"&cropro="+P.fetch():(r.Log.e("MGRPT_DEBUG","!croproTag"),"")},n.prototype.set=function(a,i){if(a==null||a==null)throw new Error("ERROR: key cannot be null or undefined!");if(i==null||i==null)throw new Error("ERROR: value cannot be null or undefined!");return this.mMap.put(a,i),this},n.prototype.buildDataString=function(a){for(var i="business_index="+a+"&",l=this.mMap.size(),p=this.mMap.getPairs(),P=0;P<l;P++){var m=p[P];i+=m.key+"="+m.value+"&"}return 1<i.length&&(i=i.slice(0,i.length-1)),i},n.prototype.report=function(){var a=this.getTableID(),i=this.buildDataString(a),l=Date.now(),p=r.MGCmnRptModule.getInfocEnvCfg();p&&p.mPlayerId?n.reportInfocImpl(a,i):(r.InfocCache.pushRequest(a,i,l),r.Log.e(n.TAG,"after InfocCache.pushRequest, no playerId. info:"+i))},n.isNewUser=function(){if(n.isNewUserFlag!=null)return n.isNewUserFlag;var a=new Date,i=r.PlatformProxy.getInstance().getStorage(u);if(!i||i.length<=0)r.PlatformProxy.getInstance().setStorage(u,a.getTime()+""),n.isNewUserFlag=1;else{var l=r.TimeUtil.formatDate(new Date(parseInt(i))),p=r.TimeUtil.formatDate(a);n.isNewUserFlag=l==p?1:2}return n.isNewUserFlag},n.TAG="MGRPT.Infoc",n.INFOC_PRODUCT_ID=t.INFOC_PRODUCT_ID,n.INFOC_PUBLIC_INDEX=t.INFOC_PUBLIC_INDEX,n.INFOC_SERVER_URL=t.INFOC_SERVER_URL,n.isNewUserFlag=void 0,n}();r.Infoc=o}(c||(c={})),function(r){var u=[],t=function(){function e(){}return e.pushRequest=function(o,n,a){r.Log.i("InfoCache.pushRequest:: ("+o+") => "+n),u.push({id:o,info:n,ts:a}),1e3<u.length&&u.shift()},e.shiftRequest=function(){var o=u.shift();return o&&r.Log.i("InfoCache.shiftRequest:: ("+o.id+") => "+o.info),o},e}();r.InfocCache=t}(c||(c={})),function(r){var u=function(){function t(){}return t.getSubChannel=function(e,o){if(this.mLocalSubChannel)return this.mLocalSubChannel;if(this.mLocalSubChannel=r.PlatformProxy.getInstance().getStorage(t.KEY_GAME_SUB_CHANNEL),this.mLocalSubChannel)return this.mLocalSubChannel;var n,a=this.getChannelByWXAId(e),i=this.getChannelByQueryAppId(e),l=this.getChannelByAdsource(e),p=this.getChannelByAppId(e),P=this.getChannelByExtra(e),m=this.getChannelByOther(e),y=this.getChannelBySrc(e);return a?n=a:i?n=i:l?n=l:p?n=p:y?n=y:P?n=P:m&&(n=m),n||(n=o||"default"),this.mLocalSubChannel=n,r.PlatformProxy.getInstance().setStorage(t.KEY_GAME_SUB_CHANNEL,n),n},t.getChannelByWXAId=function(e){if(e&&e.query){var o=e.query,n=o.gdt_vid;r.Log.i(this.TAG,"getChannelByWXAid traceid = "+n);var a=o.weixinadinfo;if(a){var i=a.split(".")[0];return r.Log.i(this.TAG,"getChannelByWXAid aid = "+i),i}}return null},t.getChannelByExtra=function(e){return e&&e.query&&e.query.channel&&e.scene?e.query.channel:null},t.getChannelByOther=function(e){return e&&e.path&&e.path!="index"&&e.path.startsWith("6")?e.path:null},t.getChannelByAppId=function(e){return e&&e.referrerInfo&&e.referrerInfo.appId?e.referrerInfo.appId:null},t.getChannelBySrc=function(e){return e&&e.query&&e.query.source?e.query.source:null},t.getChannelByQueryAppId=function(e){return e&&e.query&&e.query.appid?e.query.appid:null},t.getChannelByAdsource=function(e){return e&&e.referrerInfo&&e.referrerInfo.extraData&&e.referrerInfo.extraData.adsource?e.referrerInfo.extraData.adsource:null},t.TAG="MGRPT.SubChannelHelper",t.KEY_GAME_SUB_CHANNEL="key_game_sub_channel",t.mLocalSubChannel=null,t}();r.SubChannelHelper=u}(c||(c={})),function(r){var u=function(){function t(){}return t.getPlatformType=function(){return r.GameEngineProxy.getPlatformType()},t.isPlatformWX=function(){return r.GameEngineProxy.isPlatformWX()},t.isPlatformQQ=function(){return r.GameEngineProxy.isPlatformQQ()},t.isPlatformFB=function(){return r.GameEngineProxy.isPlatformFB()},t.isPlatformWeb=function(){return r.GameEngineProxy.isPlatformWeb()},t}();r.PlatformChecker=u}(c||(c={})),function(r){var u=function(){function t(){this.TAG="MGRPT.PlatformImpl4FB"}return t.prototype.parseCroProTag=function(){return""},t.prototype.fillShareTag=function(e){},t.prototype.fillInfocEnvCfg=function(e){return e&&(e.channelKey||(e.channelKey=3),e.sub_channel||(e.sub_channel=r.SubChannelHelper.getSubChannel(this.getLaunchParameter()))),e},t.prototype.getLaunchParameter=function(){var e=new r.LaunchOption;return FBInstant.getEntryPointData()||r.Log.w(this.TAG,"no launch options associated with current entry point"),e},t.prototype.request=function(e,o){var n=this;r.Log.i(this.TAG,"facebook reqeust params: "+JSON.stringify(e));var a=new XMLHttpRequest;for(var i in a.open(e.method,e.url),e.header)a.setRequestHeader(i,e.header[i]);a.onreadystatechange=function(){if(a.readyState==XMLHttpRequest.DONE)if(r.Log.i(n.TAG,"facebook request, response code:",a.status),r.Log.i(n.TAG,"facebook request, response:",a.response),a.status==200){if(r.Log.i(n.TAG,"facebook request, succeed:",a.responseText),e.success){var l=a.status,p=a.getAllResponseHeaders();if(e.dataType=="json")try{e.success(l,JSON.parse(a.responseText),p)}catch(P){e.success(l,a.responseText,p)}else e.success(l,a.responseText,p)}}else r.Log.i(n.TAG,"facebook request, failed:",a.responseText),1<o?n.request(e,o-1):e.fail&&e.fail(a.status,a.responseText)},a.send(JSON.stringify(e.data))},t.prototype.getPlatformInfo=function(){var e=new r.PlatformInfo;e.language=FBInstant.getLocale(),e.platform=FBInstant.getPlatform(),e.SDKVersion=FBInstant.getSDKVersion();try{e.screenWidth=window.screen.width,e.screenHeight=window.screen.height}catch(o){r.Log.w(this.TAG,"exception occur while collecting platform info")}return e},t.prototype.setStorage=function(e,o){this.isLocalStorageAvailable()?window.localStorage.setItem(e,o):this.isSessionAvailable()?window.sessionStorage.setItem(e,o):r.Log.w(this.TAG,"storage api is unavailable")},t.prototype.getStorage=function(e){return this.isLocalStorageAvailable()?window.localStorage.getItem(e):this.isSessionAvailable()?window.sessionStorage.getItem(e):void r.Log.w(this.TAG,"storage api is unavailable")},t.prototype.delStorage=function(e){this.isLocalStorageAvailable()?window.localStorage.removeItem(e):this.isSessionAvailable()?window.sessionStorage.removeItem(e):r.Log.w(this.TAG,"storage api is unavailable")},t.prototype.isSessionAvailable=function(){return!!window.sessionStorage},t.prototype.isLocalStorageAvailable=function(){return!!window.localStorage},t}();r.PlatformImpl4FB=u}(c||(c={})),function(r){var u=function(){function t(){this.mbEnteredBackground=!1,this.init()}return t.prototype.init=function(){var e=function(){function o(n){this.platformImpl=null,this.platformImpl=n}return o.prototype.onLoad=function(n){},o.prototype.onMaximize=function(n){},o.prototype.onMinimize=function(n){},o.prototype.onEnterBackground=function(n){r.Log.i("MGB.PlatformImpl4QQ","BK.Game.onEnterbackground, statusInfo:"+JSON.stringify(GameStatusInfo)),this.platformImpl.mbEnteredBackground=!0},o.prototype.onEnterForeground=function(n){r.Log.i("MGB.PlatformImpl4QQ","BK.Game.onEnterforeground, statusInfo:"+JSON.stringify(GameStatusInfo)),this.platformImpl.mbEnteredBackground=!1},o.prototype.onClose=function(n){},o}();new BK.Game(new e(this))},t.prototype.parseCroProTag=function(){var e=void 0,o=GameStatusInfo.gameParam;if(r.Log.i("MGRPT_DEBUG","game param: "+JSON.stringify(o)),o){var n=JSON.parse(o);n&&n.hasOwnProperty(r.MGCroProTag.KEY_CROSS_PROMOTION_TAG)?(e=n[r.MGCroProTag.KEY_CROSS_PROMOTION_TAG],r.Log.i("MGRPT_DEBUG","cross promotion tag parsed: "+e)):r.Log.e("MGRPT_DEBUG","cross promotion tag parse failed")}else r.Log.e("MGRPT_DEBUG","GameStatusInfo.gameParam undefined");return e},t.prototype.fillShareTag=function(e){if(e){var o=GameStatusInfo.gameParam;if(r.Log.i("MGRPT_DEBUG","[paramLaunch]:"+o),o)for(var n=0,a=o.split("&");n<a.length;n++){var i=a[n];if(i){var l=i.indexOf("=",0);if(!(l<=0||l>=i.length)){var p=i.substr(0,l),P=i.substr(l+1,i.length-l-1);p==r.MGShareTag.KEY_LEVEL?(e.setLevel(Number(P)),r.Log.i("MGRPT_DEBUG","[level]:"+P)):p==r.MGShareTag.KEY_SUPER?(e.setSuper(P),r.Log.i("MGRPT_DEBUG","[super]:"+P)):p==r.MGShareTag.KEY_ORIGIN&&(e.setOrigin(P),r.Log.i("MGRPT_DEBUG","[origin]:"+P))}}}}},t.prototype.fillInfocEnvCfg=function(e){return e&&(e.channelKey||(e.channelKey=2),e.sub_channel||(e.sub_channel=r.SubChannelHelper.getSubChannel(this.getLaunchParameter()))),e},t.prototype.getLaunchParameter=function(){var e=new r.LaunchOption;if(this.mbEnteredBackground)return e;var o=GameStatusInfo.gameParam;if(o){for(var n={},a=(o[0]==="?"?o.substr(1):o).split("&"),i=0;i<a.length;i++){var l=a[i].split("=");n[decodeURIComponent(l[0])]=decodeURIComponent(l[1]||"")}e.query=n}return e.shareTicket=GameStatusInfo.aioType.toString(),e},t.prototype.request=function(e,o){var n=this,a=e.method?e.method:"POST",i=new BK.HttpUtil(e.url);if(i.setHttpMethod(a),e.header)for(var l in e.header)i.setHttpHeader(l,e.header[l]);if(e.data){var p=new BK.Buffer(0,!1);p.writeAsString(JSON.stringify(e.data),!1),i.setHttpRawBody(p)}i.requestAsync(function(P,m){var y=P.readAsString(!0);if(m==200){if(e.success)if(e.dataType=="json")try{e.success(m,JSON.parse(y),null)}catch(v){e.success(m,y,null)}else e.success(m,y,null)}else if(0<o)n.request(e,o-1);else if(e.fail)if(e.dataType=="json")try{e.fail(m,JSON.parse(y))}catch(v){e.fail(m,y)}else e.fail(m,y)})},t.prototype.getPlatformInfo=function(){var e=new r.PlatformInfo;return e.version=GameStatusInfo.QQVer,e.system=GameStatusInfo.platform+" "+GameStatusInfo.osVersion,e.screenWidth=BK.Director.screenPixelSize.width,e.screenHeight=BK.Director.screenPixelSize.height,e.platform=GameStatusInfo.platform,e},t.prototype.setStorage=function(e,o){BK.localStorage?BK.localStorage.setItem(e,o):r.GameEngineProxy.setLocalItem(e,o)},t.prototype.getStorage=function(e){return BK.localStorage?BK.localStorage.getItem(e):r.GameEngineProxy.getLocalItem(e)},t.prototype.delStorage=function(e){BK.localStorage?BK.localStorage.removeItem(e):r.GameEngineProxy.removeLocalItem(e)},t.getDataPath=function(){BK.FileUtil.isFileExist(t.DATA_DIR)||BK.FileUtil.makeDir(t.DATA_DIR);var e=t.DATA_DIR+GameStatusInfo.openId+"//";return BK.FileUtil.isFileExist(e)||BK.FileUtil.makeDir(e),e},t.DATA_DIR="GameSandBox://data4ad//",t}();r.PlatformImpl4QQ=u}(c||(c={})),function(r){var u=function(){function t(){this.TAG="MGRPT.PlatformImpl4TT"}return t.prototype.request=function(e,o){var n=this;tt.request({url:e.url,data:e.data,header:e.header,method:e.method,dataType:e.dataType,success:function(a){a.statusCode!=200?e.fail&&e.fail(a.statusCode,a):a.data?e.success&&e.success(a.statusCode,a.data,a.header):e.fail&&e.fail(a.statusCode,a)},fail:function(){1<o?n.request(e,o-1):e.fail&&e.fail(-1,null)}})},t.prototype.getPlatformInfo=function(){var e=tt.getSystemInfoSync(),o=new r.PlatformInfo;return o.version=e?e.version:"",o.system=e?e.system:"_unknow_",o.screenWidth=e?e.screenWidth:0,o.screenHeight=e?e.screenHeight:0,o.platform=e?e.system:"",o},t.prototype.setStorage=function(e,o){tt.setStorageSync(e,o)},t.prototype.getStorage=function(e){return tt.getStorageSync(e)},t.prototype.delStorage=function(e){tt.removeStorageSync(e)},t.prototype.fillInfocEnvCfg=function(e){return e&&(e.channelKey||(e.channelKey=4),e.sub_channel||(e.sub_channel=r.SubChannelHelper.getSubChannel(this.getLaunchParameter()))),e},t.prototype.getLaunchParameter=function(){var e=new r.LaunchOption,o=tt.getLaunchOptionsSync();return o&&(e.query=o),e},t.prototype.fillShareTag=function(e){if(e){var o=tt.getLaunchOptionsSync();o&&(o.hasOwnProperty(r.MGShareTag.KEY_LEVEL)&&(r.Log.i("MGRPT_DEBUG","pl_level:"+o.agent_level),e.setLevel(Number(o.agent_level)+1)),o.hasOwnProperty(r.MGShareTag.KEY_SUPER)&&(r.Log.i("MGRPT_DEBUG","pl_super:"+o.agent_upper),e.setSuper(o.agent_upper)),o.hasOwnProperty(r.MGShareTag.KEY_ORIGIN)&&(r.Log.i("MGRPT_DEBUG","pl_origin:"+o.agent_orign),e.setOrigin(o.agent_orign)))}},t.prototype.parseCroProTag=function(){return""},t}();r.PlatformImpl4TT=u}(c||(c={})),function(r){var u=function(){function t(){}return t.prototype.parseCroProTag=function(){var e=void 0,o=this.getLaunchParameter();if(o.referrerInfo&&o.referrerInfo.appId){var n=o.referrerInfo.extraData;n&&n.hasOwnProperty(r.MGCroProTag.KEY_CROSS_PROMOTION_TAG)&&(e=n[r.MGCroProTag.KEY_CROSS_PROMOTION_TAG],r.Log.i("MGRPT_DEBUG","cross promotion tag parsed: "+e))}return e},t.prototype.fillShareTag=function(e){if(e){var o=wx.getLaunchOptionsSync();o&&o.query&&(o.query.hasOwnProperty(r.MGShareTag.KEY_LEVEL)&&(r.Log.i("MGRPT_DEBUG","pl_level:"+o.query.agent_level),e.setLevel(Number(o.query.agent_level)+1)),o.query.hasOwnProperty(r.MGShareTag.KEY_SUPER)&&(r.Log.i("MGRPT_DEBUG","pl_super:"+o.query.agent_upper),e.setSuper(o.query.agent_upper)),o.query.hasOwnProperty(r.MGShareTag.KEY_ORIGIN)&&(r.Log.i("MGRPT_DEBUG","pl_origin:"+o.query.agent_orign),e.setOrigin(o.query.agent_orign)))}},t.prototype.fillInfocEnvCfg=function(e){return e&&(e.channelKey||(e.channelKey=1),e.sub_channel||(e.sub_channel=r.SubChannelHelper.getSubChannel(this.getLaunchParameter()))),e},t.prototype.getLaunchParameter=function(){return wx.getLaunchOptionsSync()},t.prototype.login=function(e){wx.login({success:function(o){r.Log.i("WX login success. # code:"+o.code)},fail:function(o){r.Log.i("WX login failed. # code:"+o.code+", errmsg:"+o.errMsg)}})},t.prototype.getUserSetting=function(e){wx.getSetting({success:function(o){e.success&&e.success(o.authSetting)},fail:function(){e.fail&&e.fail()}})},t.prototype.request=function(e,o){var n=this;wx.request({url:e.url,data:e.data,header:e.header,method:e.method,dataType:e.dataType,success:function(a){a.statusCode!=200?e.fail&&e.fail(a.statusCode,a):a.data?e.success&&e.success(a.statusCode,a.data,a.header):e.fail&&e.fail(a.statusCode,a)},fail:function(){1<o?n.request(e,o-1):e.fail&&e.fail(-1,null)}})},t.prototype.getPlatformInfo=function(){return wx.getSystemInfoSync()},t.prototype.setStorage=function(e,o){wx.setStorageSync(e,o)},t.prototype.getStorage=function(e){return wx.getStorageSync(e)},t.prototype.delStorage=function(e){wx.removeStorageSync(e)},t}();r.PlatformImpl4WX=u}(c||(c={})),function(r){var u=function(){function t(){this.TAG="MGRPT.PlatformImpl4Web"}return t.prototype.parseCroProTag=function(){return""},t.prototype.fillShareTag=function(e){},t.prototype.fillInfocEnvCfg=function(e){return e&&(e.channelKey||(e.channelKey=0),e.sub_channel||(e.sub_channel=r.SubChannelHelper.getSubChannel(this.getLaunchParameter()))),e},t.prototype.getLaunchParameter=function(){return new r.LaunchOption},t.prototype.request=function(e,o){var n=this;r.Log.i(this.TAG,"reqeust params: "+e);var a=new XMLHttpRequest;for(var i in a.open(e.method,e.url),e.header)a.setRequestHeader(i,e.header[i]);a.onreadystatechange=function(){if(a.readyState==4)if(a.status==200){if(r.Log.i(n.TAG,"request, succeed:",a.responseText),e.success){var l=a.status,p=a.getAllResponseHeaders();if(e.dataType=="json")try{e.success(l,JSON.parse(a.responseText),p)}catch(P){e.success(l,a.responseText,p)}else e.success(l,a.responseText,p)}}else r.Log.i(n.TAG,"request, failed:",a.responseText),1<o?n.request(e,o-1):e.fail&&e.fail(a.status,a.responseText)},a.send(JSON.stringify(e.data))},t.prototype.getPlatformInfo=function(){var e=new r.PlatformInfo;e.platform="web";try{e.system=navigator.platform,e.model=navigator.appName,e.version=navigator.appVersion,e.language=navigator.language,e.screenWidth=window.screen.width,e.screenHeight=window.screen.height}catch(o){r.Log.w(this.TAG,"exception occur while collecting platform info")}return e},t.prototype.setStorage=function(e,o){this.isLocalStorageAvailable()?window.localStorage.setItem(e,o):this.isSessionAvailable()?window.sessionStorage.setItem(e,o):r.Log.w(this.TAG,"storage api is unavailable")},t.prototype.getStorage=function(e){return this.isLocalStorageAvailable()?window.localStorage.getItem(e):this.isSessionAvailable()?window.sessionStorage.getItem(e):void r.Log.w(this.TAG,"storage api is unavailable")},t.prototype.delStorage=function(e){this.isLocalStorageAvailable()?window.localStorage.removeItem(e):this.isSessionAvailable()?window.sessionStorage.removeItem(e):r.Log.w(this.TAG,"storage api is unavailable")},t.prototype.isSessionAvailable=function(){return!!window.sessionStorage},t.prototype.isLocalStorageAvailable=function(){return!!window.localStorage},t}();r.PlatformImpl4Web=u}(c||(c={})),function(r){var u=function(){function t(){this.mPlatformCur=null}return t.getInstance=function(){return this.sInst!=null||(this.sInst=new t),this.sInst},t.prototype.init=function(e){if(!this.mPlatformCur)switch(e){case r.ENUMPLATFORM.PLATFORM_WX:this.mPlatformCur=new r.PlatformImpl4WX;break;case r.ENUMPLATFORM.PLATFORM_QQ:this.mPlatformCur=new r.PlatformImpl4QQ;break;case r.ENUMPLATFORM.PLATFORM_WEB:this.mPlatformCur=new r.PlatformImpl4Web;break;case r.ENUMPLATFORM.PLATFORM_FB:this.mPlatformCur=new r.PlatformImpl4FB;break;case r.ENUMPLATFORM.PLATFORM_TT:this.mPlatformCur=new r.PlatformImpl4TT}},t.prototype.request=function(e,o){o===void 0&&(o=3),this.mPlatformCur!=null&&this.mPlatformCur.request(e,o)},t.prototype.getPlatformInfo=function(){return this.mPlatformCur==null?null:this.mPlatformCur.getPlatformInfo()},t.prototype.setStorage=function(e,o){if(this.mPlatformCur==null)return null;this.mPlatformCur.setStorage(e,o)},t.prototype.getStorage=function(e){return this.mPlatformCur==null?null:this.mPlatformCur.getStorage(e)},t.prototype.delStorage=function(e){if(this.mPlatformCur==null)return null;this.mPlatformCur.delStorage(e)},t.prototype.fillInfocEnvCfg=function(e){return this.mPlatformCur==null?e:this.mPlatformCur.fillInfocEnvCfg(e)},t.prototype.fillShareTag=function(e){this.mPlatformCur&&this.mPlatformCur.fillShareTag(e)},t.prototype.parseCroProTag=function(){return this.mPlatformCur?this.mPlatformCur.parseCroProTag():null},t.sInst=null,t}();r.PlatformProxy=u}(c||(c={})),function(r){var u=function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return O(e,t),e.prototype.getTableID=function(){return r.ENUMPLATFORM.PLATFORM_FB===r.PlatformChecker.getPlatformType()?101:203},e.report=function(o){var n=new e,a=r.PlatformProxy.getInstance().getPlatformInfo();n.set("screenwidth",a?a.screenWidth:0),n.set("screenheight",a?a.screenHeight:0),n.set("language",a?a.language:""),n.set("clicked",o),n.set("game_time",0),n.set("ver",this.VERSION),n.set("font_size",a?a.fontSizeSetting:0),n.set("source",0),n.set("src_detail",""),n.report()},e.VERSION=1,e.CLICKED_APPLICATION_INIT=1,e.CLICKED_RESLOAD_SUCCESS=2,e}(r.Infoc);r.minigame_common_active=u}(c||(c={})),function(r){var u=function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return O(e,t),e.prototype.getTableID=function(){return r.ENUMPLATFORM.PLATFORM_FB===r.PlatformChecker.getPlatformType()?102:208},e.report=function(o,n,a,i){r.Log.i("MGRPT_DEBUG","minigame_common_ad.report enter. posId:"+o+", action:"+n);var l=new e,p=e.ADSOURCE_UNKNOWN;if(l!=null&&o!=null){var P="";P=typeof a=="string"?a:String(a),l.set("posid",o),l.set("action",n),l.set("err_code",P),l.set("ad_type",i),l.set("source",p),l.set("ver",e.VERSION),l.report()}},e.VERSION=1,e.ADSOURCE_UNKNOWN=0,e}(r.Infoc);r.minigame_common_ad=u}(c||(c={})),function(r){var u=function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return O(e,t),e.prototype.getTableID=function(){return r.ENUMPLATFORM.PLATFORM_FB===r.PlatformChecker.getPlatformType()?103:230},e.report=function(o,n,a,i,l,p,P){var m=new e;m.set("open_type",o),m.set("user_type",n),m.set("open_from",a),m.set("scene_id",i),m.set("source_id",l),m.set("source_desc",p),m.set("md5",P),m.report()},e}(r.Infoc);r.minigame_common_open_from=u}(c||(c={})),function(r){var u=function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return O(e,t),e.prototype.getTableID=function(){return r.ENUMPLATFORM.PLATFORM_FB===r.PlatformChecker.getPlatformType()?104:232},e.report=function(o,n,a,i,l,p,P,m,y,v,_,L,g,s,f,I,d,T){l===void 0&&(l=0),p===void 0&&(p=""),P===void 0&&(P=0),m===void 0&&(m=""),y===void 0&&(y=0),v===void 0&&(v=""),_===void 0&&(_=0),L===void 0&&(L=""),g===void 0&&(g=0),s===void 0&&(s=""),f===void 0&&(f=0),I===void 0&&(I=0),d===void 0&&(d=0),T===void 0&&(T=0);var h=new e;h.set("action",o),h.set("survival_time",n),h.set("mark",a),h.set("skin",i),h.set("property1",l),h.set("property2",P),h.set("property3",y),h.set("property4",_),h.set("property5",g),h.set("property6",f),h.set("property7",I),h.set("property8",d),h.set("property9",T),h.set("extra1",p),h.set("extra2",m),h.set("extra3",v),h.set("extra4",L),h.set("extra5",s),h.report()},e.reportInOrder=function(o,n,a,i,l,p,P,m,y,v,_,L,g,s,f,I,d,T){l===void 0&&(l=0),p===void 0&&(p=0),P===void 0&&(P=0),m===void 0&&(m=0),y===void 0&&(y=0),v===void 0&&(v=0),_===void 0&&(_=0),L===void 0&&(L=0),g===void 0&&(g=0),s===void 0&&(s=""),f===void 0&&(f=""),I===void 0&&(I=""),d===void 0&&(d=""),T===void 0&&(T="");var h=new e;h.set("action",o),h.set("survival_time",n),h.set("mark",a),h.set("skin",i),h.set("property1",l),h.set("property2",p),h.set("property3",P),h.set("property4",m),h.set("property5",y),h.set("property6",v),h.set("property7",_),h.set("property8",L),h.set("property9",g),h.set("extra1",s),h.set("extra2",f),h.set("extra3",I),h.set("extra4",d),h.set("extra5",T),h.report()},e}(r.Infoc);r.minigame_common_playerdata=u}(c||(c={})),function(r){var u=function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return O(e,t),e.prototype.getTableID=function(){return r.ENUMPLATFORM.PLATFORM_FB===r.PlatformChecker.getPlatformType()?105:233},e.report=function(o,n,a,i,l,p,P,m,y){l===void 0&&(l=""),p===void 0&&(p=""),P===void 0&&(P=""),m===void 0&&(m=""),y===void 0&&(y="");var v=new e;v.set("action",o),v.set("types",n),v.set("num",a),v.set("source",i),v.set("extra1",l),v.set("extra2",p),v.set("extra3",P),v.set("extra4",m),v.set("extra5",y),v.report()},e}(r.Infoc);r.minigame_common_playerdata_coin=u}(c||(c={})),function(r){var u=function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return O(e,t),e.prototype.getTableID=function(){return r.ENUMPLATFORM.PLATFORM_FB===r.PlatformChecker.getPlatformType()?106:229},e.report=function(o,n,a,i,l,p,P,m){var y=new e;y.set("scene_id",o),y.set("source_id",n),y.set("source_desc",a),y.set("share_limit",i),y.set("share_action",l),y.set("share_title",p),y.set("image_url",P),y.set("md5",m),y.report()},e}(r.Infoc);r.minigame_common_share_detail=u}(c||(c={})),function(r){var u=function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return O(e,t),e.prototype.getTableID=function(){return r.ENUMPLATFORM.PLATFORM_FB===r.PlatformChecker.getPlatformType()?107:228},e.report=function(o,n,a,i,l,p,P){var m=new e;m.set("scene_id",o),m.set("source_id",n),m.set("source_desc",a),m.set("share_action",i),m.set("share_title",l),m.set("share_describe",p),m.set("share_button",P),m.report()},e}(r.Infoc);r.minigame_common_share_scene=u}(c||(c={})),function(r){var u=function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return O(e,t),e.prototype.getTableID=function(){return r.ENUMPLATFORM.PLATFORM_FB===r.PlatformChecker.getPlatformType()?(r.Log.e("MGRPT","minigame_common_time not support Facebook Platform Now!!!"),0):252},e.report=function(o,n){var a=new e;a.set("g_type",o),a.set("g_time",n),a.report()},e}(r.Infoc);r.minigame_common_time=u}(c||(c={})),function(r){var u=function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return O(e,t),e.prototype.getTableID=function(){return r.ENUMPLATFORM.PLATFORM_FB===r.PlatformChecker.getPlatformType()?108:231},e.report=function(o,n,a,i,l,p,P,m){i===void 0&&(i=""),l===void 0&&(l=""),p===void 0&&(p=""),P===void 0&&(P=""),m===void 0&&(m="");var y=new e;y.set("page",o),y.set("node",n),y.set("action",a),y.set("extra1",i),y.set("extra2",l),y.set("extra3",p),y.set("extra4",P),y.set("extra5",m),y.report()},e}(r.Infoc);r.minigame_common_user_action=u}(c||(c={})),function(r){var u=function(){function t(){this.mLevel=1,this.mPlayerId4Super="",this.mPlayerId4Origin="",this.init(),this.fetchTag()}return t.prototype.getLevel=function(){return this.mLevel},t.prototype.getSuper=function(){return this.mPlayerId4Super},t.prototype.getOrigin=function(){return this.mPlayerId4Origin},t.prototype.setLevel=function(e){this.mLevel=e},t.prototype.setSuper=function(e){this.mPlayerId4Super=e},t.prototype.setOrigin=function(e){this.mPlayerId4Origin=e},t.prototype.fetchTag=function(){this.isFirstRun()?(this.fetchFromLaunchOptions(),this.saveShareTag()):this.fetchFromLocalStorage()},t.prototype.init=function(){var e=r.MGCmnRptModule.getPlayerId();this.mLevel=1,this.mPlayerId4Super="",this.mPlayerId4Origin=e},t.prototype.fetchFromLaunchOptions=function(){r.Log.i("MGRPT_DEBUG","MGShareTag fetchFromLaunchOptions enter()."),r.PlatformProxy.getInstance().fillShareTag(this)},t.prototype.fetchFromLocalStorage=function(){r.Log.i("MGRPT_DEBUG","MGShareTag fetchFromLocalStorage enter().");var e=r.PlatformProxy.getInstance().getStorage(t.KEY_LEVEL);if(e&&0<e.length&&(this.mLevel=Number(e)),this.mPlayerId4Origin=r.PlatformProxy.getInstance().getStorage(t.KEY_ORIGIN),!this.mPlayerId4Origin){r.Log.e(t.TAG,"fetchFromLocalStorage [error] Origin PlayerId is empty.");var o=r.MGCmnRptModule.getPlayerId();this.mPlayerId4Origin=o}this.mPlayerId4Super=r.PlatformProxy.getInstance().getStorage(t.KEY_SUPER),this.mPlayerId4Super||(this.mPlayerId4Super="")},t.prototype.isFirstRun=function(){var e=r.PlatformProxy.getInstance().getStorage(t.KEY_NOT1ST);return!e||e.length==0},t.prototype.saveShareTag=function(){r.PlatformProxy.getInstance().setStorage(t.KEY_NOT1ST,"dirtry"),r.PlatformProxy.getInstance().setStorage(t.KEY_LEVEL,String(this.mLevel)),r.PlatformProxy.getInstance().setStorage(t.KEY_SUPER,this.mPlayerId4Super),r.PlatformProxy.getInstance().setStorage(t.KEY_ORIGIN,this.mPlayerId4Origin)},t.TAG="",t.KEY_NOT1ST="mgst_1st",t.KEY_LEVEL="agent_level",t.KEY_SUPER="agent_upper",t.KEY_ORIGIN="agent_orign",t}();r.MGShareTag=u}(c||(c={})),function(r){var u=function(e,o){this.key=null,this.value=null,this.key=e,this.value=o};r.Pair=u;var t=function(){function e(){this.arr=[]}return e.prototype.put=function(o,n){for(var a=0;a<this.arr.length;a++)if(this.arr[a].key===o)return void(this.arr[a].value=n);this.arr.push(new u(o,n))},e.prototype.get=function(o){for(var n=0;n<this.arr.length;n++)if(this.arr[n].key===o)return this.arr[n].value;return null},e.prototype.getPair=function(o){for(var n=0;n<this.arr.length;n++)if(this.arr[n].key===o)return this.arr[n];return null},e.prototype.remove=function(o){for(var n=0;n<this.arr.length;n++)if(this.arr[n].key===o)return void this.arr.splice(n,1)},e.prototype.clear=function(){this.arr=[]},e.prototype.size=function(){return this.arr.length},e.prototype.getPairs=function(){return this.arr},e}();r.Dictionary=t}(c||(c={})),function(r){var u=function(){function t(){}return t.i=function(e){for(var o=[],n=1;n<arguments.length;n++)o[n-1]=arguments[n];r.MGCmnRptModule.isEnableDebugEnv()&&(r.PlatformChecker.getPlatformType()==r.ENUMPLATFORM.PLATFORM_QQ?BK.Script.log(1,1,e+this.GetOptionalMsg(o)):console.info(t.getPrefix(),e,o))},t.w=function(e){for(var o=[],n=1;n<arguments.length;n++)o[n-1]=arguments[n];r.MGCmnRptModule.isEnableDebugEnv()&&(r.PlatformChecker.getPlatformType()==r.ENUMPLATFORM.PLATFORM_QQ?BK.Script.log(1,1,e+this.GetOptionalMsg(o)):console.warn(t.getPrefix(),e,o))},t.e=function(e){for(var o=[],n=1;n<arguments.length;n++)o[n-1]=arguments[n];r.MGCmnRptModule.isEnableDebugEnv()&&(r.PlatformChecker.getPlatformType()==r.ENUMPLATFORM.PLATFORM_QQ?BK.Script.log(1,1,e+this.GetOptionalMsg(o)):console.error(t.getPrefix(),e,o))},t.f=function(e){for(var o=[],n=1;n<arguments.length;n++)o[n-1]=arguments[n];r.MGCmnRptModule.isEnableDebugEnv()&&(r.PlatformChecker.getPlatformType()==r.ENUMPLATFORM.PLATFORM_QQ?BK.Script.log(1,1,e+this.GetOptionalMsg(o)):console.error(t.getPrefix(),e,o))},t.formatDateTime=function(){var e=new Date,o=e.getHours().toString(),n=e.getMinutes().toString(),a=e.getSeconds().toString(),i=e.getMilliseconds().toString();if(n.length<2&&(n="0"+n),a.length<2&&(a="0"+a),i.length<3)for(var l=0;l<3-i.length;l++)i="0"+i;return o+":"+n+":"+a+" "+i},t.getPrefix=function(){return"["+t.formatDateTime()+"] "},t.GetOptionalMsg=function(){for(var e=[],o=0;o<arguments.length;o++)e[o]=arguments[o];var n="";for(var a in e)n+=" "+e[a];return n},t}();r.Log=u}(c||(c={})),function(r){var u=0,t="";function e(g){return a(o(p(g)))}function o(g){return m(y(P(g),8*g.length))}function n(g,s){var f=P(g);16<f.length&&(f=y(f,8*g.length));for(var I=Array(16),d=Array(16),T=0;T<16;T++)I[T]=909522486^f[T],d[T]=1549556828^f[T];var h=y(I.concat(P(s)),512+8*s.length);return m(y(d.concat(h),672))}function a(g){for(var s,f=u?"0123456789ABCDEF":"0123456789abcdef",I="",d=0;d<g.length;d++)s=g.charCodeAt(d),I+=f.charAt(s>>>4&15)+f.charAt(15&s);return I}function i(g){for(var s="",f=g.length,I=0;I<f;I+=3)for(var d=g.charCodeAt(I)<<16|(I+1<f?g.charCodeAt(I+1)<<8:0)|(I+2<f?g.charCodeAt(I+2):0),T=0;T<4;T++)8*I+6*T>8*g.length?s+=t:s+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(d>>>6*(3-T)&63);return s}function l(g,s){var f,I,d,T,h=s.length,C=Array(),E=Array(Math.ceil(g.length/2));for(f=0;f<E.length;f++)E[f]=g.charCodeAt(2*f)<<8|g.charCodeAt(2*f+1);for(;0<E.length;){for(T=Array(),f=d=0;f<E.length;f++)d=(d<<16)+E[f],d-=(I=Math.floor(d/h))*h,(0<T.length||0<I)&&(T[T.length]=I);C[C.length]=d,E=T}var M="";for(f=C.length-1;0<=f;f--)M+=s.charAt(C[f]);var R=Math.ceil(8*g.length/(Math.log(s.length)/Math.log(2)));for(f=M.length;f<R;f++)M=s[0]+M;return M}function p(g){for(var s,f,I="",d=-1;++d<g.length;)s=g.charCodeAt(d),f=d+1<g.length?g.charCodeAt(d+1):0,55296<=s&&s<=56319&&56320<=f&&f<=57343&&(s=65536+((1023&s)<<10)+(1023&f),d++),s<=127?I+=String.fromCharCode(s):s<=2047?I+=String.fromCharCode(192|s>>>6&31,128|63&s):s<=65535?I+=String.fromCharCode(224|s>>>12&15,128|s>>>6&63,128|63&s):s<=2097151&&(I+=String.fromCharCode(240|s>>>18&7,128|s>>>12&63,128|s>>>6&63,128|63&s));return I}function P(g){for(var s=Array(g.length>>2),f=0;f<s.length;f++)s[f]=0;for(f=0;f<8*g.length;f+=8)s[f>>5]|=(255&g.charCodeAt(f/8))<<24-f%32;return s}function m(g){for(var s="",f=0;f<32*g.length;f+=8)s+=String.fromCharCode(g[f>>5]>>>24-f%32&255);return s}function y(g,s){g[s>>5]|=128<<24-s%32,g[15+(s+64>>9<<4)]=s;for(var f,I=Array(80),d=1732584193,T=-271733879,h=-1732584194,C=271733878,E=-1009589776,M=0;M<g.length;M+=16){for(var R=d,b=T,N=h,F=C,B=E,S=0;S<80;S++){I[S]=S<16?g[M+S]:L(I[S-3]^I[S-8]^I[S-14]^I[S-16],1);var x=_(_(L(d,5),v(S,T,h,C)),_(_(E,I[S]),(f=S)<20?1518500249:f<40?1859775393:f<60?-1894007588:-899497514));E=C,C=h,h=L(T,30),T=d,d=x}d=_(d,R),T=_(T,b),h=_(h,N),C=_(C,F),E=_(E,B)}return Array(d,T,h,C,E)}function v(g,s,f,I){return g<20?s&f|~s&I:g<40?s^f^I:g<60?s&f|s&I|f&I:s^f^I}function _(g,s){var f=(65535&g)+(65535&s);return(g>>16)+(s>>16)+(f>>16)<<16|65535&f}function L(g,s){return g<<s|g>>>32-s}r.hex_sha1=e,r.b64_sha1=function(g){return i(o(p(g)))},r.any_sha1=function(g,s){return l(o(p(g)),s)},r.hex_hmac_sha1=function(g,s){return a(n(p(g),p(s)))},r.b64_hmac_sha1=function(g,s){return i(n(p(g),p(s)))},r.any_hmac_sha1=function(g,s,f){return l(n(p(g),p(s)),f)}}(c||(c={})),function(r){var u=function(){function t(){}return t.formatDate=function(e){var o=e.getFullYear(),n=e.getMonth()+1,a=n<10?"0"+n:n+"",i=e.getDate();return o+"-"+a+"-"+(i<10?"0"+i:i+"")},t}();r.TimeUtil=u}(c||(c={}))});w()})()})()})();})();
